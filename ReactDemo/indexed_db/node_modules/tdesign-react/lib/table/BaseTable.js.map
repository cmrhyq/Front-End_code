{"version":3,"file":"BaseTable.js","sources":["../../src/table/BaseTable.tsx"],"sourcesContent":["import React, { useRef, useMemo, useImperativeHandle, forwardRef, useEffect, useState, WheelEvent } from 'react';\nimport pick from 'lodash/pick';\nimport classNames from 'classnames';\nimport TBody, { extendTableProps } from './TBody';\nimport { Affix } from '../affix';\nimport { ROW_LISTENERS } from './TR';\nimport THead from './THead';\nimport TFoot from './TFoot';\nimport useTableHeader from './hooks/useTableHeader';\nimport useColumnResize from './hooks/useColumnResize';\nimport useFixed from './hooks/useFixed';\nimport useAffix from './hooks/useAffix';\nimport usePagination from './hooks/usePagination';\nimport Loading from '../loading';\nimport { BaseTableProps } from './interface';\nimport useStyle, { formatCSSUnit } from './hooks/useStyle';\nimport useClassName from './hooks/useClassName';\nimport { getAffixProps } from './utils';\nimport log from '../_common/js/log';\n\nimport { StyledProps, Styles } from '../common';\n\nexport const BASE_TABLE_EVENTS = ['page-change', 'cell-click', 'scroll', 'scrollX', 'scrollY'];\nexport const BASE_TABLE_ALL_EVENTS = ROW_LISTENERS.map((t) => `row-${t}`).concat(BASE_TABLE_EVENTS);\n\nexport interface TableListeners {\n  [key: string]: Function;\n}\n\nexport interface TBaseTableProps extends BaseTableProps, StyledProps {}\n\nconst BaseTable = forwardRef((props: TBaseTableProps, ref) => {\n  const { tableLayout, height, data, columns, style, headerAffixedTop, bordered, resizable } = props;\n  const tableRef = useRef<HTMLDivElement>();\n  const tableElmRef = useRef<HTMLTableElement>();\n  const [tableFootHeight, setTableFootHeight] = useState(0);\n  const { virtualScrollClasses, tableLayoutClasses, tableBaseClass, tableColFixedClasses } = useClassName();\n  // 表格基础样式类\n  const { tableClasses, tableContentStyles, tableElementStyles } = useStyle(props);\n  // const [global] = useLocaleReceiver('table');\n  const { isMultipleHeader, spansAndLeafNodes, thList } = useTableHeader({ columns: props.columns });\n  const finalColumns = useMemo(\n    () => spansAndLeafNodes?.leafColumns || columns,\n    [spansAndLeafNodes?.leafColumns, columns],\n  );\n\n  // 固定表头和固定列逻辑\n  const {\n    scrollbarWidth,\n    tableWidth,\n    tableElmWidth,\n    tableContentRef,\n    isFixedHeader,\n    isWidthOverflow,\n    isFixedColumn,\n    thWidthList,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    setData,\n    refreshTable,\n    emitScrollEvent,\n    setUseFixedTableElmRef,\n    updateColumnFixedShadow,\n    getThWidthList,\n    updateThWidthList,\n    setRecalculateColWidthFuncRef,\n    addTableResizeObserver,\n  } = useFixed(props, finalColumns);\n\n  // 1. 表头吸顶；2. 表尾吸底；3. 底部滚动条吸底；4. 分页器吸底\n  const {\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  } = useAffix(props);\n\n  const { dataSource, isPaginateData, renderPagination } = usePagination(props);\n\n  // 列宽拖拽逻辑\n  const columnResizeParams = useColumnResize(tableContentRef, refreshTable, getThWidthList, updateThWidthList);\n  const { resizeLineRef, resizeLineStyle, recalculateColWidth, setEffectColMap } = columnResizeParams;\n  setRecalculateColWidthFuncRef(recalculateColWidth);\n\n  const dynamicBaseTableClasses = classNames(\n    tableClasses.concat({\n      [tableBaseClass.headerFixed]: isFixedHeader,\n      [tableBaseClass.columnFixed]: isFixedColumn,\n      [tableBaseClass.widthOverflow]: isWidthOverflow,\n      [tableBaseClass.multipleHeader]: isMultipleHeader,\n      [tableColFixedClasses.leftShadow]: showColumnShadow.left,\n      [tableColFixedClasses.rightShadow]: showColumnShadow.right,\n      [tableBaseClass.columnResizableTable]: props.resizable,\n    }),\n  );\n\n  const tableElmClasses = classNames([\n    [tableLayoutClasses[tableLayout || 'fixed']],\n    { [tableBaseClass.fullHeight]: height },\n  ]);\n\n  const isVirtual = useMemo(\n    () => props.scroll?.type === 'virtual' && props.data?.length > (props.scroll?.threshold || 100),\n    [props.data?.length, props.scroll?.threshold, props.scroll?.type],\n  );\n\n  const showRightDivider = useMemo(\n    () => props.bordered && isFixedHeader && ((isMultipleHeader && isWidthOverflow) || !isMultipleHeader),\n    [isFixedHeader, isMultipleHeader, isWidthOverflow, props.bordered],\n  );\n\n  useEffect(() => {\n    setUseFixedTableElmRef(tableElmRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableElmRef]);\n\n  useEffect(() => {\n    setData(isPaginateData ? dataSource : props.data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.data, dataSource, isPaginateData]);\n\n  const [lastLeafColumns, setLastLeafColumns] = useState(props.columns || []);\n  useEffect(() => {\n    if (lastLeafColumns.map((t) => t.colKey).join() !== spansAndLeafNodes.leafColumns.map((t) => t.colKey).join()) {\n      props.onLeafColumnsChange?.(spansAndLeafNodes.leafColumns);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      setLastLeafColumns(spansAndLeafNodes.leafColumns);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [spansAndLeafNodes.leafColumns]);\n\n  useEffect(() => {\n    setEffectColMap(thList[0], null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [thList]);\n\n  useImperativeHandle(ref, () => ({\n    tableElement: tableRef.current,\n    tableHtmlElement: tableElmRef.current,\n    tableContentElement: tableContentRef.current,\n    affixHeaderElement: affixHeaderRef.current,\n    refreshTable,\n  }));\n\n  const onFixedChange = () => {\n    const timer = setTimeout(() => {\n      onHorizontalScroll();\n      updateAffixHeaderOrFooter();\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  let lastScrollY = 0;\n  const onInnerVirtualScroll = (e: WheelEvent<HTMLDivElement>) => {\n    const target = e.target as HTMLElement;\n    const top = target.scrollTop;\n    // 排除横向滚动出发的纵向虚拟滚动计算\n    if (lastScrollY !== top) {\n      // TODO\n      // isVirtual.value && handleVirtualScroll();\n    } else {\n      lastScrollY = 0;\n      updateColumnFixedShadow(target);\n    }\n    lastScrollY = top;\n    emitScrollEvent(e);\n  };\n\n  // used for top margin\n  const getTFootHeight = () => {\n    if (!tableElmRef.current) return;\n    const timer = setTimeout(() => {\n      const height = tableElmRef.current?.querySelector('tfoot')?.getBoundingClientRect().height;\n      setTableFootHeight(height);\n      clearTimeout(timer);\n    });\n  };\n\n  useEffect(() => {\n    setTableContentRef(tableContentRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef]);\n\n  useEffect(\n    () => addTableResizeObserver(tableRef.current),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tableRef],\n  );\n\n  useEffect(getTFootHeight, [tableElmRef]);\n\n  const newData = isPaginateData ? dataSource : data;\n\n  if (resizable && tableLayout === 'auto') {\n    log.warn('Table', 'table-layout can not be `auto` for resizable column table, set `table-layout: fixed` please.');\n  }\n\n  const defaultColWidth = props.tableLayout === 'fixed' && isWidthOverflow ? '100px' : undefined;\n  const colgroup = (\n    <colgroup>\n      {finalColumns.map((col) => {\n        const style: Styles = { width: formatCSSUnit(thWidthList.current[col.colKey] || col.width) || defaultColWidth };\n        if (col.minWidth) {\n          style.minWidth = formatCSSUnit(col.minWidth);\n        }\n        return <col key={col.colKey} style={style} />;\n      })}\n    </colgroup>\n  );\n\n  /**\n   * Affixed Header\n   */\n  // onlyVirtualScrollBordered 用于浏览器兼容性处理，只有 chrome 需要调整 bordered，FireFox 和 Safari 不需要\n  const onlyVirtualScrollBordered =\n    !!(isVirtual && !headerAffixedTop && bordered) && /Chrome/.test(navigator?.userAgent);\n  const borderWidth = bordered && onlyVirtualScrollBordered ? 1 : 0;\n  const affixHeaderWrapHeight =\n    (affixHeaderRef.current?.getBoundingClientRect().height || 0) - scrollbarWidth - borderWidth;\n  // 两类场景：1. 虚拟滚动，永久显示表头，直到表头消失在可视区域； 2. 表头吸顶，根据滚动情况判断是否显示吸顶表头\n  const headerOpacity = headerAffixedTop ? Number(showAffixHeader) : 1;\n  const affixHeaderWrapHeightStyle = {\n    width: `${tableWidth.current}px`,\n    height: `${affixHeaderWrapHeight}px`,\n    opacity: headerOpacity,\n    marginTop: onlyVirtualScrollBordered ? `${borderWidth}px` : 0,\n  };\n  // 多级表头左边线缺失\n  const affixedLeftBorder = props.bordered ? 1 : 0;\n  const affixedHeader = Boolean(props.headerAffixedTop && tableWidth.current) && (\n    <div\n      ref={affixHeaderRef}\n      style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: headerOpacity }}\n      className={classNames(['scrollbar', { [tableBaseClass.affixedHeaderElm]: props.headerAffixedTop || isVirtual }])}\n    >\n      <table\n        className={classNames(tableElmClasses)}\n        style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}\n      >\n        {colgroup}\n        <THead\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          isMultipleHeader={isMultipleHeader}\n          bordered={props.bordered}\n          spansAndLeafNodes={spansAndLeafNodes}\n          thList={thList}\n          thWidthList={thWidthList.current}\n          resizable={props.resizable}\n          columnResizeParams={columnResizeParams}\n        />\n      </table>\n    </div>\n  );\n\n  // 添加这一层，是为了隐藏表头的横向滚动条。如果以后不需要照顾 IE 10 以下的项目，则可直接移除这一层\n  // 彼时，可更为使用 CSS 样式中的 .hideScrollbar()\n  const affixHeaderWithWrap = (\n    <div className={tableBaseClass.affixedHeaderWrap} style={affixHeaderWrapHeightStyle}>\n      {affixedHeader}\n    </div>\n  );\n\n  /**\n   * Affixed Footer\n   */\n  let marginScrollbarWidth = isWidthOverflow ? scrollbarWidth : 0;\n  if (bordered) {\n    marginScrollbarWidth += 1;\n  }\n  // Hack: Affix 组件，marginTop 临时使用 负 margin 定位位置\n  const affixedFooter = Boolean(props.footerAffixedBottom && props.footData?.length && tableWidth.current) && (\n    <Affix\n      className={tableBaseClass.affixedFooterWrap}\n      onFixedChange={onFixedChange}\n      offsetBottom={marginScrollbarWidth || 0}\n      {...getAffixProps(props.footerAffixedBottom)}\n      style={{ marginTop: `${-1 * (tableFootHeight + marginScrollbarWidth)}px` }}\n    >\n      <div\n        ref={affixFooterRef}\n        style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: Number(showAffixFooter) }}\n        className={classNames([\n          'scrollbar',\n          { [tableBaseClass.affixedFooterElm]: props.footerAffixedBottom || isVirtual },\n        ])}\n      >\n        <table className={tableElmClasses} style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}>\n          {colgroup}\n          <TFoot\n            rowKey={props.rowKey}\n            isFixedHeader={isFixedHeader}\n            rowAndColFixedPosition={rowAndColFixedPosition}\n            footData={props.footData}\n            columns={spansAndLeafNodes?.leafColumns || columns}\n            rowAttributes={props.rowAttributes}\n            rowClassName={props.rowClassName}\n            thWidthList={thWidthList.current}\n            footerSummary={props.footerSummary}\n            rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n          ></TFoot>\n        </table>\n      </div>\n    </Affix>\n  );\n\n  const translate = `translate(0, ${0}px)`;\n  const virtualStyle = {\n    transform: translate,\n    '-ms-transform': translate,\n    '-moz-transform': translate,\n    '-webkit-transform': translate,\n  };\n  const tableBodyProps = {\n    rowAndColFixedPosition,\n    showColumnShadow,\n    // data: isVirtual ? visibleData : data,\n    data: newData,\n    columns: spansAndLeafNodes?.leafColumns || columns,\n    tableElm: tableRef.current,\n    tableContentElm: tableContentRef.current,\n    tableWidth: tableWidth.current,\n    isWidthOverflow,\n    rowKey: props.rowKey || 'id',\n    // 虚拟滚动相关属性\n    // isVirtual,\n    // translateY: translateY,\n    // scrollType: scrollType,\n    // rowHeight: rowHeight,\n    // trs: trs,\n    // bufferSize: bufferSize,\n    scroll: props.scroll,\n    // handleRowMounted: handleRowMounted,\n    cellEmptyContent: props.cellEmptyContent,\n    renderExpandedRow: props.renderExpandedRow,\n    ...pick(props, extendTableProps),\n  };\n  const tableContent = (\n    <div\n      ref={tableContentRef}\n      className={tableBaseClass.content}\n      style={tableContentStyles}\n      onScroll={onInnerVirtualScroll}\n    >\n      {isVirtual && <div className={virtualScrollClasses.cursor} style={virtualStyle} />}\n      <table ref={tableElmRef} className={classNames(tableElmClasses)} style={tableElementStyles}>\n        {colgroup}\n        <THead\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          isMultipleHeader={isMultipleHeader}\n          bordered={props.bordered}\n          spansAndLeafNodes={spansAndLeafNodes}\n          thList={thList}\n          thWidthList={thWidthList.current}\n          resizable={props.resizable}\n          columnResizeParams={columnResizeParams}\n        />\n        <TBody {...tableBodyProps} />\n        <TFoot\n          rowKey={props.rowKey}\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          footData={props.footData}\n          columns={spansAndLeafNodes?.leafColumns || columns}\n          rowAttributes={props.rowAttributes}\n          rowClassName={props.rowClassName}\n          thWidthList={thWidthList.current}\n          footerSummary={props.footerSummary}\n          rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n        ></TFoot>\n      </table>\n    </div>\n  );\n\n  const { loading, loadingProps } = props;\n  const customLoadingText = loading;\n  const loadingContent = loading !== undefined && (\n    <Loading\n      loading={!!loading}\n      text={customLoadingText}\n      attach={() => tableRef.current}\n      showOverlay\n      size=\"small\"\n      {...loadingProps}\n    ></Loading>\n  );\n\n  const { topContent, bottomContent } = props;\n  const pagination = (\n    <div ref={paginationRef} className={tableBaseClass.paginationWrap} style={{ opacity: Number(showAffixPagination) }}>\n      {renderPagination()}\n    </div>\n  );\n  const bottom = !!bottomContent && <div className={tableBaseClass.bottomContent}>{bottomContent}</div>;\n\n  return (\n    <div ref={tableRef} className={classNames(dynamicBaseTableClasses)} style={{ position: 'relative', ...style }}>\n      {!!topContent && <div className={tableBaseClass.topContent}>{topContent}</div>}\n\n      {!!(isVirtual || props.headerAffixedTop) &&\n        (props.headerAffixedTop ? (\n          <Affix\n            offsetTop={0}\n            {...getAffixProps(props.headerAffixedTop, props.headerAffixProps)}\n            onFixedChange={onFixedChange}\n          >\n            {affixHeaderWithWrap}\n          </Affix>\n        ) : (\n          isFixedHeader && affixHeaderWithWrap\n        ))}\n\n      {tableContent}\n\n      {affixedFooter}\n\n      {loadingContent}\n\n      {showRightDivider && (\n        <div\n          className={tableBaseClass.scrollbarDivider}\n          style={{\n            right: `${scrollbarWidth}px`,\n            height: `${tableContentRef.current?.getBoundingClientRect().height}px`,\n          }}\n        ></div>\n      )}\n\n      {bottom}\n\n      {/* 吸底的滚动条 */}\n      {props.horizontalScrollAffixedBottom && (\n        <Affix\n          offsetBottom={0}\n          {...getAffixProps(props.horizontalScrollAffixedBottom)}\n          style={{ marginTop: `-${scrollbarWidth * 2}px` }}\n        >\n          <div\n            ref={horizontalScrollbarRef}\n            className={classNames(['scrollbar', tableBaseClass.obviousScrollbar])}\n            style={{\n              width: `${tableWidth.current}px`,\n              overflow: 'auto',\n              opacity: Number(showAffixFooter),\n            }}\n          >\n            <div style={{ width: `${tableElmWidth.current}px`, height: '5px' }}></div>\n          </div>\n        </Affix>\n      )}\n\n      {/* 吸底的分页器 */}\n      {props.paginationAffixedBottom ? (\n        <Affix offsetBottom={0} {...getAffixProps(props.paginationAffixedBottom)}>\n          {pagination}\n        </Affix>\n      ) : (\n        pagination\n      )}\n\n      {/* 调整列宽时的指示线。由于层级需要比较高，因而放在根节点，避免被吸顶表头覆盖。非必要情况，请勿调整辅助线位置 */}\n      <div ref={resizeLineRef} className={tableBaseClass.resizeLine} style={resizeLineStyle}></div>\n    </div>\n  );\n});\n\nBaseTable.displayName = 'BaseTable';\n\nexport default BaseTable;\n"],"names":["BASE_TABLE_EVENTS","BASE_TABLE_ALL_EVENTS","ROW_LISTENERS","map","t","concat","BaseTable","forwardRef","props","ref","tableLayout","height","data","columns","style","headerAffixedTop","bordered","resizable","tableRef","useRef","tableElmRef","useState","tableFootHeight","setTableFootHeight","useClassName","virtualScrollClasses","tableLayoutClasses","tableBaseClass","tableColFixedClasses","useStyle","tableClasses","tableContentStyles","tableElementStyles","useTableHeader","isMultipleHeader","spansAndLeafNodes","thList","finalColumns","useMemo","leafColumns","useFixed","scrollbarWidth","tableWidth","tableElmWidth","tableContentRef","isFixedHeader","isWidthOverflow","isFixedColumn","thWidthList","showColumnShadow","rowAndColFixedPosition","setData","refreshTable","emitScrollEvent","setUseFixedTableElmRef","updateColumnFixedShadow","getThWidthList","updateThWidthList","setRecalculateColWidthFuncRef","addTableResizeObserver","useAffix","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","onHorizontalScroll","setTableContentRef","updateAffixHeaderOrFooter","usePagination","dataSource","isPaginateData","renderPagination","columnResizeParams","useColumnResize","resizeLineRef","resizeLineStyle","recalculateColWidth","setEffectColMap","dynamicBaseTableClasses","classNames","headerFixed","columnFixed","widthOverflow","multipleHeader","leftShadow","left","rightShadow","right","columnResizableTable","tableElmClasses","fullHeight","isVirtual","scroll","type","length","threshold","showRightDivider","useEffect","current","lastLeafColumns","setLastLeafColumns","colKey","join","onLeafColumnsChange","useImperativeHandle","tableElement","tableHtmlElement","tableContentElement","affixHeaderElement","onFixedChange","timer","setTimeout","clearTimeout","lastScrollY","onInnerVirtualScroll","e","target","top","scrollTop","getTFootHeight","querySelector","getBoundingClientRect","newData","log","warn","defaultColWidth","colgroup","React","createElement","col","width","formatCSSUnit","minWidth","key","onlyVirtualScrollBordered","test","navigator","userAgent","borderWidth","affixHeaderWrapHeight","headerOpacity","Number","affixHeaderWrapHeightStyle","opacity","marginTop","affixedLeftBorder","affixedHeader","Boolean","className","affixedHeaderElm","THead","affixHeaderWithWrap","affixedHeaderWrap","marginScrollbarWidth","affixedFooter","footerAffixedBottom","footData","Affix","affixedFooterWrap","offsetBottom","getAffixProps","affixedFooterElm","TFoot","rowKey","rowAttributes","rowClassName","footerSummary","rowspanAndColspanInFooter","translate","virtualStyle","transform","tableBodyProps","tableElm","tableContentElm","cellEmptyContent","renderExpandedRow","pick","extendTableProps","tableContent","content","onScroll","cursor","TBody","loading","loadingProps","customLoadingText","loadingContent","Loading","text","attach","showOverlay","size","topContent","bottomContent","pagination","paginationWrap","bottom","position","offsetTop","headerAffixProps","scrollbarDivider","horizontalScrollAffixedBottom","obviousScrollbar","overflow","paginationAffixedBottom","resizeLine","displayName"],"mappings":"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"}