{"version":3,"file":"SorterButton.js","sources":["../../src/table/SorterButton.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { ChevronDownIcon as TdChevronDownIcon } from 'tdesign-icons-react';\nimport classNames from 'classnames';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport useClassName from './hooks/useClassName';\nimport { SortType } from './type';\nimport Tooltip, { TooltipProps } from '../tooltip';\nimport { TNode } from '../common';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\n\ntype SortTypeEnums = Array<'desc' | 'asc'>;\n\nexport interface SorterButtonProps {\n  sortType: SortType;\n  sortOrder: string;\n  sortIcon: TNode;\n  tooltipProps?: TooltipProps;\n  hideSortTips?: boolean;\n  onSortIconClick: (e: MouseEvent<HTMLSpanElement>, p: { descending: boolean }) => void;\n}\n\nexport default function SorterButton(props: SorterButtonProps) {\n  const { sortType = 'all' } = props;\n  const { ChevronDownIcon } = useGlobalIcon({\n    ChevronDownIcon: TdChevronDownIcon,\n  });\n  const { tableSortClasses, negativeRotate180 } = useClassName();\n  const [locale, t] = useLocaleReceiver('table');\n\n  const allowSortTypes: SortTypeEnums = sortType === 'all' ? ['asc', 'desc'] : [sortType];\n\n  const onSortIconClick = (e: MouseEvent<HTMLSpanElement>, direction: string) => {\n    props?.onSortIconClick(e, { descending: direction === 'desc' });\n  };\n\n  function getSortIcon(direction: string, activeClass: string) {\n    const defaultIcon = t(locale.sortIcon) || <ChevronDownIcon />;\n    const icon = props.sortIcon || defaultIcon;\n    const sortClassName = [\n      activeClass,\n      tableSortClasses.sortIcon,\n      tableSortClasses.iconDirection[direction],\n      { [negativeRotate180]: direction === 'asc' },\n    ];\n    return (\n      <span\n        key={direction}\n        className={classNames(sortClassName)}\n        onClick={(e: MouseEvent<HTMLSpanElement>) => onSortIconClick(e, direction)}\n      >\n        {icon}\n      </span>\n    );\n  }\n\n  const classes = [tableSortClasses.trigger, { [tableSortClasses.doubleIcon]: allowSortTypes.length > 1 }];\n  const tooltips = {\n    asc: locale.sortAscendingOperationText,\n    desc: locale.sortDescendingOperationText,\n  };\n  const sortButton = allowSortTypes.map((direction: string) => {\n    const activeClass = direction === props.sortOrder ? tableSortClasses.iconActive : tableSortClasses.iconDefault;\n    const cancelTips = locale.sortCancelOperationText;\n    const tips = direction === props.sortOrder ? cancelTips : tooltips[direction];\n    if (props.hideSortTips ?? locale.hideSortTips) return getSortIcon(direction, activeClass);\n    return (\n      <Tooltip content={tips} key={direction} placement=\"right\" {...props.tooltipProps} showArrow={false}>\n        {getSortIcon(direction, activeClass)}\n      </Tooltip>\n    );\n  });\n  return <div className={classNames(classes)}>{sortButton}</div>;\n}\n\nSorterButton.displayName = 'SorterButton';\n"],"names":["SorterButton","props","sortType","useGlobalIcon","ChevronDownIcon","TdChevronDownIcon","useClassName","tableSortClasses","negativeRotate180","useLocaleReceiver","locale","t","allowSortTypes","onSortIconClick","e","direction","descending","getSortIcon","activeClass","defaultIcon","sortIcon","icon","sortClassName","iconDirection","React","createElement","key","className","classNames","onClick","classes","trigger","doubleIcon","length","tooltips","asc","sortAscendingOperationText","desc","sortDescendingOperationText","sortButton","map","sortOrder","iconActive","iconDefault","cancelTips","sortCancelOperationText","tips","hideSortTips","Tooltip","content","placement","tooltipProps","showArrow","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,SAAwBA,YAAxB,CAAqCC,KAArC,EAA+D;EACvD,IAAuBA,eAAAA,GAAAA,KAAvB,CAAEC,QAAF;MAAEA,QAAF,gCAAa,KAAb,GAAA,eAAA,CAAA;;AACA,EAAA,IAAA,cAAA,GAAsBC,aAAc,CAAA;AACxCC,IAAAA,eAAiB,EAAAC,eAAAA;AADuB,GAAA,CAApC;MAAED,iBAAF,kBAAEA,eAAF,CAAA;;AAGN,EAAA,IAAA,aAAA,GAAgDE,YAAa,EAA7D;MAAQC,gBAAR,iBAAQA,gBAAR;MAA0BC,iBAA1B,iBAA0BA,iBAA1B,CAAA;;EACA,IAAoBC,kBAAAA,GAAAA,kBAAkB,QAAtC;AAAA,MAAA,mBAAA,GAAA,cAAA,CAAA,kBAAA,EAAA,CAAA,CAAA;AAAA,MAAOC,MAAP,GAAA,mBAAA,CAAA,CAAA,CAAA;AAAA,MAAeC,CAAf,GAAA,mBAAA,CAAA,CAAA,CAAA,CAAA;;AAEM,EAAA,IAAAC,cAAA,GAAgCV,aAAa,KAAb,GAAqB,CAAC,KAAD,EAAQ,MAAR,CAArB,GAAuC,CAACA,QAAD,CAAvE,CAAA;;EAEA,IAAAW,eAAA,GAAkB,SAAlBA,eAAkB,CAACC,CAAD,EAAiCC,SAAjC,EAAuD;IAC7Ed,KAAA,KAAA,IAAA,IAAAA,KAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,KAAA,CAAOY,eAAP,CAAuBC,CAAvB,EAA0B;MAAEE,UAAY,EAAAD,SAAA,KAAc,MAAA;KAAtD,CAAA,CAAA;GADI,CAAA;;AAIG,EAAA,SAAAE,WAAA,CAAYF,SAAZ,EAA+BG,WAA/B,EAAoD;AAC3D,IAAA,IAAMC,cAAcR,CAAE,CAAAD,MAAA,CAAOU,QAAP,CAAF,uCAAuBhB,mBAAgB,KAA3D,CAAA;AACM,IAAA,IAAAiB,IAAA,GAAOpB,MAAMmB,QAAN,IAAkBD,WAAzB,CAAA;IACN,IAAMG,aAAgB,GAAA,CACpBJ,WADoB,EAEpBX,gBAAiB,CAAAa,QAFG,EAGpBb,iBAAiBgB,aAAjB,CAA+BR,SAA/B,CAHoB,EAAA,eAAA,CAAA,EAAA,EAIjBP,iBAJiB,EAIGO,SAAA,KAAc,KAJjB,CAAtB,CAAA,CAAA;AAMA,IAAA,sBACGS,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AACCC,MAAAA,GAAK,EAAAX,SADN;AAECY,MAAAA,SAAA,EAAWC,WAAWN,cAFvB;MAGCO,OAAS,EAAA,iBAACf,CAAD,EAAA;AAAA,QAAA,OAAoCD,eAAA,CAAgBC,CAAhB,EAAmBC,SAAnB,CAApC,CAAA;AAAA,OAAA;KAHV,EAKEM,IALF,CADH,CAAA;AASF,GAAA;;AAEM,EAAA,IAAAS,OAAA,GAAU,CAACvB,gBAAA,CAAiBwB,OAAlB,EAA8BxB,eAAAA,CAAAA,EAAAA,EAAAA,gBAAA,CAAiByB,UAA/C,EAA4DpB,cAAA,CAAeqB,MAAf,GAAwB,CAApF,CAAV,CAAA,CAAA;AACN,EAAA,IAAMC,QAAW,GAAA;IACfC,KAAKzB,MAAO,CAAA0B,0BADG;IAEfC,MAAM3B,MAAO,CAAA4B,2BAAAA;GAFf,CAAA;EAIA,IAAMC,UAAa,GAAA3B,cAAA,CAAe4B,GAAf,CAAmB,UAACzB,SAAD,EAAuB;AAAA,IAAA,IAAA,mBAAA,CAAA;;AAC3D,IAAA,IAAMG,cAAcH,SAAc,KAAAd,KAAA,CAAMwC,SAApB,GAAgClC,gBAAA,CAAiBmC,UAAjD,GAA8DnC,gBAAiB,CAAAoC,WAAnG,CAAA;AACA,IAAA,IAAMC,aAAalC,MAAO,CAAAmC,uBAA1B,CAAA;AACA,IAAA,IAAMC,IAAO,GAAA/B,SAAA,KAAcd,KAAM,CAAAwC,SAApB,GAAgCG,UAAhC,GAA6CV,QAAS,CAAAnB,SAAA,CAAnE,CAAA;AACI,IAAA,IAAA,CAAA,mBAAA,GAAAd,KAAA,CAAM8C,YAAN,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,mBAAA,GAAsBrC,MAAO,CAAAqC,YAA7B,EAAkD,OAAA9B,WAAA,CAAYF,SAAZ,EAAuBG,WAAvB,CAAA,CAAA;AACtD,IAAA,sBACGM,KAAA,CAAAC,aAAA,CAAAuB,OAAA,EAAA,aAAA,CAAA,aAAA,CAAA;AAAQC,MAAAA,OAAS,EAAAH,IAAjB;AAAuBpB,MAAAA,GAAK,EAAAX,SAA5B;AAAuCmC,MAAAA,SAAU,EAAA,OAAA;KAAYjD,EAAAA,KAAM,CAAAkD,YAAnE,CAAA,EAAA,EAAA,EAAA;AAAiFC,MAAAA,SAAW,EAAA,KAAA;AAA5F,KAAA,CAAA,EACEnC,WAAA,CAAYF,SAAZ,EAAuBG,WAAvB,CADF,CADH,CAAA;AAKD,GAVkB,CAAnB,CAAA;AAWA,EAAA,sBAAQM,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAIE,SAAA,EAAWC,WAAWE;GAA1B,EAAqCS,UAArC,CAAR,CAAA;AACF,CAAA;AAEAvC,YAAA,CAAaqD,WAAb,GAA2B,cAA3B;;;;"}