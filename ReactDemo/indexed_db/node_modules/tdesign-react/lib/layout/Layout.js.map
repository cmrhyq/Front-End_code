{"version":3,"file":"Layout.js","sources":["../../src/layout/Layout.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdLayoutProps, TdHeaderProps, TdFooterProps } from './type';\nimport Aside from './Aside';\n\nexport interface LayoutProps extends TdLayoutProps, StyledProps, React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n}\nexport interface HeaderProps extends TdHeaderProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface ContentProps extends StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\nexport interface FooterProps extends TdFooterProps, StyledProps, React.HTMLAttributes<HTMLElement> {\n  children?: React.ReactNode;\n}\n\nconst Header = (props: HeaderProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n\n  const headerClassNames = classNames(`${classPrefix}-layout__header`, className);\n  return (\n    <header\n      className={headerClassNames}\n      style={{\n        height: renderHeight,\n        ...style,\n      }}\n      {...others}\n    >\n      {children}\n    </header>\n  );\n};\n\nconst Footer = (props: FooterProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style = {}, children, height, ...others } = props;\n  const renderHeight = isNaN(Number(height)) ? height : `${height}px`;\n  const footerClassNames = classNames(`${classPrefix}-layout__footer`, className);\n  return (\n    <footer\n      className={footerClassNames}\n      style={{\n        height: renderHeight,\n        ...style,\n      }}\n      {...others}\n    >\n      {children}\n    </footer>\n  );\n};\n\nconst Content = (props: ContentProps) => {\n  const { classPrefix } = useConfig();\n  const { className, style, children, ...others } = props;\n  const contentClassNames = classNames(`${classPrefix}-layout__content`, className);\n  return (\n    <main className={contentClassNames} style={style} {...others}>\n      {children}\n    </main>\n  );\n};\n\n/**\n * 布局组件\n */\nconst Layout = (props: LayoutProps) => {\n  const { direction, className, style, children, ...otherLayoutProps } = props;\n  const [asides, setAsides] = useState([]);\n\n  useEffect(() => {\n    React.Children.forEach(children, (child: React.ReactChild) => {\n      if (!child || typeof child !== 'object') return;\n\n      if (child.type === Aside) setAsides([child]);\n    });\n  }, [children]);\n\n  const { classPrefix } = useConfig();\n  const layoutClassNames = classNames(\n    `${classPrefix}-layout`,\n    {\n      [`${classPrefix}-layout--with-sider`]: !!asides.length,\n      [`${classPrefix}-layout__direction-${direction}`]: direction,\n    },\n    className,\n  );\n\n  return (\n    <div className={layoutClassNames} style={style} {...otherLayoutProps}>\n      {children}\n    </div>\n  );\n};\n\nLayout.Header = Header;\nLayout.Content = Content;\nLayout.Footer = Footer;\nLayout.Aside = Aside;\n\nHeader.displayName = 'Header';\nContent.displayName = 'Content';\nFooter.displayName = 'Footer';\nLayout.displayName = 'Layout';\n\nexport default Layout;\n"],"names":["Header","props","useConfig","classPrefix","className","style","children","height","others","renderHeight","isNaN","Number","headerClassNames","classNames","React","createElement","Footer","footerClassNames","Content","contentClassNames","Layout","direction","otherLayoutProps","useState","asides","setAsides","useEffect","Children","forEach","child","type","Aside","layoutClassNames","length","displayName"],"mappings":"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"}