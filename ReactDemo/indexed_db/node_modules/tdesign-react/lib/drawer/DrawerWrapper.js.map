{"version":3,"file":"DrawerWrapper.js","sources":["../../src/drawer/DrawerWrapper.tsx"],"sourcesContent":["import React, { useRef, forwardRef, useImperativeHandle, cloneElement } from 'react';\nimport Portal, { PortalProps, getAttach } from '../common/Portal';\nimport { DrawerProps } from './Drawer';\n\nexport interface DrawerWrapperProps extends PortalProps {\n  attach?: DrawerProps['attach'];\n  children: React.ReactElement;\n}\n\nconst DrawerWrapper = forwardRef((props: DrawerWrapperProps, ref) => {\n  const { children, attach } = props;\n  const portalRef = useRef<HTMLDivElement>(null);\n  let portal = null;\n\n  useImperativeHandle(ref, () => {\n    if (attach === '') {\n      return portalRef.current.parentElement;\n    }\n\n    return getAttach(attach);\n  });\n\n  // 如果 attach === '',渲染在当前组件节点中。\n  if (attach === '') {\n    portal = <div ref={portalRef}>{cloneElement(children)}</div>;\n  } else {\n    portal = (\n      <Portal attach={attach} ref={portalRef}>\n        {children}\n      </Portal>\n    );\n  }\n\n  return portal;\n});\n\nDrawerWrapper.displayName = 'DrawerWrapper';\n\nexport default DrawerWrapper;\n"],"names":["DrawerWrapper","forwardRef","props","ref","children","attach","portalRef","useRef","portal","useImperativeHandle","current","parentElement","getAttach","React","createElement","cloneElement","Portal","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASMA,IAAAA,aAAgB,gBAAAC,UAAA,CAAW,UAACC,KAAD,EAA4BC,GAA5B,EAAoC;AAC7D,EAAA,IAAEC,QAAF,GAAuBF,KAAvB,CAAEE,QAAF;AAAA,MAAYC,MAAZ,GAAuBH,KAAvB,CAAYG,MAAZ,CAAA;AACA,EAAA,IAAAC,SAAA,GAAYC,OAAuB,KAAnC,CAAA;EACN,IAAIC,MAAS,GAAA,IAAb,CAAA;EAEAC,mBAAA,CAAoBN,GAApB,EAAyB,YAAM;IAC7B,IAAIE,WAAW,EAAf,EAAmB;AACjB,MAAA,OAAOC,UAAUI,OAAV,CAAkBC,aAAzB,CAAA;AACF,KAAA;;IAEA,OAAOC,UAAUP,OAAjB,CAAA;AACD,GAND,CAAA,CAAA;;EASA,IAAIA,WAAW,EAAf,EAAmB;AACjBG,IAAAA,MAAA,kBAAUK,KAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIX,MAAAA,GAAK,EAAAG,SAAAA;AAAT,KAAA,eAAqBS,YAAA,CAAaX,QAAb,CAArB,CAAV,CAAA;AACK,GAFP,MAEO;AACLI,IAAAA,MAAA,kBACGK,KAAA,CAAAC,aAAA,CAAAE,MAAA,EAAA;AAAOX,MAAAA,MAAA,EAAAA,MAAP;AAAuBF,MAAAA,GAAK,EAAAG,SAAAA;KAA5B,EACEF,QADF,CADH,CAAA;AAKF,GAAA;;AAEO,EAAA,OAAAI,MAAA,CAAA;AACR,CAzBqB,EAAtB;AA2BAR,aAAA,CAAciB,WAAd,GAA4B,eAA5B;;;;"}