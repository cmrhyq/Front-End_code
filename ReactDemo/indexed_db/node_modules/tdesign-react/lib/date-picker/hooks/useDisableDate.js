/**
 * tdesign v0.41.1
 * (c) 2022 tdesign
 * @license MIT
 */

import dayjs from 'dayjs';
import { i as isObject_1 } from '../../_chunks/dep-0e2dfd87.js';
import '../../_chunks/dep-4e0da095.js';

function useDisableDate(props) {
  var _disableDate = props.disableDate,
      format = props.format,
      mode = props.mode,
      start = props.start,
      end = props.end;
  return {
    disableDate: function disableDate(value) {
      return !isEnabled({
        disableDate: _disableDate,
        format: format,
        mode: mode,
        value: value
      });
    },
    minDate: isObject_1(_disableDate) && "before" in _disableDate ? new Date(_disableDate.before) : start,
    maxDate: isObject_1(_disableDate) && "after" in _disableDate ? new Date(_disableDate.after) : end
  };
}

function isEnabled(props) {
  var disableDate = props.disableDate,
      value = props.value,
      format = props.format,
      mode = props.mode;
  if (!disableDate) return true;
  var isEnabled2 = true;

  if (typeof disableDate === "function") {
    return !disableDate(value);
  }

  if (Array.isArray(disableDate)) {
    var isIncludes = false;
    var formatedDisabledDate = disableDate.map(function (item) {
      return dayjs(item, format);
    });
    formatedDisabledDate.forEach(function (item) {
      if (item.isSame(dayjs(value))) {
        isIncludes = true;
      }
    });
    return !isIncludes;
  }

  var from = disableDate.from,
      to = disableDate.to,
      before = disableDate.before,
      after = disableDate.after;

  if (from && to) {
    var compareMin = dayjs(new Date(from));
    var compareMax = dayjs(new Date(to));
    return !dayjs(value).isBetween(compareMin, compareMax, mode, "[]");
  }

  var min = before ? new Date(before) : null;
  var max = after ? new Date(after) : null;

  if (max && min) {
    var _compareMin = dayjs(new Date(min));

    var _compareMax = dayjs(new Date(max));

    isEnabled2 = dayjs(value).isBetween(_compareMin, _compareMax, mode, "[]");
  } else if (min) {
    var _compareMin2 = dayjs(new Date(min));

    isEnabled2 = !dayjs(value).isBefore(_compareMin2, mode);
  } else if (max) {
    var _compareMax2 = dayjs(new Date(max));

    isEnabled2 = !dayjs(value).isAfter(_compareMax2, mode);
  }

  return isEnabled2;
}

export { useDisableDate as default };
//# sourceMappingURL=useDisableDate.js.map
