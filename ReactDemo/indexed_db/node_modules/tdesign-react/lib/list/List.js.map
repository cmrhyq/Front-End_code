{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport isString from 'lodash/isString';\nimport useConfig from '../hooks/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\nimport { listDefaultProps } from './defaultProps';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size,\n      split,\n      stripe,\n      layout,\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style,\n    } = props;\n\n    const { classPrefix } = useConfig();\n    const [local, t] = useLocaleReceiver('list');\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    const loadElement = isString(asyncLoading) ? (\n      <div\n        className={classNames(`${classPrefix}-list__load`, {\n          [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n          [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n        })}\n        onClick={handleClickLoad}\n      >\n        {asyncLoading === 'loading' && (\n          <div>\n            <Loading loading={true} />\n            <span>{t(local.loadingText)}</span>\n          </div>\n        )}\n        {asyncLoading === 'load-more' && <span>{t(local.loadingMoreText)}</span>}\n      </div>\n    ) : (\n      asyncLoading\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(`${classPrefix}-list`, className, {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header && <div className={`${classPrefix}-list__header`}>{header}</div>}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {asyncLoading && loadElement}\n        {footer && <div className={`${classPrefix}-list__footer`}>{footer}</div>}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\nList.defaultProps = listDefaultProps;\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","header","footer","asyncLoading","size","split","stripe","layout","children","className","onLoadMore","noop","onScroll","style","useConfig","classPrefix","useLocaleReceiver","local","t","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","isString","React","createElement","classNames","onClick","Loading","loading","loadingText","loadingMoreText","ListItem","ListItemMeta","displayName","defaultProps","listDefaultProps"],"mappings":"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"}