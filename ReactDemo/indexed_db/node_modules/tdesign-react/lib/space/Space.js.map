{"version":3,"file":"Space.js","sources":["../../src/space/Space.tsx"],"sourcesContent":["import React, { forwardRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { isFragment } from 'react-is';\nimport useConfig from '../hooks/useConfig';\nimport { TdSpaceProps } from './type';\nimport { StyledProps } from '../common';\nimport { spaceDefaultProps } from './defaultProps';\n\n// export for test\nexport const SizeMap = { small: '8px', medium: '16px', large: '24px' };\n\nexport interface SpaceProps extends TdSpaceProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst toArray = (children: React.ReactNode): React.ReactElement[] => {\n  let ret: React.ReactElement[] = [];\n\n  React.Children.forEach(children, (child: any) => {\n    if (child === undefined || child === null) {\n      return;\n    }\n\n    if (Array.isArray(child)) {\n      ret = ret.concat(toArray(child));\n    } else if (isFragment(child) && child.props) {\n      ret = ret.concat(toArray(child.props.children));\n    } else {\n      ret.push(child);\n    }\n  });\n\n  return ret;\n};\n\nconst Space = forwardRef((props: SpaceProps, ref: React.Ref<HTMLDivElement>) => {\n  const { className, style, align, direction, size, breakLine, separator } = props;\n  const { classPrefix } = useConfig();\n\n  const renderStyle = useMemo(() => {\n    let renderGap = '';\n    if (Array.isArray(size)) {\n      renderGap = size\n        .map((s) => {\n          if (typeof s === 'number') return `${s}px`;\n          if (typeof s === 'string') return SizeMap[s] || s;\n          return s;\n        })\n        .join(' ');\n    } else if (typeof size === 'string') {\n      renderGap = SizeMap[size] || size;\n    } else if (typeof size === 'number') {\n      renderGap = `${size}px`;\n    }\n\n    return {\n      gap: renderGap,\n      ...(breakLine ? { flexWrap: 'wrap' } : {}),\n      ...style,\n    };\n  }, [style, size, breakLine]) as React.CSSProperties;\n\n  function renderChildren() {\n    const children = toArray(props.children);\n    const childCount = React.Children.count(children);\n    return React.Children.map(children, (child, index) => {\n      // filter last child\n      const showSeparator = index + 1 !== childCount && separator;\n      return (\n        <>\n          <div className={`${classPrefix}-space-item`}>{child}</div>\n          {showSeparator && <div className={`${classPrefix}-space-item-separator`}>{separator}</div>}\n        </>\n      );\n    });\n  }\n\n  return (\n    <div\n      ref={ref}\n      style={renderStyle}\n      className={classNames(`${classPrefix}-space`, className, {\n        [`${classPrefix}-space-align-${align}`]: align,\n        [`${classPrefix}-space-${direction}`]: direction,\n      })}\n    >\n      {renderChildren()}\n    </div>\n  );\n});\n\nSpace.displayName = 'Space';\nSpace.defaultProps = spaceDefaultProps;\n\nexport default Space;\n"],"names":["SizeMap","small","medium","large","toArray","children","ret","React","Children","forEach","child","Array","isArray","concat","isFragment","props","push","Space","forwardRef","ref","className","style","align","direction","size","breakLine","separator","useConfig","classPrefix","renderStyle","useMemo","renderGap","map","s","join","gap","flexWrap","renderChildren","childCount","count","index","showSeparator","createElement","classNames","displayName","defaultProps","spaceDefaultProps"],"mappings":"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"}