{"version":3,"file":"ColorPicker.js","sources":["../../src/color-picker/ColorPicker.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Popup, PopupProps } from '../popup';\nimport { ColorPickerProps, TdColorContext } from './interface';\nimport useClassName from './hooks/useClassNames';\nimport useControlled from '../hooks/useControlled';\nimport ColorTrigger from './components/trigger';\nimport ColorPanel from './components/panel/index';\nimport useClickOutside from '../_util/useClickOutside';\nimport { colorPickerDefaultProps } from './defaultProps';\n\nconst ColorPicker: React.FC<ColorPickerProps> = (props) => {\n  const baseClassName = useClassName();\n  const { popupProps, disabled, inputProps, onChange, colorModes, ...rest } = props;\n  const { overlayClassName, overlayInnerStyle = {}, ...restPopupProps } = popupProps || {};\n\n  const [visible, setVisible] = useState(false);\n  const [innerValue, setInnerValue] = useControlled(props, 'value', onChange);\n  const triggerRef = useRef<HTMLDivElement>();\n  const colorPanelRef = useRef();\n\n  const popProps: PopupProps = {\n    placement: 'bottom-left',\n    expandAnimation: true,\n    trigger: 'click',\n    visible,\n    ...restPopupProps,\n    overlayClassName: [baseClassName, overlayClassName],\n    overlayInnerStyle: {\n      padding: 0,\n      ...overlayInnerStyle,\n    },\n  };\n\n  useClickOutside(\n    [triggerRef, colorPanelRef],\n    () => {\n      setVisible(false);\n    },\n    true,\n  );\n\n  return (\n    <Popup\n      {...popProps}\n      onVisibleChange={(v) => setVisible(v)}\n      content={\n        !disabled && (\n          <ColorPanel\n            {...rest}\n            disabled={disabled}\n            value={innerValue}\n            colorModes={colorModes}\n            togglePopup={setVisible}\n            onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n            ref={colorPanelRef}\n          />\n        )\n      }\n    >\n      <div className={`${baseClassName}__trigger`} ref={triggerRef}>\n        <ColorTrigger disabled={disabled} inputProps={inputProps} value={innerValue} onChange={setInnerValue} />\n      </div>\n    </Popup>\n  );\n};\n\nColorPicker.displayName = 'ColorPicker';\nColorPicker.defaultProps = colorPickerDefaultProps;\n\nexport default React.memo(ColorPicker);\n"],"names":["ColorPicker","props","baseClassName","useClassName","popupProps","disabled","inputProps","onChange","colorModes","rest","overlayClassName","overlayInnerStyle","restPopupProps","useState","visible","setVisible","useControlled","innerValue","setInnerValue","triggerRef","useRef","colorPanelRef","popProps","placement","expandAnimation","trigger","padding","useClickOutside","React","createElement","Popup","onVisibleChange","v","content","ColorPanel","value","togglePopup","context","ref","className","ColorTrigger","displayName","defaultProps","colorPickerDefaultProps","memo"],"mappings":"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"}