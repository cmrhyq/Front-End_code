{"version":3,"file":"swatches.js","sources":["../../../../src/color-picker/components/panel/swatches.tsx"],"sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { DeleteIcon as TdDeleteIcon, AddIcon as TdAddIcon } from 'tdesign-icons-react';\nimport useGlobalIcon from '../../../hooks/useGlobalIcon';\nimport Color from '../../../_common/js/color-picker/color';\nimport { TdColorBaseProps } from '../../interface';\nimport useCommonClassName from '../../../_util/useCommonClassName';\n\nexport interface TdColorSwathcesProps extends TdColorBaseProps {\n  colors?: string[];\n  title?: String;\n  editable?: Boolean;\n  onSetColor?: Function;\n  handleAddColor?: Function;\n}\n\nconst Swatches = (props: TdColorSwathcesProps) => {\n  const {\n    baseClassName,\n    colors = [],\n    title = '系统色彩',\n    editable = false,\n    onChange,\n    disabled,\n    onSetColor,\n    handleAddColor,\n  } = props;\n  const { DeleteIcon, AddIcon } = useGlobalIcon({ DeleteIcon: TdDeleteIcon, AddIcon: TdAddIcon });\n  const swatchesClass = `${baseClassName}__swatches`;\n  const { STATUS: statusClassNames } = useCommonClassName();\n  const isEqualCurrentColor = (color: string) => Color.compare(color, props.color.css);\n\n  // 移除颜色\n  const selectedColorIndex = () => colors.findIndex((color) => isEqualCurrentColor(color));\n  const handleRemoveColor = () => {\n    const selectedIndex = selectedColorIndex();\n    if (selectedIndex > -1) {\n      const newColors = colors.filter((item, index) => index !== selectedIndex);\n      onChange(newColors);\n    }\n  };\n\n  const handleClick = (color: string) => onSetColor(color);\n\n  return (\n    <div className={swatchesClass}>\n      <h3 className={`${swatchesClass}--title`}>\n        <span>{title}</span>\n        {editable && (\n          <div className={`${swatchesClass}--actions`}>\n            <span role=\"button\" className={`${baseClassName}__icon`} onClick={() => handleAddColor()}>\n              <AddIcon />\n            </span>\n            {colors.length > 0 ? (\n              <span role=\"button\" className={`${baseClassName}__icon`} onClick={() => handleRemoveColor()}>\n                <DeleteIcon />\n              </span>\n            ) : null}\n          </div>\n        )}\n      </h3>\n      <ul className={classnames(`${swatchesClass}--items`, 'narrow-scrollbar')}>\n        {colors.map((color) => (\n          <li\n            className={classnames(\n              `${swatchesClass}--item`,\n              isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n            )}\n            key={color}\n            onClick={() => {\n              if (disabled) {\n                return;\n              }\n              handleClick(color);\n            }}\n          >\n            <div className={classnames(`${swatchesClass}--item__color`, `${baseClassName}--bg-alpha`)}>\n              <span\n                className={`${swatchesClass}--item__inner`}\n                style={{\n                  background: color,\n                }}\n              ></span>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default React.memo(Swatches);\n"],"names":["Swatches","props","baseClassName","colors","title","editable","onChange","disabled","onSetColor","handleAddColor","useGlobalIcon","DeleteIcon","TdDeleteIcon","AddIcon","TdAddIcon","swatchesClass","useCommonClassName","statusClassNames","STATUS","isEqualCurrentColor","color","Color","compare","css","selectedColorIndex","findIndex","handleRemoveColor","selectedIndex","newColors","filter","item","index","handleClick","React","createElement","className","role","onClick","length","classnames","map","active","key","style","background","memo"],"mappings":"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"}