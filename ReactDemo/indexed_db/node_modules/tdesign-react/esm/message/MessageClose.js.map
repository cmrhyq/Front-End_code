{"version":3,"file":"MessageClose.js","sources":["../../src/message/MessageClose.tsx"],"sourcesContent":["/**\n * @desc message 关闭按钮组件\n */\nimport React from 'react';\n\nimport classNames from 'classnames';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-react';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { TdMessageProps } from './type';\nimport { useMessageClass } from './useMessageClass';\n\nexport default function MessageClose({ closeBtn, onCloseBtnClick }: TdMessageProps) {\n  const { tdMessageClassGenerator } = useMessageClass();\n  const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n\n  let relCloseBtn = closeBtn;\n  // 函数类型先执行并解出具体的内容，然后进行判断\n  if (typeof closeBtn === 'function') {\n    relCloseBtn = closeBtn();\n  }\n\n  // falseLike 类型表明不展示 close\n  if (!relCloseBtn) {\n    return null;\n  }\n\n  // 数字 字符串类型封装 span 标签\n  if (typeof relCloseBtn === 'string' || typeof relCloseBtn === 'number') {\n    return (\n      <span className={tdMessageClassGenerator('close')} onClick={(e) => onCloseBtnClick?.({ e })}>\n        {closeBtn}\n      </span>\n    );\n  }\n\n  // 组件或者 dom 节点 加上 close 样式\n  if (React.isValidElement(relCloseBtn)) {\n    const { onClick } = relCloseBtn.props;\n    return React.cloneElement(relCloseBtn, {\n      className: classNames(relCloseBtn.props.className, tdMessageClassGenerator('close')),\n      onClick: (e) => {\n        onClick?.(e);\n        onCloseBtnClick?.({ e });\n      },\n    });\n  }\n\n  // 否则使用默认的关闭按钮样式\n  return <CloseIcon className={tdMessageClassGenerator('close')} onClick={(e) => onCloseBtnClick?.({ e })} />;\n}\n"],"names":["MessageClose","closeBtn","onCloseBtnClick","useMessageClass","tdMessageClassGenerator","useGlobalIcon","CloseIcon","TdCloseIcon","relCloseBtn","React","createElement","className","onClick","e","isValidElement","props","cloneElement","classNames"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,SAAwBA,YAAxB,CAAoF,IAAA,EAAA;EAAA,IAA7CC,QAA6C,QAA7CA,QAA6C;MAAnCC,eAAmC,QAAnCA,eAAmC,CAAA;;AAC5E,EAAA,IAAA,gBAAA,GAA8BC,eAAgB,EAA9C;MAAEC,uBAAF,oBAAEA,uBAAF,CAAA;;AACN,EAAA,IAAA,cAAA,GAAsBC,cAAc;AAAEC,IAAAA,SAAA,EAAWC,SAAAA;AAAb,IAApC;MAAQD,WAAR,kBAAQA,SAAR,CAAA;;EAEA,IAAIE,WAAc,GAAAP,QAAlB,CAAA;;AAEI,EAAA,IAAA,OAAOA,QAAP,KAAoB,UAApB,EAAgC;IAClCO,WAAA,GAAcP,QAAS,EAAvB,CAAA;AACF,GAAA;;EAGA,IAAI,CAACO,WAAL,EAAkB;AACT,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;;EAGA,IAAI,OAAOA,WAAP,KAAuB,QAAvB,IAAmC,OAAOA,WAAP,KAAuB,QAA9D,EAAwE;AACtE,IAAA,sBACGC,KAAA,CAAAC,aAAA,CAAA,MAAA,EAAA;AAAKC,MAAAA,SAAA,EAAWP,wBAAwB,QAAxC;MAAkDQ,SAAS,iBAACC,CAAD,EAAA;AAAA,QAAA,OAAOX,eAAP,KAAA,IAAA,IAAOA,eAAP,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,eAAkB,CAAA;AAAEW,UAAAA,GAAAA,CAAAA;AAAF,SAAA,CAAzB,CAAA;AAAA,OAAA;KAA3D,EACEZ,QADF,CADH,CAAA;AAKF,GAAA;;AAGI,EAAA,kBAAAQ,KAAA,CAAMK,cAAN,CAAqBN,WAArB,CAAA,EAAmC;AAC/B,IAAA,IAAEI,QAAF,GAAcJ,WAAY,CAAAO,KAA1B,CAAEH,OAAF,CAAA;AACC,IAAA,oBAAAH,KAAA,CAAMO,YAAN,CAAmBR,WAAnB,EAAgC;AACrCG,MAAAA,WAAWM,UAAW,CAAAT,WAAA,CAAYO,KAAZ,CAAkBJ,SAAlB,EAA6BP,uBAAA,CAAwB,OAAxB,CAA7B,CADe;MAErCQ,OAAA,EAAS,SAACC,OAAAA,CAAAA,CAAD,EAAO;QACdD,QAAA,KAAA,IAAA,IAAAA,QAAA,KAAA,KAAA,CAAA,YAAAA,QAAA,CAAUC,CAAV,CAAA,CAAA;AACkBX,QAAAA,eAAA,SAAA,IAAAA,eAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAAA,eAAA,CAAA;AAAEW,UAAAA,GAAAA,CAAAA;AAAF,SAAA,CAAA,CAAA;AACpB,OAAA;AALqC,KAAhC,CAAA,CAAA;AAOT,GAAA;;AAGA,EAAA,sBAAQJ,KAAA,CAAAC,aAAA,CAAAJ,WAAA,EAAA;AAAUK,IAAAA,SAAA,EAAWP,wBAAwB,QAA7C;IAAuDQ,SAAS,iBAACC,CAAD,EAAA;AAAA,MAAA,OAAOX,eAAP,KAAA,IAAA,IAAOA,eAAP,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,eAAkB,CAAA;AAAEW,QAAAA,GAAAA,CAAAA;AAAF,OAAA,CAAzB,CAAA;AAAA,KAAA;AAAhE,GAAA,CAAR,CAAA;AACF;;;;"}