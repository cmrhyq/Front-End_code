{"version":3,"file":"TimelineItem.js","sources":["../../src/timeline/TimelineItem.tsx"],"sourcesContent":["import React, { useContext, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { TdTimelineItemProps } from './type';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport TimelineContext from './TimelineContext';\nimport renderTNode from '../_util/renderTNode';\nimport { useAlign } from './useAlign';\nimport Loading from '../loading';\n\nexport interface TimelineItemProps extends TdTimelineItemProps, StyledProps {\n  children?: React.ReactNode;\n  index?: number;\n}\n\nconst DefaultTheme = ['default', 'primary', 'success', 'warning', 'error'];\n\nconst TimelineItem: React.FC<TimelineItemProps> = (props) => {\n  const {\n    className,\n    style = {},\n    dot,\n    dotColor = 'primary',\n    labelAlign,\n    children,\n    index,\n    content,\n    label,\n    loading = false,\n  } = props;\n  const { theme, reverse, itemsStatus, layout, globalAlign, mode } = useContext(TimelineContext);\n  const { classPrefix } = useConfig();\n  const renderAlign = useAlign(globalAlign, layout);\n\n  // 计算节点模式 CSS 类名\n  const getPositionClassName = (index: number) => {\n    // 横向布局 以及 纵向布局对应为不同的样式名\n    const left = layout === 'horizontal' ? 'top' : 'left';\n    const right = layout === 'horizontal' ? 'bottom' : 'right';\n    // 单独设置则单独生效\n    if (renderAlign === 'alternate') {\n      return labelAlign || index % 2 === 0\n        ? `${classPrefix}-timeline-item-${left}`\n        : `${classPrefix}-timeline-item-${right}`;\n    }\n    if (renderAlign === 'left' || renderAlign === 'top') {\n      return `${classPrefix}-timeline-item-${left}`;\n    }\n    if (renderAlign === 'right' || renderAlign === 'bottom') {\n      return `${classPrefix}-timeline-item-${right}`;\n    }\n    return '';\n  };\n\n  const dotElement = useMemo(() => {\n    const ele = renderTNode(dot);\n    return (\n      ele &&\n      React.cloneElement(ele, {\n        className: classNames(ele?.props?.className, `${classPrefix}-timeline-item__dot-content`),\n      })\n    );\n  }, [dot, classPrefix]);\n\n  // 节点类名\n  const itemClassName = classNames(\n    {\n      [`${classPrefix}-timeline-item`]: true,\n      [`${getPositionClassName(index)}`]: true,\n    },\n    className,\n  );\n\n  // 连线类名\n  const tailClassName = classNames({\n    [`${classPrefix}-timeline-item__tail`]: true,\n    [`${classPrefix}-timeline-item__tail--theme-${theme}`]: true,\n    [`${classPrefix}-timeline-item__tail--status-${itemsStatus[index]}`]: reverse,\n  });\n\n  // 圆圈类名\n  const dotClassName = classNames({\n    [`${classPrefix}-timeline-item__dot`]: true,\n    [`${classPrefix}-timeline-item__dot--custom`]: !!dotElement || (!dotElement && loading),\n    [`${classPrefix}-timeline-item__dot--${dotColor}`]: DefaultTheme.includes(dotColor),\n  });\n\n  const labelClassName = classNames(`${classPrefix}-timeline-item__label`, {\n    [`${classPrefix}-timeline-item__label--${mode}`]: true,\n  });\n\n  return (\n    <li className={itemClassName} style={style}>\n      {mode === 'alternate' && label && <div className={labelClassName}>{label}</div>}\n      <div className={`${classPrefix}-timeline-item__wrapper`}>\n        <div className={dotClassName} style={{ borderColor: !DefaultTheme.includes(dotColor) && dotColor }}>\n          {!dotElement && loading && <Loading size=\"12px\" className={`${classPrefix}-timeline-item__dot-content`} />}\n          {dotElement}\n        </div>\n        <div className={tailClassName} />\n      </div>\n      <div className={`${classPrefix}-timeline-item__content`}>\n        {content || children}\n        {mode === 'same' && label && <div className={labelClassName}>{label}</div>}\n      </div>\n    </li>\n  );\n};\n\nTimelineItem.displayName = 'TimelineItem';\n\nexport default TimelineItem;\n"],"names":["DefaultTheme","TimelineItem","props","className","style","dot","dotColor","labelAlign","children","index","content","label","loading","useContext","TimelineContext","theme","reverse","itemsStatus","layout","globalAlign","mode","useConfig","classPrefix","renderAlign","useAlign","getPositionClassName","left","right","dotElement","useMemo","ele","renderTNode","React","cloneElement","classNames","itemClassName","tailClassName","dotClassName","includes","labelClassName","createElement","borderColor","Loading","size","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA,IAAMA,eAAe,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,OAA7C,CAArB,CAAA;;AAEA,IAAMC,YAAA,GAA4C,SAA5CA,YAA4C,CAACC,KAAD,EAAW;AAAA,EAAA,IAAA,WAAA,EAAA,YAAA,EAAA,YAAA,CAAA;;AACrD,EAAA,IACJC,SADI,GAWFD,KAXE,CACJC,SADI;MAWFD,YAAAA,GAAAA,KAXE,CAEJE,KAFI;MAEJA,KAFI,6BAEI,EAFJ,GAAA,YAAA;AAAA,MAGJC,GAHI,GAWFH,KAXE,CAGJG,GAHI;MAWFH,eAAAA,GAAAA,KAXE,CAIJI,QAJI;MAIJA,QAJI,gCAIO,SAJP,GAAA,eAAA;AAAA,MAKJC,UALI,GAWFL,KAXE,CAKJK,UALI;AAAA,MAMJC,QANI,GAWFN,KAXE,CAMJM,QANI;AAAA,MAOJC,KAPI,GAWFP,KAXE,CAOJO,KAPI;AAAA,MAQJC,OARI,GAWFR,KAXE,CAQJQ,OARI;AAAA,MASJC,KATI,GAWFT,KAXE,CASJS,KATI;MAWFT,cAAAA,GAAAA,KAXE,CAUJU,OAVI;MAUJA,OAVI,+BAUM,KAVN,GAAA,cAAA,CAAA;;EAYA,IAA6DC,WAAAA,GAAAA,UAAA,CAAWC,YAAX,CAA7D;MAAEC,KAAF,eAAEA,KAAF;MAASC,OAAT,eAASA,OAAT;MAAkBC,WAAlB,eAAkBA,WAAlB;MAA+BC,MAA/B,eAA+BA,MAA/B;MAAuCC,WAAvC,eAAuCA,WAAvC;MAAoDC,IAApD,eAAoDA,IAApD,CAAA;;AACA,EAAA,IAAA,UAAA,GAAkBC,SAAU,EAA5B;MAAEC,WAAF,cAAEA,WAAF,CAAA;;AACA,EAAA,IAAAC,WAAA,GAAcC,QAAS,CAAAL,WAAA,EAAaD,MAAb,CAAvB,CAAA;;AAGA,EAAA,IAAAO,oBAAA,GAAuB,SAAvBA,oBAAuB,CAAChB,MAAD,EAAmB;IAExC,IAAAiB,IAAA,GAAOR,MAAW,KAAA,YAAX,GAA0B,KAA1B,GAAkC,MAAzC,CAAA;IACA,IAAAS,KAAA,GAAQT,MAAW,KAAA,YAAX,GAA0B,QAA1B,GAAqC,OAA7C,CAAA;;IAEN,IAAIK,gBAAgB,WAApB,EAAiC;AACxB,MAAA,OAAAhB,UAAA,IAAcE,SAAQ,CAARA,KAAc,CAA5B,GACAa,EAAAA,CAAAA,MAAAA,CAAAA,WADA,4BAC6BI,IAD7B,CAAA,GAAA,EAAA,CAAA,MAAA,CAEAJ,WAFA,EAAA,iBAAA,CAAA,CAAA,MAAA,CAE6BK,KAF7B,CAAA,CAAA;AAGT,KAAA;;AACI,IAAA,IAAAJ,WAAA,KAAgB,MAAhB,IAA0BA,WAAA,KAAgB,KAA1C,EAAiD;MACnD,OAAUD,EAAAA,CAAAA,MAAAA,CAAAA,WAAV,4BAAuCI,IAAvC,CAAA,CAAA;AACF,KAAA;;AACI,IAAA,IAAAH,WAAA,KAAgB,OAAhB,IAA2BA,WAAA,KAAgB,QAA3C,EAAqD;MACvD,OAAUD,EAAAA,CAAAA,MAAAA,CAAAA,WAAV,4BAAuCK,KAAvC,CAAA,CAAA;AACF,KAAA;;AACO,IAAA,OAAA,EAAA,CAAA;GAhBH,CAAA;;AAmBA,EAAA,IAAAC,UAAA,GAAaC,QAAQ,YAAM;AAAA,IAAA,IAAA,UAAA,CAAA;;AACzB,IAAA,IAAAC,GAAA,GAAMC,YAAY1B,IAAlB,CAAA;AAEJ,IAAA,OAAAyB,GAAA,iBACAE,KAAM,CAAAC,YAAN,CAAmBH,GAAnB,EAAwB;AACtB3B,MAAAA,WAAW+B,UAAW,CAAAJ,GAAA,aAAAA,GAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,UAAA,GAAAA,GAAA,CAAK5B,KAAL,MAAA,IAAA,IAAA,UAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,UAAYC,CAAAA,SAAZ,YAA0BmB,WAA1B,EAAA,6BAAA,CAAA,CAAA;AADA,KAAxB,CADA,CAAA;AAKD,KAAA,CAACjB,GAAD,EAAMiB,WAAN,EARG,CAAA;AAWN,EAAA,IAAMa,aAAgB,GAAAD,UAAA,EAEdZ,WAAAA,GAAAA,EAAAA,EAAAA,eAAAA,CAAAA,WAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAFc,qBAEgB,IAFhB,CAAA,EAAA,eAAA,CAAA,WAAA,EAAA,EAAA,CAAA,MAAA,CAGdG,oBAAqB,CAAAhB,KAAA,CAHP,CAAA,EAGkB,IAHlB,CAAA,EAAA,WAAA,GAKpBN,SALoB,CAAtB,CAAA;EASA,IAAMiC,gBAAgBF,UAAW,EAAA,YAAA,GAAA,EAAA,EAAA,eAAA,CAAA,YAAA,EAAA,EAAA,CAAA,MAAA,CAC3BZ,WAD2B,EACS,sBAAA,CAAA,EAAA,IADT,CAE3BA,EAAAA,eAAAA,CAAAA,YAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAF2B,EAEeP,8BAAAA,CAAAA,CAAAA,MAAAA,CAAAA,KAFf,GAEyB,IAFzB,CAAA,EAAA,eAAA,CAAA,YAAA,EAAA,EAAA,CAAA,MAAA,CAG3BO,WAH2B,EAGgBL,+BAAAA,CAAAA,CAAAA,MAAAA,CAAAA,WAAA,CAAYR,KAAZ,CAHhB,CAGuCO,EAAAA,OAHvC,CAAjC,EAAA,YAAA,EAAA,CAAA;AAOA,EAAA,IAAMqB,eAAeH,UAAW,EAAA,YAAA,GAAA,EAAA,EAAA,eAAA,CAAA,YAAA,EAAA,EAAA,CAAA,MAAA,CAC1BZ,WAD0B,EAAA,qBAAA,CAAA,EACS,IADT,CAAA,EAAA,eAAA,CAAA,YAAA,EAAA,EAAA,CAAA,MAAA,CAE1BA,WAF0B,EAAA,6BAAA,CAAA,EAEiB,CAAC,CAACM,UAAF,IAAiB,CAACA,UAAD,IAAehB,OAFjD,CAG1BU,EAAAA,eAAAA,CAAAA,YAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAH0B,EAGShB,uBAAAA,CAAAA,CAAAA,MAAAA,CAAAA,QAHT,CAGsBN,EAAAA,YAAA,CAAasC,QAAb,CAAsBhC,QAAtB,CAHtB,CAAhC,EAAA,YAAA,EAAA,CAAA;EAMM,IAAAiC,cAAA,GAAiBL,UAAW,CAAGZ,EAAAA,CAAAA,MAAAA,CAAAA,WAAH,EAC5BA,uBAAAA,CAAAA,EAAAA,eAAAA,CAAAA,EAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,WAD4B,EACSF,yBAAAA,CAAAA,CAAAA,MAAAA,CAAAA,IADT,CACkB,EAAA,IADlB,CAA5B,CAAA,CAAA;AAIN,EAAA,sBACGY,KAAA,CAAAQ,aAAA,CAAA,IAAA,EAAA;AAAGrC,IAAAA,SAAW,EAAAgC,aAAd;AAA6B/B,IAAAA,KAAA,EAAAA,KAAAA;AAA7B,GAAA,EACEgB,IAAA,KAAS,WAAT,IAAwBT,KAAxB,mBAAkCqB,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,SAAW,EAAAoC,cAAAA;GAAf,EAAgC5B,KAAhC,CADpC,iBAEEqB,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,qBAAcmB;AAAlB,GAAA,iBACEU,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,SAAW,EAAAkC,YAAf;AAA6BjC,IAAAA,KAAA,EAAO;MAAEqC,WAAa,EAAA,CAACzC,aAAasC,QAAb,CAAsBhC,QAAtB,CAAD,IAAoCA,QAAAA;AAAnD,KAAA;AAApC,GAAA,EACE,CAACsB,UAAD,IAAehB,OAAf,mBAA2BoB,KAAA,CAAAQ,aAAA,CAAAE,OAAA,EAAA;AAAQC,IAAAA,IAAK,EAAA,MAAb;AAAoBxC,IAAAA,qBAAcmB;GAAlC,CAD7B,EAEEM,UAFF,CADF,iBAKEI,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,SAAW,EAAAiC,aAAAA;GAAf,CALF,CAFF,iBASEJ,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,qBAAcmB;AAAlB,GAAA,EACEZ,OAAW,IAAAF,QADb,EAEEY,IAAS,KAAA,MAAT,IAAmBT,KAAnB,mBAA6BqB,KAAA,CAAAQ,aAAA,CAAA,KAAA,EAAA;AAAIrC,IAAAA,SAAW,EAAAoC,cAAAA;AAAf,GAAA,EAAgC5B,KAAhC,CAF/B,CATF,CADH,CAAA;AAgBF,EA1FA;;AA4FAV,YAAA,CAAa2C,WAAb,GAA2B,cAA3B;;;;"}