{"version":3,"file":"useDrag.js","sources":["../../../src/drawer/hooks/useDrag.ts"],"sourcesContent":["import { useMemo, useState } from 'react';\nimport { TdDrawerProps } from '../type';\nimport { Styles } from '../../common';\n\nconst useDrag = (placement: TdDrawerProps['placement'], sizeDraggable: TdDrawerProps['sizeDraggable']) => {\n  const [dragSizeValue, changeDragSizeValue] = useState<string>(null);\n\n  const handleMousemove = (e: MouseEvent) => {\n    // 鼠标移动时计算draggedSizeValue的值\n    const { x, y } = e;\n    if (sizeDraggable) {\n      if (placement === 'right') {\n        changeDragSizeValue(`${document.documentElement.clientWidth - x + 8}px`);\n      }\n      if (placement === 'left') {\n        changeDragSizeValue(`${x + 8}px`);\n      }\n      if (placement === 'top') {\n        changeDragSizeValue(`${y + 8}px`);\n      }\n      if (placement === 'bottom') {\n        changeDragSizeValue(`${document.documentElement.clientHeight - y + 8}px`);\n      }\n    }\n  };\n  const handleMouseup = () => {\n    document.removeEventListener('mouseup', handleMouseup, true);\n    document.removeEventListener('mousemove', handleMousemove, true);\n  };\n  const draggableLineStyles: Styles = useMemo(() => {\n    // 设置拖拽control的样式\n    const isHorizontal = ['right', 'left'].includes(placement);\n    const oppositeMap = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    return {\n      zIndex: 1,\n      position: 'absolute',\n      background: 'transparent',\n      [oppositeMap[placement]]: 0,\n      width: isHorizontal ? '16px' : '100%',\n      height: isHorizontal ? '100%' : '16px',\n      cursor: isHorizontal ? 'col-resize' : 'row-resize',\n    };\n  }, [placement]);\n\n  const enableDrag = () => {\n    // mousedown绑定mousemove和mouseup事件\n    document.addEventListener('mouseup', handleMouseup, true);\n    document.addEventListener('mousemove', handleMousemove, true);\n  };\n\n  return { dragSizeValue, enableDrag, draggableLineStyles };\n};\n\nexport default useDrag;\n"],"names":["useDrag","placement","sizeDraggable","useState","dragSizeValue","changeDragSizeValue","handleMousemove","e","x","y","document","documentElement","clientWidth","clientHeight","handleMouseup","removeEventListener","draggableLineStyles","useMemo","isHorizontal","includes","oppositeMap","left","right","top","bottom","zIndex","position","background","enableDrag","addEventListener"],"mappings":"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"}