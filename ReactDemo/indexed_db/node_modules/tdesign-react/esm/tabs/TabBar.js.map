{"version":3,"file":"TabBar.js","sources":["../../src/tabs/TabBar.tsx"],"sourcesContent":["import React, { useEffect, useState, CSSProperties } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\n\ninterface TabBarProps {\n  tabPosition: string;\n  activeId: string | number;\n  containerRef: React.MutableRefObject<HTMLDivElement>;\n}\n\nconst TabBar: React.FC<TabBarProps> = (props) => {\n  const { tabPosition, activeId, containerRef } = props;\n  const { classPrefix } = useConfig();\n  const [barStyle, setBarStyle] = useState<CSSProperties>({});\n  const tabsClassPrefix = `${classPrefix}-tabs`;\n\n  const computeStyle = () => {\n    const isHorizontal = ['bottom', 'top'].includes(tabPosition);\n    const transformPosition = isHorizontal ? 'translateX' : 'translateY';\n    const itemProp = isHorizontal ? 'width' : 'height';\n    const barBorderProp = isHorizontal ? 'width' : 'height';\n\n    let offset = 0;\n\n    if (containerRef.current) {\n      const itemsRef = containerRef.current.querySelectorAll?.(`.${tabsClassPrefix}__nav-item`);\n\n      if (itemsRef.length - 1 >= activeId) {\n        itemsRef.forEach((item, itemIndex) => {\n          if (itemIndex < activeId) {\n            offset += Number(getComputedStyle(item)[itemProp].replace('px', ''));\n          }\n        });\n        const computedItem = itemsRef[activeId];\n        if (!computedItem) {\n          setBarStyle({\n            transform: `${transformPosition}(${0}px)`,\n            [barBorderProp]: 0,\n          });\n          return;\n        }\n        const itemPropValue = getComputedStyle(computedItem)[itemProp];\n        setBarStyle({\n          transform: `${transformPosition}(${offset}px)`,\n          [barBorderProp]: itemPropValue || 0,\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (containerRef.current) {\n      setTimeout(() => computeStyle());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tabPosition, activeId, containerRef.current]);\n\n  return (\n    <div\n      className={classNames({\n        [`${tabsClassPrefix}__bar`]: true,\n        [`${classPrefix}-is-${tabPosition}`]: true,\n      })}\n      style={barStyle}\n    ></div>\n  );\n};\n\nTabBar.displayName = 'TabBar';\n\nexport default TabBar;\n"],"names":["TabBar","props","tabPosition","activeId","containerRef","useConfig","classPrefix","useState","barStyle","setBarStyle","tabsClassPrefix","computeStyle","isHorizontal","includes","transformPosition","itemProp","barBorderProp","offset","current","itemsRef","querySelectorAll","length","forEach","item","itemIndex","Number","getComputedStyle","replace","computedItem","transform","itemPropValue","useEffect","setTimeout","React","createElement","className","classNames","style","displayName"],"mappings":"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"}