{"version":3,"file":"Transfer.js","sources":["../../src/transfer/Transfer.tsx"],"sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport difference from 'lodash/difference';\nimport classnames from 'classnames';\n\nimport { ChevronRightIcon as TdChevronRightIcon, ChevronLeftIcon as TdChevronLeftIcon } from 'tdesign-icons-react';\nimport { TdTransferProps, DataOption, TransferValue, TransferListType } from './type';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport Button from '../button';\nimport TransferList from './TransferList';\nimport { filterCheckedTreeNodes, getTargetNodes, getDefaultValue, getJSX, getLeafNodes } from './utils';\nimport { TNode, StyledProps } from '../common';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { transferDefaultProps } from './defaultProps';\n\nexport interface TransferProps extends TdTransferProps, StyledProps {\n  content?: Array<TNode>;\n}\n\ninterface StateInterface {\n  source: DataOption[];\n  target: DataOption[];\n}\n\ninterface CheckedInterface {\n  source: Array<TransferValue>;\n  target: Array<TransferValue>;\n}\n\nconst Transfer: React.FunctionComponent<TransferProps> = (props) => {\n  const {\n    data,\n    search,\n    checked,\n    defaultChecked,\n    onCheckedChange,\n    value,\n    defaultValue,\n    onChange,\n    empty,\n    disabled,\n    pagination,\n    title,\n    operation,\n    footer,\n    transferItem,\n    content,\n    tree,\n    showCheckAll,\n  } = props;\n  const [state, setState] = useState<StateInterface>(() => ({\n    source: data.filter((item) => !defaultValue.includes(item.value)),\n    target: data.filter((item) => defaultValue.includes(item.value)),\n  }));\n  const [checkeds, setCheckeds] = useState<CheckedInterface>(() => ({\n    source: state.source\n      .filter((item) => !item.disabled && defaultChecked.includes(item.value))\n      .map((item) => item.value),\n    target: state.target\n      .filter((item) => !item.disabled && defaultChecked.includes(item.value))\n      .map((item) => item.value),\n  }));\n  const [searchState, setSearchState] = useState<{ source: string; target: string }>({ source: '', target: '' });\n\n  const isTargetControlled = 'value' in props;\n  const isCheckedControlled = 'checked' in props;\n\n  const { classPrefix } = useConfig();\n  const { ChevronRightIcon, ChevronLeftIcon } = useGlobalIcon({\n    ChevronLeftIcon: TdChevronLeftIcon,\n    ChevronRightIcon: TdChevronRightIcon,\n  });\n  const transferClassName = `${classPrefix}-transfer`;\n\n  const [local, t] = useLocaleReceiver('transfer');\n\n  const [sourceData, targetData] = useMemo(() => {\n    const { source, target } = state;\n    const { source: searchSource, target: searchTarget } = searchState;\n    return [\n      source.filter((item) => !searchSource || item.label.indexOf(searchState.source) > -1),\n      target.filter((item) => !searchTarget || item.label.indexOf(searchState.target) > -1),\n    ];\n  }, [searchState, state]);\n\n  const [SourceEmptyCmp, TargetEmptyCmp] = getDefaultValue(empty, t(local.empty)).map((item) => getJSX(item));\n  const [sourceDisable, targetDisable] = getDefaultValue(disabled, false);\n  const [sourcePagonation, targetPagonation] = getDefaultValue(pagination);\n  const [sourceTitle, targetTitle] = getDefaultValue(title).map((item) => getJSX(item));\n  const [leftOperation, rightOperation] = getDefaultValue(operation, [\n    () => <ChevronRightIcon />,\n    () => <ChevronLeftIcon />,\n  ]).map((item) => getJSX(item));\n  const [sourceFooter, targetFooter] = getDefaultValue(footer).map((item) => getJSX(item));\n  const [sourceTransferItem, targetTransferItem] = getDefaultValue(transferItem);\n  const [sourceContent, targetContent] = getDefaultValue(content);\n\n  const [showCheckAllSource, showCheckAllTarget] = useMemo(\n    () =>\n      Array.isArray(showCheckAll) ? [showCheckAll[0] ?? true, showCheckAll[1] ?? true] : [showCheckAll, showCheckAll],\n    [showCheckAll],\n  );\n\n  const transformSource = () => {\n    const { source, target } = state;\n    const sourceCheckeds = source.filter((item) => checkeds.source.includes(item.value));\n    let newSource = difference(source, sourceCheckeds);\n    let newTarget = [...target, ...sourceCheckeds];\n    let newTargetValue = newTarget.map((t) => t.value);\n\n    // 树结构处理 source/target 节点数据\n    if (tree) {\n      newSource = filterCheckedTreeNodes(source, checkeds.source);\n      newTarget = getTargetNodes(newSource, data);\n      newTargetValue = getLeafNodes(newTarget).map((t) => t.value);\n    }\n    if (isTargetControlled) {\n      onChange?.(newTargetValue, {\n        type: 'source',\n        movedValue: sourceCheckeds.map((s) => s.value),\n      });\n    } else {\n      setState({ ...state, source: newSource, target: [...newTarget] });\n      setCheckeds({ ...checkeds, source: [] });\n    }\n  };\n  const transformTarget = () => {\n    const { source, target } = state;\n    const targetCheckeds = target.filter((item) => checkeds.target.includes(item.value));\n    let newSource = [...source, ...targetCheckeds];\n    let newTarget = difference(target, targetCheckeds);\n    let newTargetValue = newTarget.map((t) => t.value);\n\n    // 树结构处理 source/target 节点数据\n    if (tree) {\n      newTarget = filterCheckedTreeNodes(target, checkeds.target);\n      newSource = getTargetNodes(newTarget, data);\n      newTargetValue = getLeafNodes(newTarget).map((t) => t.value);\n    }\n    if (isTargetControlled) {\n      onChange?.(newTargetValue, {\n        type: 'target',\n        movedValue: targetCheckeds.map((s) => s.value),\n      });\n    } else {\n      setState({ ...state, source: newSource, target: newTarget });\n      setCheckeds({ ...checkeds, target: [] });\n    }\n  };\n\n  const OperationsCmp = () => {\n    const isSourceDisabled = sourceDisable || !checkeds.source.length;\n    const isTargetDisabled = targetDisable || !checkeds.target.length;\n\n    return (\n      <div className={`${transferClassName}__operations`}>\n        <Button\n          key={isSourceDisabled ? 'right-outline' : 'right-base'}\n          variant=\"outline\"\n          disabled={isSourceDisabled}\n          onClick={transformSource}\n        >\n          {leftOperation}\n        </Button>\n        <Button\n          key={isSourceDisabled ? 'left-outline' : 'left-base'}\n          variant=\"outline\"\n          disabled={isTargetDisabled}\n          onClick={transformTarget}\n        >\n          {rightOperation}\n        </Button>\n      </div>\n    );\n  };\n\n  const handleCheckChange = (value: Array<TransferValue>, type: TransferListType) => {\n    const { source: sourceChecked, target: targetChecked } = checkeds;\n    const inverseMap = { source: 'target', target: 'source' };\n    isCheckedControlled\n      ? onCheckedChange?.({\n          type,\n          checked: value.concat(checkeds[inverseMap[type]]),\n          sourceChecked,\n          targetChecked,\n        })\n      : setCheckeds({ ...checkeds, [type]: value });\n  };\n\n  // value 受控\n  useEffect(() => {\n    if (isTargetControlled && Array.isArray(value)) {\n      let newTarget = data.filter((item) => value.includes(item.value));\n      let newSource = difference(data, newTarget);\n      // 树结构处理 source/target 节点数据\n      if (tree) {\n        newSource = filterCheckedTreeNodes(data, value);\n        newTarget = getTargetNodes(newSource, data);\n      }\n      setState({ source: [...newSource], target: [...newTarget] });\n      setCheckeds({ source: [], target: [] });\n    }\n  }, [value, data, isTargetControlled, tree]);\n\n  // checked 受控\n  useEffect(() => {\n    const { source, target } = state;\n    if (isCheckedControlled && Array.isArray(checked)) {\n      const newSourceChecked = source\n        .filter((item) => !item.disabled && checked.includes(item.value))\n        .map((item) => item.value);\n      const newTargetChecked = target\n        .filter((item) => !item.disabled && checked.includes(item.value))\n        .map((item) => item.value);\n      setCheckeds({ source: newSourceChecked, target: newTargetChecked });\n    }\n  }, [checked, state, isCheckedControlled]);\n\n  return (\n    <div\n      className={classnames(transferClassName, {\n        [`${transferClassName}__search`]: search,\n        [`${transferClassName}__pagination`]: pagination,\n        [`${transferClassName}__footer`]: footer,\n        [`${transferClassName}--with-tree`]: tree,\n      })}\n    >\n      <TransferList\n        className={`${transferClassName}__list-source`}\n        data={sourceData}\n        search={search}\n        checked={checkeds.source}\n        empty={SourceEmptyCmp}\n        disabled={sourceDisable}\n        pagination={sourcePagonation}\n        title={sourceTitle}\n        footer={sourceFooter}\n        transferItem={sourceTransferItem}\n        content={sourceContent}\n        onCheckbox={(value) => handleCheckChange(value, 'source')}\n        onSearch={(val: string) => setSearchState({ ...searchState, source: val })}\n        tree={tree}\n        showCheckAll={showCheckAllSource}\n      ></TransferList>\n      {OperationsCmp()}\n      <TransferList\n        className={`${transferClassName}__list-target`}\n        data={targetData}\n        search={search}\n        checked={checkeds.target}\n        empty={TargetEmptyCmp}\n        disabled={targetDisable}\n        pagination={targetPagonation}\n        title={targetTitle}\n        footer={targetFooter}\n        transferItem={targetTransferItem}\n        content={targetContent}\n        onCheckbox={(value) => handleCheckChange(value, 'target')}\n        onSearch={(val: string) => setSearchState({ ...searchState, target: val })}\n        tree={tree}\n        showCheckAll={showCheckAllTarget}\n      ></TransferList>\n    </div>\n  );\n};\n\nTransfer.displayName = 'Transfer';\nTransfer.defaultProps = transferDefaultProps;\n\nexport default Transfer;\n"],"names":["Transfer","props","data","search","checked","defaultChecked","onCheckedChange","value","defaultValue","onChange","empty","disabled","pagination","title","operation","footer","transferItem","content","tree","showCheckAll","useState","source","filter","item","includes","target","state","setState","map","checkeds","setCheckeds","searchState","setSearchState","isTargetControlled","isCheckedControlled","useConfig","classPrefix","useGlobalIcon","ChevronLeftIcon","TdChevronLeftIcon","ChevronRightIcon","TdChevronRightIcon","transferClassName","useLocaleReceiver","local","t","useMemo","searchSource","searchTarget","label","indexOf","sourceData","targetData","getDefaultValue","getJSX","SourceEmptyCmp","TargetEmptyCmp","sourceDisable","targetDisable","sourcePagonation","targetPagonation","sourceTitle","targetTitle","leftOperation","rightOperation","sourceFooter","targetFooter","sourceTransferItem","targetTransferItem","sourceContent","targetContent","Array","isArray","showCheckAllSource","showCheckAllTarget","transformSource","sourceCheckeds","newSource","difference","newTarget","newTargetValue","filterCheckedTreeNodes","getTargetNodes","getLeafNodes","type","movedValue","s","transformTarget","targetCheckeds","OperationsCmp","isSourceDisabled","length","isTargetDisabled","React","createElement","className","Button","key","variant","onClick","handleCheckChange","sourceChecked","targetChecked","inverseMap","concat","useEffect","newSourceChecked","newTargetChecked","classnames","TransferList","onCheckbox","onSearch","val","displayName","defaultProps","transferDefaultProps"],"mappings":"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"}