{"version":3,"file":"useMutationObserver.js","sources":["../../src/_util/useMutationObserver.ts"],"sourcesContent":["import { useRef, useEffect } from 'react';\nimport debounce from 'lodash/debounce';\n\nconst DEFAULT_OPTIONS = {\n  debounceTime: 0,\n  config: {\n    attributes: true,\n    childList: true,\n    characterData: true,\n    subtree: true,\n  } as MutationObserverInit,\n};\n\nexport default function useMutationObservable(\n  targetEl: HTMLElement | null,\n  cb: MutationCallback,\n  options = DEFAULT_OPTIONS,\n) {\n  const observeRef = useRef(null);\n\n  useEffect(() => {\n    if (!cb || typeof cb !== 'function') return;\n    const { debounceTime } = options;\n    observeRef.current = new MutationObserver(debounceTime > 0 ? debounce(cb, debounceTime) : cb);\n  }, [cb, options]);\n\n  useEffect(() => {\n    if (!targetEl || !targetEl?.nodeType) return;\n\n    const { config } = options;\n    try {\n      observeRef.current.observe(targetEl, config);\n    } catch (e) {\n      console.error(e);\n    }\n\n    return () => {\n      observeRef.current.disconnect();\n    };\n  }, [targetEl, options]);\n}\n"],"names":["DEFAULT_OPTIONS","debounceTime","config","attributes","childList","characterData","subtree","useMutationObservable","targetEl","cb","options","observeRef","useRef","useEffect","current","MutationObserver","debounce","nodeType","observe","e","console","error","disconnect"],"mappings":";;;;;;;;;;;;;;;;;AAGA,IAAMA,eAAkB,GAAA;AACtBC,EAAAA,YAAc,EAAA,CADQ;AAEtBC,EAAAA,MAAQ,EAAA;AACNC,IAAAA,UAAY,EAAA,IADN;AAENC,IAAAA,SAAW,EAAA,IAFL;AAGNC,IAAAA,aAAe,EAAA,IAHT;AAINC,IAAAA,OAAS,EAAA,IAAA;AAJH,GAAA;AAFc,CAAxB,CAAA;AAUA,SAAwBC,qBAAxB,CACEC,QADF,EAEEC,EAFF,EAIE;EAAA,IADAC,OACA,uEADUV,eACV,CAAA;AACM,EAAA,IAAAW,UAAA,GAAaC,OAAO,KAApB,CAAA;AAENC,EAAAA,SAAA,CAAU,YAAM;AACV,IAAA,IAAA,CAACJ,EAAD,IAAO,OAAOA,EAAP,KAAc,UAArB,EAAiC,OAAA;AAC/B,IAAA,IAAER,YAAF,GAAmBS,OAAnB,CAAET,YAAF,CAAA;AACKU,IAAAA,UAAA,CAAAG,OAAA,GAAU,IAAIC,gBAAJ,CAAqBd,YAAA,GAAe,CAAf,GAAmBe,UAAS,CAAAP,EAAA,EAAIR,YAAJ,CAA5B,GAAgDQ,EAArE,CAAV,CAAA;AACV,GAJH,EAIG,CAACA,EAAD,EAAKC,OAAL,CAJH,CAAA,CAAA;AAMAG,EAAAA,SAAA,CAAU,YAAM;AACV,IAAA,IAAA,CAACL,QAAD,IAAa,EAACA,QAAD,KAAA,IAAA,IAACA,QAAD,KAAA,KAAA,CAAA,IAACA,QAAU,CAAAS,QAAX,CAAb,EAAkC,OAAA;AAEhC,IAAA,IAAEf,MAAF,GAAaQ,OAAb,CAAER,MAAF,CAAA;;IACF,IAAA;AACSS,MAAAA,UAAA,CAAAG,OAAA,CAAQI,OAAR,CAAgBV,QAAhB,EAA0BN,MAA1B,CAAA,CAAA;KADT,QAEKiB,GAAP;MACAC,OAAA,CAAQC,KAAR,CAAcF,CAAd,CAAA,CAAA;AACF,KAAA;;AAEA,IAAA,OAAO,YAAM;MACXR,UAAA,CAAWG,OAAX,CAAmBQ,UAAnB,EAAA,CAAA;KADF,CAAA;AAGC,GAbH,EAaG,CAACd,QAAD,EAAWE,OAAX,CAbH,CAAA,CAAA;AAcF;;;;"}