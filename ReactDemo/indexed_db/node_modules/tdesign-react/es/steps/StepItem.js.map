{"version":3,"file":"StepItem.js","sources":["../../src/steps/StepItem.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport { CloseIcon as TdCloseIcon, CheckIcon as TdCheckIcon } from 'tdesign-icons-react';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { TdStepItemProps } from './type';\nimport { StyledProps } from '../common';\nimport StepsContext from './StepsContext';\nimport { stepItemDefaultProps } from './defaultProps';\n\nexport interface StepItemProps extends TdStepItemProps, StyledProps {\n  index?: number;\n  children?: React.ReactNode;\n}\n\nconst StepItem = (props: StepItemProps) => {\n  const { index, icon, title, content, value, children, style, status } = props;\n\n  const { current, theme, onChange, readonly } = useContext(StepsContext);\n  const { classPrefix, steps: globalStepsConfig } = useConfig();\n  const { CloseIcon, CheckIcon } = useGlobalIcon({\n    CloseIcon: TdCloseIcon,\n    CheckIcon: TdCheckIcon,\n  });\n\n  const canClick = status !== 'process' && !readonly;\n\n  // 步骤条每一步展示的图标\n  function renderIcon() {\n    if (!icon) return null;\n\n    const iconCls = `${classPrefix}-steps-item__icon--number`;\n\n    if (icon && icon !== true) return <span className={iconCls}>{icon}</span>;\n\n    if (theme !== 'default') return null;\n\n    if (status === 'error') return <span className={iconCls}>{globalStepsConfig.errorIcon || <CloseIcon />}</span>;\n\n    if (status === 'finish')\n      return (\n        <span className={iconCls}>\n          <CheckIcon />\n        </span>\n      );\n\n    return <span className={iconCls}>{Number(index) + 1}</span>;\n  }\n\n  function onStepClick(e: React.MouseEvent<HTMLDivElement>) {\n    if (!canClick) return;\n    const currentValue = value ?? index;\n    onChange(currentValue, current, { e });\n  }\n\n  return (\n    <div\n      style={style}\n      className={classNames({\n        [`${classPrefix}-steps-item`]: true,\n        [`${classPrefix}-steps-item--wait`]: status === 'default',\n        [`${classPrefix}-steps-item--error`]: status === 'error',\n        [`${classPrefix}-steps-item--finish`]: status === 'finish',\n        [`${classPrefix}-steps-item--process`]: status === 'process',\n        [props.className]: !!props.className,\n      })}\n    >\n      <div\n        className={classNames(`${classPrefix}-steps-item__inner`, {\n          [`${classPrefix}-steps-item--clickable`]: canClick,\n        })}\n        onClick={onStepClick}\n      >\n        <div\n          className={classNames(`${classPrefix}-steps-item__icon`, {\n            [`${classPrefix}-steps-item-${status}`]: status,\n          })}\n        >\n          {renderIcon()}\n        </div>\n        <div className={`${classPrefix}-steps-item__content`}>\n          <div className={`${classPrefix}-steps-item__title`}>{title}</div>\n          <div className={`${classPrefix}-steps-item__description`}>{content}</div>\n          {children ? <div className={`${classPrefix}-steps-item__extra`}>{children}</div> : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nStepItem.displayName = 'StepItem';\nStepItem.defaultProps = stepItemDefaultProps;\n\nexport default StepItem;\n"],"names":["StepItem","props","index","icon","title","content","value","children","style","status","useContext","StepsContext","current","theme","onChange","readonly","useConfig","classPrefix","globalStepsConfig","steps","useGlobalIcon","CloseIcon","TdCloseIcon","CheckIcon","TdCheckIcon","canClick","renderIcon","iconCls","React","createElement","className","errorIcon","Number","onStepClick","e","currentValue","classNames","onClick","displayName","defaultProps","stepItemDefaultProps"],"mappings":"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"}