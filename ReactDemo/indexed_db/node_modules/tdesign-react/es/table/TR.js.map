{"version":3,"file":"TR.js","sources":["../../src/table/TR.tsx"],"sourcesContent":["import React, { useMemo, useRef, MouseEvent } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport classnames from 'classnames';\nimport { formatRowAttributes, formatRowClassNames } from './utils';\nimport { getRowFixedStyles, getColumnFixedStyles } from './hooks/useFixed';\nimport { RowAndColFixedPosition } from './interface';\nimport useClassName from './hooks/useClassName';\nimport TEllipsis from './Ellipsis';\nimport { BaseTableCellParams, TableRowData, RowspanColspan, TdBaseTableProps, TableScroll } from './type';\nimport useLazyLoad from './hooks/useLazyLoad';\nimport { getCellKey, SkipSpansValue } from './hooks/useRowspanAndColspan';\n\nexport interface RenderTdExtra {\n  rowAndColFixedPosition: RowAndColFixedPosition;\n  columnLength: number;\n  dataLength: number;\n  cellSpans: RowspanColspan;\n  cellEmptyContent: TdBaseTableProps['cellEmptyContent'];\n}\n\nexport interface RenderEllipsisCellParams {\n  cellNode: any;\n}\n\nexport type TrCommonProps = Pick<TdBaseTableProps, TrPropsKeys>;\n\nexport const TABLE_PROPS = [\n  'rowKey',\n  'rowClassName',\n  'columns',\n  'fixedRows',\n  'footData',\n  'rowAttributes',\n  'rowspanAndColspan',\n  'scroll',\n  'cellEmptyContent',\n  'onCellClick',\n  'onRowClick',\n  'onRowDblclick',\n  'onRowMouseover',\n  'onRowMousedown',\n  'onRowMouseenter',\n  'onRowMouseleave',\n  'onRowMouseup',\n] as const;\n\nexport type TrPropsKeys = typeof TABLE_PROPS[number];\n\nexport interface TrProps extends TrCommonProps {\n  rowKey: string;\n  row?: TableRowData;\n  rowIndex?: number;\n  dataLength?: number;\n  rowAndColFixedPosition?: RowAndColFixedPosition;\n  skipSpansMap?: Map<string, SkipSpansValue>;\n  scrollType?: string;\n  isVirtual?: boolean;\n  rowHeight?: number;\n  trs?: Map<number, object>;\n  bufferSize?: number;\n  scroll?: TableScroll;\n  tableElm?: HTMLDivElement;\n  tableContentElm?: HTMLDivElement;\n  onRowMounted?: () => void;\n}\n\nexport const ROW_LISTENERS = ['click', 'dblclick', 'mouseover', 'mousedown', 'mouseenter', 'mouseleave', 'mouseup'];\n\nexport function renderCell(\n  params: BaseTableCellParams<TableRowData>,\n  extra?: {\n    cellEmptyContent?: TdBaseTableProps['cellEmptyContent'];\n  },\n) {\n  const { col, row } = params;\n  if (isFunction(col.cell)) {\n    return col.cell(params);\n  }\n  if (isFunction(col.render)) {\n    return col.render({ ...params, type: 'cell' });\n  }\n  const r = col.cell || col.render || get(row, col.colKey);\n  // 0 和 false 属于正常可用之，不能使用兜底逻辑 cellEmptyContent\n  if (![undefined, '', null].includes(r)) return r;\n  if (extra?.cellEmptyContent) return extra.cellEmptyContent;\n  return r;\n}\n\n// 表格行组件\nexport default function TR(props: TrProps) {\n  const {\n    row,\n    rowKey,\n    rowIndex,\n    rowClassName,\n    rowAttributes,\n    dataLength,\n    fixedRows,\n    scroll,\n    tableContentElm,\n    rowAndColFixedPosition,\n  } = props;\n\n  const trRef = useRef<HTMLTableRowElement>();\n\n  const {\n    tdEllipsisClass,\n    tableBaseClass,\n    tableColFixedClasses,\n    tableRowFixedClasses,\n    tdAlignClasses,\n    tableDraggableClasses,\n  } = useClassName();\n\n  const trStyles = getRowFixedStyles(\n    get(row, rowKey || 'id'),\n    rowIndex,\n    dataLength,\n    fixedRows,\n    rowAndColFixedPosition,\n    tableRowFixedClasses,\n  );\n\n  const trAttributes = useMemo(\n    () => formatRowAttributes(rowAttributes, { row, rowIndex, type: 'body' }) || {},\n    [row, rowAttributes, rowIndex],\n  );\n\n  const classes = useMemo(() => {\n    const customClasses = formatRowClassNames(rowClassName, { row, rowIndex, type: 'body' }, rowKey || 'id');\n    return [trStyles?.classes, customClasses];\n  }, [row, rowClassName, rowIndex, rowKey, trStyles?.classes]);\n\n  const useLazyLoadParams = useMemo(() => ({ ...scroll, rowIndex }), [scroll, rowIndex]);\n  const { hasLazyLoadHolder, tRowHeight } = useLazyLoad(tableContentElm, trRef.current, useLazyLoadParams);\n\n  function renderEllipsisCell(cellParams: BaseTableCellParams<TableRowData>, params: RenderEllipsisCellParams) {\n    const { cellNode } = params;\n    const { col } = cellParams;\n    const content = isFunction(col.ellipsis) ? col.ellipsis(cellParams) : undefined;\n    const tableElement = props.tableElm;\n    return (\n      <TEllipsis\n        placement={'top'}\n        attach={tableElement ? () => tableElement : undefined}\n        popupContent={content}\n        tooltipProps={typeof col.ellipsis === 'object' ? col.ellipsis : undefined}\n      >\n        {cellNode}\n      </TEllipsis>\n    );\n  }\n\n  function renderTd(params: BaseTableCellParams<TableRowData>, extra: RenderTdExtra) {\n    const { col, colIndex, rowIndex } = params;\n    const { cellSpans, dataLength, rowAndColFixedPosition } = extra;\n    const cellNode = renderCell(params, { cellEmptyContent: props.cellEmptyContent });\n    const tdStyles = getColumnFixedStyles(col, colIndex, rowAndColFixedPosition, tableColFixedClasses);\n    const customClasses = isFunction(col.className) ? col.className({ ...params, type: 'td' }) : col.className;\n    const classes = [\n      tdStyles.classes,\n      customClasses,\n      {\n        [tdEllipsisClass]: col.ellipsis,\n        [tableBaseClass.tdLastRow]: rowIndex + cellSpans.rowspan === dataLength,\n        [tableBaseClass.tdFirstCol]: colIndex === 0 && props.rowspanAndColspan,\n        [tdAlignClasses[col.align]]: col.align && col.align !== 'left',\n        // 标记可拖拽列\n        [tableDraggableClasses.handle]: col.colKey === 'drag',\n      },\n    ];\n    const onClick = (e: MouseEvent<HTMLTableCellElement>) => {\n      const p = { ...params, e };\n      props.onCellClick?.(p);\n    };\n    const attrs = { ...col.attrs, rowSpan: cellSpans.rowspan, colSpan: cellSpans.colspan };\n    if (!col.colKey) return null;\n    return (\n      <td key={col.colKey} className={classnames(classes)} style={tdStyles.style} {...attrs} onClick={onClick}>\n        {col.ellipsis ? renderEllipsisCell(params, { cellNode }) : cellNode}\n      </td>\n    );\n  }\n\n  // const { row, rowIndex, dataLength, rowAndColFixedPosition, scrollType, isInit } = props;\n  // const hasHolder = scrollType === 'lazy' && !isInit;\n  // const rowHeightRef: Ref = inject('rowHeightRef');\n  const columnVNodeList = props.columns?.map((col, colIndex) => {\n    const cellSpans: RowspanColspan = {};\n    const params = {\n      row,\n      col,\n      rowIndex,\n      colIndex,\n    };\n    let spanState = null;\n    if (props.skipSpansMap.size) {\n      const cellKey = getCellKey(row, props.rowKey, col.colKey, colIndex);\n      spanState = props.skipSpansMap.get(cellKey) || {};\n      spanState?.rowspan > 1 && (cellSpans.rowspan = spanState.rowspan);\n      spanState?.colspan > 1 && (cellSpans.colspan = spanState.colspan);\n      if (spanState.skipped) return null;\n    }\n    return renderTd(params, {\n      dataLength,\n      rowAndColFixedPosition,\n      columnLength: props.columns.length,\n      cellSpans,\n      cellEmptyContent: props.cellEmptyContent,\n    });\n  });\n\n  const rowParams = { row, index: rowIndex };\n  return (\n    <tr\n      ref={trRef}\n      {...trAttributes}\n      style={trStyles?.style}\n      className={classnames(classes)}\n      onClick={(e) => props.onRowClick?.({ ...rowParams, e })}\n      onDoubleClick={(e) => props.onRowDblclick?.({ ...rowParams, e })}\n      onMouseDown={(e) => props.onRowMousedown?.({ ...rowParams, e })}\n      onMouseEnter={(e) => props.onRowMouseenter?.({ ...rowParams, e })}\n      onMouseLeave={(e) => props.onRowMouseleave?.({ ...rowParams, e })}\n      onMouseUp={(e) => props.onRowMouseup?.({ ...rowParams, e })}\n      onMouseOver={(e) => props.onRowMouseover?.({ ...rowParams, e })}\n    >\n      {hasLazyLoadHolder\n        ? [<td key={rowIndex} style={{ height: `${tRowHeight}px`, border: 'none' }} />]\n        : columnVNodeList}\n    </tr>\n  );\n}\n\nTR.displayName = 'TR';\n"],"names":["TABLE_PROPS","ROW_LISTENERS","renderCell","params","extra","col","row","isFunction","cell","render","type","r","get","colKey","includes","cellEmptyContent","TR","props","rowKey","rowIndex","rowClassName","rowAttributes","dataLength","fixedRows","scroll","tableContentElm","rowAndColFixedPosition","trRef","useRef","useClassName","tdEllipsisClass","tableBaseClass","tableColFixedClasses","tableRowFixedClasses","tdAlignClasses","tableDraggableClasses","trStyles","getRowFixedStyles","trAttributes","useMemo","formatRowAttributes","classes","customClasses","formatRowClassNames","useLazyLoadParams","useLazyLoad","current","hasLazyLoadHolder","tRowHeight","renderEllipsisCell","cellParams","cellNode","content","ellipsis","tableElement","tableElm","React","createElement","TEllipsis","placement","attach","popupContent","tooltipProps","renderTd","colIndex","cellSpans","tdStyles","getColumnFixedStyles","className","tdLastRow","rowspan","tdFirstCol","rowspanAndColspan","align","handle","onClick","e","p","onCellClick","attrs","rowSpan","colSpan","colspan","key","classnames","style","columnVNodeList","columns","map","spanState","skipSpansMap","size","cellKey","getCellKey","skipped","columnLength","length","rowParams","index","ref","onRowClick","onDoubleClick","onRowDblclick","onMouseDown","onRowMousedown","onMouseEnter","onRowMouseenter","onMouseLeave","onRowMouseleave","onMouseUp","onRowMouseup","onMouseOver","onRowMouseover","height","border","displayName"],"mappings":"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"}