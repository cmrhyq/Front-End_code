{"version":3,"file":"Select.js","sources":["../../../src/select/base/Select.tsx"],"sourcesContent":["import React, { useState, useEffect, Ref, useMemo, useCallback, useRef } from 'react';\nimport classNames from 'classnames';\nimport isFunction from 'lodash/isFunction';\nimport get from 'lodash/get';\nimport useControlled from '../../hooks/useControlled';\nimport { useLocaleReceiver } from '../../locale/LocalReceiver';\nimport useConfig from '../../hooks/useConfig';\nimport forwardRefWithStatics from '../../_util/forwardRefWithStatics';\nimport { getSelectValueArr, getValueToOption } from '../util/helper';\nimport noop from '../../_util/noop';\nimport FakeArrow from '../../common/FakeArrow';\nimport Loading from '../../loading';\nimport SelectInput from '../../select-input';\nimport Option from './Option';\nimport OptionGroup from './OptionGroup';\nimport PopupContent from './PopupContent';\nimport Tag from '../../tag';\nimport { TdSelectProps, TdOptionProps, SelectOption, SelectValueChangeTrigger } from '../type';\nimport { StyledProps } from '../../common';\nimport { selectDefaultProps } from '../defaultProps';\nimport { PopupVisibleChangeContext } from '../../popup';\n\nexport interface SelectProps extends TdSelectProps, StyledProps {\n  // 子节点\n  children?: React.ReactNode;\n  onMouseEnter?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n}\n\ntype OptionsType = TdOptionProps[];\n\nconst Select = forwardRefWithStatics(\n  (props: SelectProps, ref: Ref<HTMLDivElement>) => {\n    // 国际化文本初始化\n    const [local, t] = useLocaleReceiver('select');\n    const emptyText = t(local.loadingText);\n\n    const {\n      readonly,\n      bordered,\n      borderless,\n      autoWidth,\n      creatable,\n      filter,\n      loadingText = emptyText,\n      max,\n      popupProps,\n      reserveKeyword,\n      className,\n      style,\n      disabled,\n      size,\n      multiple,\n      placeholder,\n      clearable,\n      prefixIcon,\n      options,\n      filterable,\n      loading,\n      onFocus,\n      onBlur,\n      onClear = noop,\n      onCreate,\n      onRemove,\n      onSearch,\n      empty,\n      valueType,\n      keys,\n      children,\n      collapsedItems,\n      minCollapsedNum,\n      valueDisplay,\n      onEnter,\n      onVisibleChange,\n      showArrow,\n      inputProps,\n      panelBottomContent,\n      panelTopContent,\n      selectInputProps,\n      tagInputProps,\n      tagProps,\n    } = props;\n\n    const selectPopupRef = useRef();\n\n    const [value, onChange] = useControlled(props, 'value', props.onChange);\n    const { classPrefix } = useConfig();\n    const { overlayClassName, ...restPopupProps } = popupProps || {};\n\n    const name = `${classPrefix}-select`; // t-select\n\n    const [showPopup, setShowPopup] = useControlled(props, 'popupVisible', props.onPopupVisibleChange);\n    const [inputValue, onInputChange] = useControlled(props, 'inputValue', props.onInputChange);\n    const [currentOptions, setCurrentOptions] = useState([]);\n    const [tmpPropOptions, setTmpPropOptions] = useState([]);\n    const [valueToOption, setValueToOption] = useState({});\n    const [selectedOptions, setSelectedOptions] = useState([]);\n\n    // 处理设置 option 的逻辑\n    useEffect(() => {\n      if (keys) {\n        // 如果有定制 keys 先做转换\n        const transformedOptions = options?.map((option) => ({\n          ...option,\n          value: get(option, keys?.value || 'value'),\n          label: get(option, keys?.label || 'label'),\n        }));\n        setCurrentOptions(transformedOptions);\n        setTmpPropOptions(transformedOptions);\n      } else {\n        setCurrentOptions(options);\n        setTmpPropOptions(options);\n      }\n      setValueToOption(getValueToOption(children, options, keys) || {});\n    }, [options, keys, children]);\n\n    // 同步 value 对应的 options\n    useEffect(() => {\n      setSelectedOptions((oldSelectedOptions) => {\n        const valueKey = keys?.value || 'value';\n        const labelKey = keys?.label || 'label';\n        if (Array.isArray(value)) {\n          return value\n            .map((item) => {\n              if (valueType === 'value') {\n                return (\n                  valueToOption[item as string | number] ||\n                  oldSelectedOptions.find((option) => get(option, valueKey) === item) || {\n                    [valueKey]: item,\n                    [labelKey]: item,\n                  }\n                );\n              }\n              return item;\n            })\n            .filter(Boolean);\n        }\n\n        if (value !== undefined && value !== null) {\n          if (valueType === 'value') {\n            return [\n              valueToOption[value as string | number] ||\n                oldSelectedOptions.find((option) => get(option, valueKey) === value) || {\n                  [valueKey]: value,\n                  [labelKey]: value,\n                },\n            ].filter(Boolean);\n          }\n          return [value];\n        }\n        return [];\n      });\n    }, [value, keys, valueType, valueToOption]);\n\n    const selectedLabel = useMemo(() => {\n      if (multiple) {\n        return selectedOptions.map((selectedOption) => get(selectedOption || {}, keys?.label || 'label') || '');\n      }\n      return get(selectedOptions[0] || {}, keys?.label || 'label') || undefined;\n    }, [selectedOptions, keys, multiple]);\n\n    const handleShowPopup = (visible: boolean, ctx: PopupVisibleChangeContext) => {\n      if (disabled) return;\n      setShowPopup(visible, ctx);\n      onVisibleChange?.(visible);\n      visible && onInputChange('');\n    };\n\n    // 可以根据触发来源，自由定制标签变化时的筛选器行为\n    const onTagChange = (_currentTags, context) => {\n      const { trigger, index, item, e } = context;\n      // backspace\n      if (trigger === 'backspace') {\n        e.stopPropagation();\n\n        let closest = -1;\n        let len = index;\n        while (len >= 0) {\n          if (!selectedOptions[len]?.disabled) {\n            closest = len;\n            break;\n          }\n          len -= 1;\n        }\n        if (closest < 0) {\n          return;\n        }\n        const values = getSelectValueArr(value, value[closest], true, valueType, keys);\n        onChange(values, { e, trigger, selectedOptions: [] });\n        return;\n      }\n\n      if (trigger === 'clear') {\n        e.stopPropagation();\n        // TODO: selectedOptions\n        onChange([], { e, trigger, selectedOptions: [] });\n        return;\n      }\n\n      if (trigger === 'tag-remove') {\n        e.stopPropagation();\n        const values = getSelectValueArr(value, value[index], true, valueType, keys);\n        onChange(values, { e, trigger, selectedOptions: [] });\n        if (isFunction(onRemove)) {\n          onRemove({\n            value: value[index],\n            data: {\n              label: item,\n              value: value[index],\n            },\n            e,\n          });\n        }\n      }\n    };\n\n    // 选中 Popup 某项\n    const handleChange = (\n      value: string | number,\n      context: { e: React.MouseEvent<HTMLLIElement>; trigger: SelectValueChangeTrigger },\n    ) => {\n      if (multiple) {\n        !reserveKeyword && onInputChange('', { trigger: 'clear' });\n      }\n      if (creatable && isFunction(onCreate)) {\n        if ((options as OptionsType).filter((option) => option.value === value).length === 0) {\n          onCreate(value);\n        }\n      }\n      onChange?.(value, { ...context, selectedOptions: [] });\n    };\n\n    // 处理filter逻辑\n    const handleFilter = (value: string) => {\n      let filteredOptions: OptionsType = [];\n      if (!value) {\n        setCurrentOptions(tmpPropOptions);\n        return;\n      }\n\n      if (filter && isFunction(filter)) {\n        // 如果有自定义的filter方法 使用自定义的filter方法\n        if (Array.isArray(tmpPropOptions)) {\n          filteredOptions = tmpPropOptions.filter((option) => filter(value, option));\n        }\n      } else if (Array.isArray(tmpPropOptions)) {\n        const upperValue = value.toUpperCase();\n        filteredOptions = tmpPropOptions.filter((option) => (option?.label || '').toUpperCase().includes(upperValue)); // 不区分大小写\n      }\n\n      if (creatable) {\n        filteredOptions = filteredOptions.concat([{ label: value, value }]);\n      }\n      setCurrentOptions(filteredOptions);\n    };\n\n    // 处理输入框逻辑\n    const handleInputChange = (value: string) => {\n      onInputChange(value);\n      if (value === undefined) return;\n\n      if (isFunction(onSearch)) {\n        onSearch(value);\n        return;\n      }\n    };\n\n    const onClearValue = (context) => {\n      context.e.stopPropagation();\n      if (Array.isArray(value)) {\n        onChange([], context);\n      } else {\n        onChange(null, context);\n      }\n      onInputChange(undefined);\n      onClear(context);\n    };\n\n    useEffect(() => {\n      if (typeof inputValue !== 'undefined') {\n        handleFilter(String(inputValue));\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [inputValue]);\n\n    // 渲染后置图标\n    const renderSuffixIcon = () => {\n      if (loading) {\n        return (\n          <Loading className={classNames(`${name}__right-icon`, `${name}__active-icon`)} loading={true} size=\"small\" />\n        );\n      }\n\n      return (\n        showArrow && <FakeArrow overlayClassName={`${name}__right-icon`} isActive={showPopup} disabled={disabled} />\n      );\n    };\n\n    // 渲染主体内容\n    const renderContent = () => {\n      const popupContentProps = {\n        onChange: handleChange,\n        value,\n        className,\n        size,\n        multiple,\n        showPopup,\n        // popup弹出层内容只会在点击事件之后触发 并且无任何透传参数\n        setShowPopup: (show) => handleShowPopup(show, {}),\n        options: currentOptions,\n        empty,\n        max,\n        loadingText,\n        loading,\n        valueType,\n        keys,\n        panelBottomContent,\n        panelTopContent,\n      };\n      return (\n        <PopupContent {...popupContentProps} ref={selectPopupRef}>\n          {children}\n        </PopupContent>\n      );\n    };\n\n    const renderValueDisplay = () => {\n      if (!valueDisplay) {\n        if (!multiple) {\n          if (typeof selectedLabel !== 'string') {\n            return selectedLabel;\n          }\n          return '';\n        }\n        return ({ value: val }) =>\n          val.slice(0, minCollapsedNum ? minCollapsedNum : val.length).map((v: string, key: number) => {\n            const filterOption: SelectOption & { disabled?: boolean } = options?.find((option) => option.label === v);\n            return (\n              <Tag\n                key={key}\n                onClose={({ e }) => {\n                  e.stopPropagation();\n                  const values = getSelectValueArr(value, value[key], true, valueType, keys);\n                  onChange(values, null);\n                  return;\n                }}\n                closable={!filterOption?.disabled}\n              >\n                {v}\n              </Tag>\n            );\n          });\n      }\n      if (typeof valueDisplay === 'string') {\n        return valueDisplay;\n      }\n      if (multiple) {\n        return ({ onClose }) => valueDisplay({ value: selectedLabel, onClose });\n      }\n      return selectedLabel.length ? (valueDisplay({ value: selectedLabel[0], onClose: noop }) as string) : '';\n    };\n\n    const renderCollapsedItems = useMemo(\n      () =>\n        collapsedItems\n          ? () =>\n              collapsedItems({\n                value: selectedLabel,\n                collapsedSelectedItems: selectedLabel.slice(minCollapsedNum, selectedLabel.length),\n                count: selectedLabel.length - minCollapsedNum,\n              })\n          : null,\n      [selectedLabel, collapsedItems, minCollapsedNum],\n    );\n\n    // 将第一个选中的 option 置于列表可见范围的最后一位\n    const updateScrollTop = useCallback(\n      (content: HTMLDivElement) => {\n        if (!selectPopupRef?.current) {\n          return;\n        }\n        const firstSelectedNode: HTMLDivElement = (selectPopupRef?.current as HTMLUListElement).querySelector(\n          `.${classPrefix}-is-selected`,\n        );\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      },\n      [classPrefix],\n    );\n\n    const { onMouseEnter, onMouseLeave } = props;\n\n    return (\n      <div\n        className={classNames(`${name}__wrap`, className)}\n        style={style}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        <SelectInput\n          autoWidth={!style?.width && autoWidth}\n          ref={ref}\n          className={name}\n          readonly={readonly}\n          allowInput={(filterable ?? local.filterable) || isFunction(filter)}\n          multiple={multiple}\n          value={selectedLabel}\n          valueDisplay={renderValueDisplay()}\n          clearable={clearable}\n          disabled={disabled}\n          status={props.status}\n          tips={props.tips}\n          borderless={borderless || !bordered}\n          label={prefixIcon}\n          suffixIcon={renderSuffixIcon()}\n          panel={renderContent()}\n          placeholder={!multiple && showPopup && selectedLabel ? selectedLabel : placeholder || t(local.placeholder)}\n          inputValue={inputValue}\n          tagInputProps={{\n            ...tagInputProps,\n          }}\n          tagProps={tagProps}\n          inputProps={{\n            size,\n            ...inputProps,\n          }}\n          minCollapsedNum={minCollapsedNum}\n          collapsedItems={renderCollapsedItems}\n          popupProps={{\n            overlayClassName: [`${name}__dropdown`, overlayClassName],\n            ...restPopupProps,\n          }}\n          popupVisible={showPopup}\n          onPopupVisibleChange={handleShowPopup}\n          onTagChange={onTagChange}\n          onInputChange={handleInputChange}\n          onFocus={onFocus}\n          onEnter={onEnter}\n          onBlur={onBlur}\n          onClear={(context) => {\n            onClearValue(context);\n          }}\n          updateScrollTop={updateScrollTop}\n          {...selectInputProps}\n        />\n      </div>\n    );\n  },\n  {\n    Option,\n    OptionGroup,\n  },\n);\n\nSelect.displayName = 'Select';\nSelect.defaultProps = selectDefaultProps;\n\nexport default Select;\n"],"names":["Select","forwardRefWithStatics","props","ref","useLocaleReceiver","local","t","emptyText","loadingText","readonly","bordered","borderless","autoWidth","creatable","filter","max","popupProps","reserveKeyword","className","style","disabled","size","multiple","placeholder","clearable","prefixIcon","options","filterable","loading","onFocus","onBlur","onClear","noop","onCreate","onRemove","onSearch","empty","valueType","keys","children","collapsedItems","minCollapsedNum","valueDisplay","onEnter","onVisibleChange","showArrow","inputProps","panelBottomContent","panelTopContent","selectInputProps","tagInputProps","tagProps","selectPopupRef","useRef","useControlled","onChange","value","useConfig","classPrefix","overlayClassName","restPopupProps","name","onPopupVisibleChange","showPopup","setShowPopup","onInputChange","inputValue","useState","currentOptions","setCurrentOptions","tmpPropOptions","setTmpPropOptions","valueToOption","setValueToOption","selectedOptions","setSelectedOptions","useEffect","transformedOptions","map","option","get","label","getValueToOption","oldSelectedOptions","valueKey","labelKey","Array","isArray","item","find","Boolean","selectedLabel","useMemo","selectedOption","handleShowPopup","visible","ctx","onTagChange","_currentTags","context","trigger","index","e","stopPropagation","closest","len","values","getSelectValueArr","isFunction","data","handleChange","length","handleFilter","filteredOptions","upperValue","toUpperCase","includes","concat","handleInputChange","onClearValue","String","renderSuffixIcon","React","createElement","Loading","classNames","FakeArrow","isActive","renderContent","popupContentProps","show","PopupContent","renderValueDisplay","val","slice","v","key","filterOption","Tag","onClose","closable","renderCollapsedItems","collapsedSelectedItems","count","updateScrollTop","useCallback","content","current","firstSelectedNode","querySelector","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","onMouseEnter","onMouseLeave","SelectInput","width","allowInput","status","tips","suffixIcon","panel","popupVisible","Option","OptionGroup","displayName","defaultProps","selectDefaultProps"],"mappings":"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"}