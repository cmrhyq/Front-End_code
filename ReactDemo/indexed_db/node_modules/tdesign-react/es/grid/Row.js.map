{"version":3,"file":"Row.js","sources":["../../src/grid/Row.tsx"],"sourcesContent":["import React, { useEffect, useState, forwardRef, createContext } from 'react';\nimport classNames from 'classnames';\nimport isObject from 'lodash/isObject';\nimport useConfig from '../hooks/useConfig';\nimport { StyledProps } from '../common';\nimport { TdRowProps } from './type';\nimport { canUseDocument, getCssVarsValue } from '../_util/dom';\nimport { rowDefaultProps } from './defaultProps';\n\n/**\n * Row 组件支持的属性。\n */\nexport interface RowProps extends TdRowProps, StyledProps {\n  /**\n   * 默认子元素内容\n   */\n  children: React.ReactNode;\n}\n\nconst calcSize = (width: number) => {\n  const smWidth = getCssVarsValue('--td-screen-sm') || 768;\n  const mdWidth = getCssVarsValue('--td-screen-md') || 992;\n  const lgWidth = getCssVarsValue('--td-screen-lg') || 1200;\n  const xlWidth = getCssVarsValue('--td-screen-xl') || 1400;\n  const xxlWidth = getCssVarsValue('--td-screen-xxl') || 1880;\n\n  let size = 'xs';\n  if (width >= xxlWidth) {\n    size = 'xxl';\n  } else if (width >= xlWidth) {\n    size = 'xl';\n  } else if (width >= lgWidth) {\n    size = 'lg';\n  } else if (width >= mdWidth) {\n    size = 'md';\n  } else if (width >= smWidth) {\n    size = 'sm';\n  } else {\n    size = 'xs';\n  }\n\n  return size;\n};\n\nconst calcRowStyle = (gutter: TdRowProps['gutter'], currentSize: string): object => {\n  const rowStyle = {};\n  if (typeof gutter === 'number') {\n    Object.assign(rowStyle, {\n      marginLeft: `${gutter / -2}px`,\n      marginRight: `${gutter / -2}px`,\n    });\n  } else if (Array.isArray(gutter) && gutter.length) {\n    if (typeof gutter[0] === 'number') {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0] / -2}px`,\n        marginRight: `${gutter[0] / -2}px`,\n      });\n    }\n    if (typeof gutter[1] === 'number') {\n      Object.assign(rowStyle, { rowGap: `${gutter[1]}px` });\n    }\n\n    if (isObject(gutter[0]) && gutter[0][currentSize] !== undefined) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[0][currentSize] / -2}px`,\n        marginRight: `${gutter[0][currentSize] / -2}px`,\n      });\n    }\n    if (isObject(gutter[1]) && gutter[1][currentSize] !== undefined) {\n      Object.assign(rowStyle, { rowGap: `${gutter[1][currentSize]}px` });\n    }\n  } else if (isObject(gutter) && gutter[currentSize]) {\n    if (Array.isArray(gutter[currentSize]) && gutter[currentSize].length) {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize][0] / -2}px`,\n        marginRight: `${gutter[currentSize][0] / -2}px`,\n      });\n      Object.assign(rowStyle, { rowGap: `${gutter[currentSize][1]}px` });\n    } else {\n      Object.assign(rowStyle, {\n        marginLeft: `${gutter[currentSize] / -2}px`,\n        marginRight: `${gutter[currentSize] / -2}px`,\n      });\n    }\n  }\n  return rowStyle;\n};\n\nexport const RowContext = createContext({ gutter: undefined, size: undefined });\n\nconst Row = forwardRef((props: RowProps, ref) => {\n  const { align, gutter, justify, tag, style: propStyle, className, children, ...otherRowProps } = props;\n\n  const [size, setSize] = useState(canUseDocument ? calcSize(window.innerWidth) : 'md');\n\n  const updateSize = () => {\n    const currentSize = calcSize(window.innerWidth);\n    if (currentSize !== size) {\n      setSize(size);\n    }\n  };\n\n  const { classPrefix } = useConfig();\n  const rowClassNames = classNames(`${classPrefix}-row`, className, {\n    [`${classPrefix}-row--${justify}`]: true,\n    [`${classPrefix}-row--${align}`]: true,\n  });\n  const rowStyle = {\n    ...calcRowStyle(gutter, size),\n    ...propStyle,\n  };\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSize);\n    return () => {\n      window.removeEventListener('resize', updateSize);\n    };\n  });\n\n  return React.createElement(\n    tag,\n    {\n      ref,\n      className: rowClassNames,\n      style: rowStyle,\n      ...otherRowProps,\n    },\n    <RowContext.Provider value={{ gutter, size }}>{children}</RowContext.Provider>,\n  );\n});\n\nRow.displayName = 'Row';\nRow.defaultProps = rowDefaultProps;\n\nexport default Row;\n"],"names":["calcSize","width","smWidth","getCssVarsValue","mdWidth","lgWidth","xlWidth","xxlWidth","size","calcRowStyle","gutter","currentSize","rowStyle","Object","assign","marginLeft","marginRight","Array","isArray","length","rowGap","isObject","RowContext","createContext","Row","forwardRef","props","ref","align","justify","tag","propStyle","style","className","children","otherRowProps","useState","canUseDocument","window","innerWidth","setSize","updateSize","useConfig","classPrefix","rowClassNames","classNames","useEffect","addEventListener","removeEventListener","React","createElement","Provider","value","displayName","defaultProps","rowDefaultProps"],"mappings":"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"}