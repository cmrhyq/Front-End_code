{"version":3,"file":"SubMenu.js","sources":["../../src/menu/SubMenu.tsx"],"sourcesContent":["import React, { FC, useContext, useState, ReactElement, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { StyledProps } from '../common';\nimport { TdSubmenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport { MenuContext } from './MenuContext';\nimport useRipple from '../_util/useRipple';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport FakeArrow from '../common/FakeArrow';\nimport { checkIsSubMenu, checkIsMenuGroup } from './_util/checkMenuType';\nimport { cacularPaddingLeft } from './_util/cacularPaddingLeft';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1 } = props;\n  const { classPrefix } = useConfig();\n\n  // popup 状态下控制开关\n  const [open, setOpen] = useState(false);\n  const { expanded = [], onExpand, active, expandType } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n  };\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const childrens = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = cacularPaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  return (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      onClick={handleClick}\n      style={style}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n      >\n        {icon} <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={isOpen} disabled={disabled} />\n      </div>\n      {isPopUp ? (\n        <div\n          className={classNames(`${classPrefix}-menu__popup`, `${classPrefix}-is-vertical`, {\n            [`${classPrefix}-is-opened`]: isOpen,\n          })}\n        >\n          <ul\n            className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n              [`${classPrefix}-is-opened`]: isOpen,\n            })}\n            key=\"popup\"\n            style={childStyle}\n          >\n            {childrens}\n          </ul>\n        </div>\n      ) : (\n        <ul\n          key=\"normal\"\n          style={{ ...childStyle, '--padding-left': `${menuPaddingLeft}px` } as React.CSSProperties}\n          className={`${classPrefix}-menu__sub`}\n        >\n          {childrens}\n        </ul>\n      )}\n    </li>\n  );\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, title, value, level } = props;\n  const { active, onChange, expandType } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n  const [open, setOpen] = useState(false);\n  const popRef = useRef<HTMLUListElement>();\n\n  const handleClick = () => onChange(value);\n\n  // 斜八角动画\n  const subMenuRef = useRef();\n  useRipple(subMenuRef);\n\n  // pupup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const submenuMaxHeight = getSubMenuMaxHeight(children);\n  const popupMaxHeight = popRef.current?.getBoundingClientRect().height || submenuMaxHeight;\n  const showPopup = isPopUp && submenuMaxHeight > 0;\n\n  return (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        ref={subMenuRef}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        <span>{title}</span>\n        {showPopup && <FakeArrow style={fakeArrowStyle} isActive={open} />}\n      </div>\n      {showPopup && (\n        <div\n          className={classNames(`${classPrefix}-menu__popup`, {\n            [`${classPrefix}-is-opened`]: open,\n          })}\n          style={{ '--popup-max-height': `${popupMaxHeight}px` } as React.CSSProperties}\n        >\n          <ul ref={popRef} className={classNames(`${classPrefix}-menu__popup-wrapper`)}>\n            {children}\n          </ul>\n        </div>\n      )}\n    </li>\n  );\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","children","disabled","icon","title","value","className","style","level","useConfig","classPrefix","useState","open","setOpen","useContext","MenuContext","expanded","onExpand","active","expandType","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleMouseEvent","type","childrens","React","Children","map","child","cloneElement","classNames","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","cacularPaddingLeft","fakeArrowStyle","transform","createElement","onClick","onMouseEnter","onMouseLeave","checkSubMenuChildrenActive","FakeArrow","isActive","key","SubTitleMenu","onChange","popRef","useRef","subMenuRef","useRipple","submenuMaxHeight","popupMaxHeight","current","getBoundingClientRect","height","showPopup","ref","SubMenu","mode","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}