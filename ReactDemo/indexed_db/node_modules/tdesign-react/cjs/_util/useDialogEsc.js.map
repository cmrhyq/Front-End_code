{"version":3,"file":"useDialogEsc.js","sources":["../../src/_util/useDialogEsc.ts"],"sourcesContent":["import { useEffect, MutableRefObject } from 'react';\n\nconst dialogSet: Set<MutableRefObject<HTMLDivElement>> = new Set();\n\nconst useDialogEsc = (visible: boolean, dialog: MutableRefObject<HTMLDivElement>) => {\n  useEffect(() => {\n    if (visible) {\n      // 将 dialog 添加至 Set 对象\n      if (dialog?.current) {\n        dialogSet.add(dialog);\n        dialog?.current?.focus();\n      }\n    } else if (dialogSet.has(dialog)) {\n      // 将 dialog 从 Set 对象删除\n      dialogSet.delete(dialog);\n      const dialogList = [...dialogSet];\n      // 将 Set 对象中最后一个 dialog 设置为 focus\n      dialogList[dialogList.length - 1]?.current?.focus();\n    }\n    return () => {\n      // 从 Set 对象删除无效的 dialog\n      dialogSet.forEach((item) => {\n        if (item.current === null) {\n          dialogSet.delete(item);\n        }\n      });\n    };\n  }, [visible, dialog]);\n};\n\nexport default useDialogEsc;\n"],"names":["dialogSet","Set","useDialogEsc","visible","dialog","useEffect","current","add","focus","has","dialogList","length","forEach","item"],"mappings":";;;;;;;;;;;;;;;AAEA,IAAMA,SAAA,sBAAuDC,KAA7D,CAAA;;AAEMC,IAAAA,YAAA,GAAe,SAAfA,YAAe,CAACC,OAAD,EAAmBC,MAAnB,EAAgE;AACnFC,EAAAA,eAAA,CAAU,YAAM;AACd,IAAA,IAAIF,OAAJ,EAAa;AAEX,MAAA,IAAIC,MAAJ,KAAIA,IAAAA,IAAAA,MAAJ,eAAIA,OAAQE,OAAZ,EAAqB;AAAA,QAAA,IAAA,eAAA,CAAA;;QACnBN,SAAA,CAAUO,GAAV,CAAcH,MAAd,CAAA,CAAA;QACAA,MAAA,KAAA,IAAA,IAAAA,MAAA,KAAA,KAAA,CAAA,+BAAAA,MAAA,CAAQE,OAAR,MAAA,IAAA,IAAA,eAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,eAAA,CAAiBE,KAAjB,EAAA,CAAA;AACF,OAAA;KALF,MAMW,IAAAR,SAAA,CAAUS,GAAV,CAAcL,MAAd,CAAA,EAAuB;AAAA,MAAA,IAAA,WAAA,EAAA,mBAAA,CAAA;;MAEhCJ,SAAA,CAAA,QAAA,CAAA,CAAiBI,MAAjB,CAAA,CAAA;;MACM,IAAAM,UAAA,GAAiBV,oCAAAA,CAAAA,SAAjB,CAAA,CAAA;;MAEN,CAAAU,WAAAA,GAAAA,UAAA,CAAWA,UAAW,CAAAC,MAAX,GAAoB,CAA/B,CAAA,MAAA,IAAA,IAAA,WAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,mBAAA,GAAA,WAAA,CAAmCL,OAAnC,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,mBAAA,CAA4CE,KAA5C,EAAA,CAAA;AACF,KAAA;;AACA,IAAA,OAAO,YAAM;AAEDR,MAAAA,SAAA,CAAAY,OAAA,CAAQ,UAACC,IAAD,EAAU;AACtB,QAAA,IAAAA,IAAA,CAAKP,OAAL,KAAiB,IAAjB,EAAuB;UACzBN,SAAA,CAAA,QAAA,CAAA,CAAiBa,IAAjB,CAAA,CAAA;AACF,SAAA;OAHQ,CAAA,CAAA;KAFZ,CAAA;AAQC,GAtBH,EAsBG,CAACV,OAAD,EAAUC,MAAV,CAtBH,CAAA,CAAA;AAuBF;;;;"}