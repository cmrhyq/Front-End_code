{"version":3,"file":"useSetState.js","sources":["../../src/_util/useSetState.ts"],"sourcesContent":["import { useCallback, useState } from 'react';\n\nconst isFunction = (arg: unknown) => typeof arg === 'function';\n\n/**\n * 管理 object 类型 state 的 Hooks，用法与 class 组件的 this.setState 基本一致。\n * @param initialState\n * @returns [state, setMergeState]\n */\nconst useSetState = <T extends object>(\n  initialState: T = {} as T,\n): [T, (patch: Partial<T> | ((prevState: T) => Partial<T>)) => void] => {\n  const [state, setState] = useState<T>(initialState);\n\n  const setMergeState = useCallback((patch) => {\n    setState((prevState) => ({ ...prevState, ...(isFunction(patch) ? patch(prevState) : patch) }));\n  }, []);\n\n  return [state, setMergeState];\n};\n\nexport default useSetState;\n"],"names":["isFunction","arg","useSetState","initialState","useState","_slicedToArray","state","setState","setMergeState","useCallback","patch","prevState"],"mappings":";;;;;;;;;;;;;;;;;;;AAEA,IAAMA,UAAa,GAAA,SAAbA,UAAa,CAACC,GAAD,EAAA;EAAA,OAAkB,OAAOA,GAAP,KAAe,UAAjC,CAAA;AAAA,CAAnB,CAAA;;AAOA,IAAMC,WAAc,GAAA,SAAdA,WAAc,GAEoD;EAAA,IADtEC,YACsE,uEADpD,EACoD,CAAA;;EACtE,IAA0BC,SAAAA,GAAAA,eAAYD,aAAtC;AAAA,MAAA,UAAA,GAAAE,4BAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAAOC,KAAP,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAAcC,QAAd,GAAA,UAAA,CAAA,CAAA,CAAA,CAAA;;AAEM,EAAA,IAAAC,aAAA,GAAgBC,iBAAY,CAAA,UAACC,KAAD,EAAW;IAC3CH,QAAA,CAAS,UAACI,SAAD,EAAA;AAAA,MAAA,OAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAqBA,SAArB,CAAA,EAAoCX,UAAW,CAAAU,KAAA,CAAX,GAAoBA,KAAA,CAAMC,SAAN,CAApB,GAAuCD,KAA3E,CAAA,CAAA;AAAA,KAAT,CAAA,CAAA;GADgC,EAE/B,EAF+B,CAA5B,CAAA;AAIC,EAAA,OAAA,CAACJ,KAAD,EAAQE,aAAR,CAAA,CAAA;AACT;;;;"}