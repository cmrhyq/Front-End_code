{"version":3,"file":"InputNumber.js","sources":["../../src/input-number/InputNumber.tsx"],"sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef, ForwardedRef } from 'react';\nimport {\n  ChevronDownIcon as TdChevronDownIcon,\n  RemoveIcon as TdRemoveIcon,\n  ChevronUpIcon as TdChevronUpIcon,\n  AddIcon as TdAddIcon,\n} from 'tdesign-icons-react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport Button from '../button';\nimport useInputNumber from './useInputNumber';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { inputNumberDefaultProps } from './defaultProps';\nimport { InputNumberValue, TdInputNumberProps } from './type';\nimport { StyledProps } from '../common';\n\nexport interface InputNumberProps<T = InputNumberValue> extends TdInputNumberProps<T>, StyledProps {}\n\nexport interface InputNumberRef {\n  currentElement: ForwardedRef<HTMLDivElement>;\n  inputElement: ForwardedRef<HTMLDivElement>;\n}\n\n// https://fettblog.eu/typescript-react-generic-forward-refs/\nfunction TdInputNumber<T extends InputNumberValue = InputNumberValue>(\n  props: InputNumberProps<T>,\n  ref: ForwardedRef<InputNumberRef>,\n) {\n  const { ChevronDownIcon, RemoveIcon, ChevronUpIcon, AddIcon } = useGlobalIcon({\n    ChevronDownIcon: TdChevronDownIcon,\n    RemoveIcon: TdRemoveIcon,\n    ChevronUpIcon: TdChevronUpIcon,\n    AddIcon: TdAddIcon,\n  });\n  const {\n    classPrefix,\n    wrapClasses,\n    addClasses,\n    reduceClasses,\n    listeners,\n    isError,\n    inputRef,\n    userInput,\n    handleAdd,\n    handleReduce,\n    onInnerInputChange,\n  } = useInputNumber(props);\n\n  const wrapRef = useRef(null);\n\n  const status = isError ? 'error' : props.status;\n  const addIcon = props.theme === 'column' ? <ChevronUpIcon size={props.size} /> : <AddIcon size={props.size} />;\n  const reduceIcon =\n    props.theme === 'column' ? <ChevronDownIcon size={props.size} /> : <RemoveIcon size={props.size} />;\n\n  useImperativeHandle(ref, () => ({\n    currentElement: wrapRef.current,\n    inputElement: inputRef.current,\n  }));\n\n  return (\n    <div className={classNames(wrapClasses, props.className)} style={props.style} ref={wrapRef}>\n      {props.theme !== 'normal' && (\n        <Button\n          className={reduceClasses}\n          disabled={props.disabled}\n          onClick={handleReduce}\n          variant=\"outline\"\n          shape=\"square\"\n          icon={reduceIcon}\n        />\n      )}\n      <Input\n        ref={inputRef}\n        autocomplete=\"off\"\n        disabled={props.disabled}\n        readonly={props.readonly}\n        placeholder={props.placeholder}\n        autoWidth={props.autoWidth}\n        align={props.align || (props.theme === 'row' ? 'center' : undefined)}\n        status={status}\n        label={props.label}\n        suffix={props.suffix}\n        value={userInput}\n        onChange={onInnerInputChange}\n        size={props.size}\n        {...listeners}\n        {...(props.inputProps || {})}\n      />\n      {props.theme !== 'normal' && (\n        <Button\n          className={addClasses}\n          disabled={props.disabled}\n          onClick={handleAdd}\n          variant=\"outline\"\n          shape=\"square\"\n          icon={addIcon}\n        />\n      )}\n      {props.tips && (\n        <div className={classNames(`${classPrefix}-input__tips`, `${classPrefix}-input__tips--${status}`)}>\n          {props.tips}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport type InputNumberOuterForwardRef = {\n  <T>(props: InputNumberProps<T> & { ref?: ForwardedRef<InputNumberRef> }): ReturnType<typeof TdInputNumber>;\n} & React.ForwardRefExoticComponent<InputNumberProps>;\n\nconst InputNumber = forwardRef(TdInputNumber) as InputNumberOuterForwardRef;\n\nInputNumber.displayName = 'InputNumber';\nInputNumber.defaultProps = inputNumberDefaultProps;\n\nexport default InputNumber;\n"],"names":["TdInputNumber","props","ref","useGlobalIcon","ChevronDownIcon","TdChevronDownIcon","RemoveIcon","TdRemoveIcon","ChevronUpIcon","TdChevronUpIcon","AddIcon","TdAddIcon","useInputNumber","classPrefix","wrapClasses","addClasses","reduceClasses","listeners","isError","inputRef","userInput","handleAdd","handleReduce","onInnerInputChange","wrapRef","useRef","status","addIcon","theme","React","createElement","size","reduceIcon","useImperativeHandle","currentElement","current","inputElement","className","classNames","style","Button","disabled","onClick","variant","shape","icon","Input","autocomplete","readonly","placeholder","autoWidth","align","label","suffix","value","onChange","inputProps","tips","InputNumber","forwardRef","displayName","defaultProps","inputNumberDefaultProps"],"mappings":"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"}