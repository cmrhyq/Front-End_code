{"version":3,"file":"List.js","sources":["../../src/list/List.tsx"],"sourcesContent":["import React, { MouseEvent, WheelEvent } from 'react';\nimport classNames from 'classnames';\n\nimport isString from 'lodash/isString';\nimport useConfig from '../hooks/useConfig';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport noop from '../_util/noop';\nimport { TdListProps } from './type';\nimport { StyledProps } from '../common';\nimport Loading from '../loading';\nimport ListItem from './ListItem';\nimport ListItemMeta from './ListItemMeta';\nimport { listDefaultProps } from './defaultProps';\n\nexport interface ListProps extends TdListProps, StyledProps {\n  /**\n   * 文本内容\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * 列表组件\n */\nconst List = forwardRefWithStatics(\n  (props: ListProps, ref: React.Ref<HTMLDivElement>) => {\n    const {\n      header,\n      footer,\n      asyncLoading,\n      size,\n      split,\n      stripe,\n      layout,\n      children,\n      className,\n      onLoadMore = noop,\n      onScroll = noop,\n      style,\n    } = props;\n\n    const { classPrefix } = useConfig();\n    const [local, t] = useLocaleReceiver('list');\n\n    const handleClickLoad = (e: MouseEvent<HTMLDivElement>) => {\n      if (asyncLoading === 'load-more') {\n        onLoadMore({ e });\n      }\n    };\n\n    const handleScroll = (event: WheelEvent<HTMLDivElement>): void => {\n      const { currentTarget } = event;\n      const { scrollTop, offsetHeight, scrollHeight } = currentTarget;\n      const scrollBottom = scrollHeight - scrollTop - offsetHeight;\n      onScroll({ e: event, scrollTop, scrollBottom });\n    };\n\n    const loadElement = isString(asyncLoading) ? (\n      <div\n        className={classNames(`${classPrefix}-list__load`, {\n          [`${classPrefix}-list__load--loading`]: asyncLoading === 'loading',\n          [`${classPrefix}-list__load--load-more`]: asyncLoading === 'load-more',\n        })}\n        onClick={handleClickLoad}\n      >\n        {asyncLoading === 'loading' && (\n          <div>\n            <Loading loading={true} />\n            <span>{t(local.loadingText)}</span>\n          </div>\n        )}\n        {asyncLoading === 'load-more' && <span>{t(local.loadingMoreText)}</span>}\n      </div>\n    ) : (\n      asyncLoading\n    );\n\n    return (\n      <div\n        ref={ref}\n        style={style}\n        onScroll={handleScroll}\n        className={classNames(`${classPrefix}-list`, className, {\n          [`${classPrefix}-list--split`]: split,\n          [`${classPrefix}-list--stripe`]: stripe,\n          [`${classPrefix}-list--vertical-action`]: layout === 'vertical',\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n        })}\n      >\n        {header && <div className={`${classPrefix}-list__header`}>{header}</div>}\n        <ul className={`${classPrefix}-list__inner`}>{children}</ul>\n        {asyncLoading && loadElement}\n        {footer && <div className={`${classPrefix}-list__footer`}>{footer}</div>}\n      </div>\n    );\n  },\n  { ListItem, ListItemMeta },\n);\n\nList.displayName = 'List';\nList.defaultProps = listDefaultProps;\n\nexport default List;\n"],"names":["List","forwardRefWithStatics","props","ref","header","footer","asyncLoading","size","split","stripe","layout","children","className","onLoadMore","noop","onScroll","style","useConfig","classPrefix","useLocaleReceiver","_slicedToArray","local","t","handleClickLoad","e","handleScroll","event","currentTarget","scrollTop","offsetHeight","scrollHeight","scrollBottom","loadElement","isString","React","createElement","classNames","_defineProperty","onClick","Loading","loading","loadingText","loadingMoreText","ListItem","ListItemMeta","displayName","defaultProps","listDefaultProps"],"mappings":"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"}