{"version":3,"file":"CalendarCellComp.js","sources":["../../src/calendar/CalendarCellComp.tsx"],"sourcesContent":["import React, { MouseEvent } from 'react';\nimport { CalendarCell, TdCalendarProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport usePrefixClass from './hooks/usePrefixClass';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport { blockName } from './_util';\n\ntype extendType = Required<Pick<TdCalendarProps, 'fillWithZero' | 'mode' | 'theme' | 'cell' | 'cellAppend'>>;\ninterface CalendarCellProps extends extendType {\n  cellData: CalendarCell;\n  isCurrent: boolean;\n  isNow: boolean;\n  isDisabled?: boolean;\n  createCalendarCell: (cellData: CalendarCell) => CalendarCell;\n  onCellClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellDoubleClick: (e: MouseEvent<HTMLDivElement>) => void;\n  onCellRightClick: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nconst CalendarCellComp: React.FC<CalendarCellProps> = (props) => {\n  const {\n    mode,\n    cell,\n    cellAppend,\n    theme,\n    isDisabled = false,\n    cellData,\n    isCurrent,\n    isNow,\n    fillWithZero,\n    createCalendarCell,\n    onCellClick,\n    onCellDoubleClick,\n    onCellRightClick,\n  } = props;\n\n  const [local, t] = useLocaleReceiver('calendar');\n  const monthLabelList = t(local.cellMonth).split(',');\n  /**\n   * 将 month 映射为文字输出\n   * @param month 月份下标值（起始值为0）\n   */\n  const getMonthCN = (month: number): string => monthLabelList[month];\n\n  const { calendar: calendarConfig } = useConfig();\n  const fix0 = (num: number) => {\n    const fillZero = num < 10 && (fillWithZero ?? calendarConfig.fillWithZero ?? true);\n    return fillZero ? `0${num}` : num;\n  };\n\n  const prefixCls = usePrefixClass();\n\n  return (\n    <td\n      className={prefixCls(\n        [blockName, 'table-body-cell'],\n        isDisabled ? 'is-disabled' : null,\n        isCurrent ? 'is-checked' : null,\n        isNow ? [blockName, 'table-body-cell--now'] : null,\n      )}\n      onClick={onCellClick}\n      onDoubleClick={onCellDoubleClick}\n      onContextMenu={onCellRightClick}\n    >\n      {(() => {\n        if (cell && typeof cell === 'function') return cell(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        if (cell && typeof cell !== 'function') return cell;\n        let cellCtx;\n        if (mode === 'year') {\n          // year mode：输出月\n          const mIndex = cellData.date.getMonth();\n          cellCtx = theme === 'full' ? getMonthCN(mIndex) : t(local.monthSelection, { month: `${mIndex + 1}` });\n        } else {\n          // month mode：输出天\n          cellCtx = fix0(cellData.date.getDate());\n        }\n        return <div className={prefixCls([blockName, 'table-body-cell-display'])}>{cellCtx}</div>;\n      })()}\n      {(() => {\n        let cellCtx;\n        if (cellAppend && typeof cellAppend === 'function') {\n          cellCtx = cellAppend(mode === 'month' ? createCalendarCell(cellData) : cellData);\n        }\n        if (cellAppend && typeof cellAppend !== 'function') {\n          cellCtx = cellAppend;\n        }\n        return cellAppend && <div className={prefixCls([blockName, 'table-body-cell-content'])}>{cellCtx}</div>;\n      })()}\n    </td>\n  );\n};\n\nexport default CalendarCellComp;\n"],"names":["CalendarCellComp","props","mode","cell","cellAppend","theme","isDisabled","cellData","isCurrent","isNow","fillWithZero","createCalendarCell","onCellClick","onCellDoubleClick","onCellRightClick","useLocaleReceiver","_slicedToArray","local","t","monthLabelList","cellMonth","split","getMonthCN","month","useConfig","calendarConfig","calendar","fix0","num","fillZero","prefixCls","usePrefixClass","React","createElement","className","blockName","onClick","onDoubleClick","onContextMenu","cellCtx","mIndex","date","getMonth","monthSelection","getDate"],"mappings":"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"}