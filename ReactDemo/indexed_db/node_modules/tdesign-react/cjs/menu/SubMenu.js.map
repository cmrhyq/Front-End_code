{"version":3,"file":"SubMenu.js","sources":["../../src/menu/SubMenu.tsx"],"sourcesContent":["import React, { FC, useContext, useState, ReactElement, useMemo, useRef } from 'react';\nimport classNames from 'classnames';\nimport { StyledProps } from '../common';\nimport { TdSubmenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport { MenuContext } from './MenuContext';\nimport useRipple from '../_util/useRipple';\nimport { getSubMenuMaxHeight } from './_util/getSubMenuChildStyle';\nimport checkSubMenuChildrenActive from './_util/checkSubMenuChildrenActive';\nimport FakeArrow from '../common/FakeArrow';\nimport { checkIsSubMenu, checkIsMenuGroup } from './_util/checkMenuType';\nimport { cacularPaddingLeft } from './_util/cacularPaddingLeft';\n\nexport interface SubMenuProps extends TdSubmenuProps, StyledProps {}\n\nexport interface SubMenuWithCustomizeProps extends SubMenuProps {\n  level?: number;\n}\n\nconst SubAccordion: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { content, children = content, disabled, icon, title, value, className, style, level = 1 } = props;\n  const { classPrefix } = useConfig();\n\n  // popup 状态下控制开关\n  const [open, setOpen] = useState(false);\n  const { expanded = [], onExpand, active, expandType } = useContext(MenuContext);\n\n  const isPopUp = expandType === 'popup';\n\n  // 非 popup 展开\n  const isExpand = expanded.includes(value) && !disabled && !isPopUp;\n\n  const handleClick = (e: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    e.stopPropagation();\n    onExpand(value, expanded);\n  };\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const childrens = React.Children.map(children, (child) =>\n    React.cloneElement(child as ReactElement, {\n      className: classNames(\n        `${classPrefix}-menu__item--plain`,\n        `${classPrefix}-submenu__item`,\n        `${classPrefix}-submenu__item--icon`,\n      ),\n    }),\n  );\n\n  // 计算有多少子节点并设置最大高度，为做出动画效果\n  const childStyle = {\n    maxHeight: isExpand || (open && isPopUp) ? getSubMenuMaxHeight(children) : 0,\n  };\n\n  // 是否展开（popup 与 expand 两种状态）\n  const isOpen = useMemo(() => {\n    if (disabled) return false;\n    if (isPopUp) return open;\n    return isExpand;\n  }, [disabled, isPopUp, open, isExpand]);\n\n  // 计算左边距，兼容多层级子菜单\n  const menuPaddingLeft = cacularPaddingLeft(level - 1);\n\n  const fakeArrowStyle = isPopUp && level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  return (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-disabled`]: disabled,\n        [`${classPrefix}-is-opened`]: isOpen,\n      })}\n      onClick={handleClick}\n      style={style}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-opened`]: isOpen,\n          [`${classPrefix}-is-active`]: checkSubMenuChildrenActive(children, active),\n        })}\n      >\n        {icon} <span className={`${classPrefix}-menu__content`}>{title}</span>\n        <FakeArrow style={fakeArrowStyle} isActive={isOpen} disabled={disabled} />\n      </div>\n      {isPopUp ? (\n        <div\n          className={classNames(`${classPrefix}-menu__popup`, `${classPrefix}-is-vertical`, {\n            [`${classPrefix}-is-opened`]: isOpen,\n          })}\n        >\n          <ul\n            className={classNames(`${classPrefix}-menu__popup-wrapper`, {\n              [`${classPrefix}-is-opened`]: isOpen,\n            })}\n            key=\"popup\"\n            style={childStyle}\n          >\n            {childrens}\n          </ul>\n        </div>\n      ) : (\n        <ul\n          key=\"normal\"\n          style={{ ...childStyle, '--padding-left': `${menuPaddingLeft}px` } as React.CSSProperties}\n          className={`${classPrefix}-menu__sub`}\n        >\n          {childrens}\n        </ul>\n      )}\n    </li>\n  );\n};\n\nconst SubTitleMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { className, style, children, title, value, level } = props;\n  const { active, onChange, expandType } = useContext(MenuContext);\n  const { classPrefix } = useConfig();\n  const [open, setOpen] = useState(false);\n  const popRef = useRef<HTMLUListElement>();\n\n  const handleClick = () => onChange(value);\n\n  // 斜八角动画\n  const subMenuRef = useRef();\n  useRipple(subMenuRef);\n\n  // pupup 导航\n  const isPopUp = expandType === 'popup';\n  // 当前二级导航激活\n  const isActive = checkSubMenuChildrenActive(children, active) || active === value;\n\n  const handleMouseEvent = (type: 'leave' | 'enter') => {\n    if (!isPopUp) return;\n    if (type === 'enter') setOpen(true);\n    else if (type === 'leave') setOpen(false);\n  };\n\n  const fakeArrowStyle = level > 1 ? { transform: 'rotate(-90deg)' } : {};\n\n  const submenuMaxHeight = getSubMenuMaxHeight(children);\n  const popupMaxHeight = popRef.current?.getBoundingClientRect().height || submenuMaxHeight;\n  const showPopup = isPopUp && submenuMaxHeight > 0;\n\n  return (\n    <li\n      className={classNames(`${classPrefix}-submenu`, className, {\n        [`${classPrefix}-is-opened`]: open,\n      })}\n      onMouseEnter={() => handleMouseEvent('enter')}\n      onMouseLeave={() => handleMouseEvent('leave')}\n    >\n      <div\n        ref={subMenuRef}\n        className={classNames(`${classPrefix}-menu__item`, {\n          [`${classPrefix}-is-active`]: isActive,\n          [`${classPrefix}-is-opened`]: open,\n        })}\n        onClick={handleClick}\n        style={style}\n      >\n        <span>{title}</span>\n        {showPopup && <FakeArrow style={fakeArrowStyle} isActive={open} />}\n      </div>\n      {showPopup && (\n        <div\n          className={classNames(`${classPrefix}-menu__popup`, {\n            [`${classPrefix}-is-opened`]: open,\n          })}\n          style={{ '--popup-max-height': `${popupMaxHeight}px` } as React.CSSProperties}\n        >\n          <ul ref={popRef} className={classNames(`${classPrefix}-menu__popup-wrapper`)}>\n            {children}\n          </ul>\n        </div>\n      )}\n    </li>\n  );\n};\n\nconst SubMenu: FC<SubMenuWithCustomizeProps> = (props) => {\n  const { mode } = useContext(MenuContext);\n  const { children, level = 1 } = props;\n\n  const changeItemLevel = (item: React.ReactElement) => {\n    if (checkIsSubMenu(item)) {\n      return React.cloneElement(item, {\n        level: level + 1,\n      });\n    }\n    if (checkIsMenuGroup(item)) {\n      const groupChildren = React.Children.map(item.props.children, (item: React.ReactElement) =>\n        changeItemLevel(item),\n      );\n      return React.cloneElement(\n        item,\n        {\n          level: level + 1,\n        },\n        groupChildren,\n      );\n    }\n    return item;\n  };\n\n  // 如果是第二层及以及的 subMenu 需要添加 notFirstLevelSubMenu 属性\n  const childElement = React.Children.map(children, (item: React.ReactElement) => changeItemLevel(item));\n\n  if (mode === 'accordion') return <SubAccordion {...props}>{childElement}</SubAccordion>;\n  if (mode === 'title') return <SubTitleMenu {...props}>{childElement}</SubTitleMenu>;\n  return null;\n};\n\nSubMenu.displayName = 'SubMenu';\n\nexport default SubMenu;\n"],"names":["SubAccordion","props","content","children","disabled","icon","title","value","className","style","level","useConfig","classPrefix","useState","_slicedToArray","open","setOpen","useContext","MenuContext","expanded","onExpand","active","expandType","isPopUp","isExpand","includes","handleClick","e","stopPropagation","handleMouseEvent","type","childrens","React","Children","map","child","cloneElement","classNames","childStyle","maxHeight","getSubMenuMaxHeight","isOpen","useMemo","menuPaddingLeft","cacularPaddingLeft","fakeArrowStyle","transform","createElement","_defineProperty","onClick","onMouseEnter","onMouseLeave","checkSubMenuChildrenActive","FakeArrow","isActive","key","SubTitleMenu","onChange","popRef","useRef","subMenuRef","useRipple","submenuMaxHeight","popupMaxHeight","current","getBoundingClientRect","height","showPopup","ref","SubMenu","mode","changeItemLevel","item","checkIsSubMenu","checkIsMenuGroup","groupChildren","childElement","displayName"],"mappings":"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"}