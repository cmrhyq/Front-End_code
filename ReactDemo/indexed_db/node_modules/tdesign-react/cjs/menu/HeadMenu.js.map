{"version":3,"file":"HeadMenu.js","sources":["../../src/menu/HeadMenu.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactElement, useMemo } from 'react';\nimport isObject from 'lodash/isObject';\nimport Tabs from '../tabs';\nimport { StyledProps } from '../common';\nimport { TdHeadMenuProps } from './type';\nimport useConfig from '../hooks/useConfig';\nimport useMenuContext from './hooks/useMenuContext';\nimport { MenuContext } from './MenuContext';\nimport checkSubMenuActive from './_util/checkSubMenuActive';\n\nconst { TabPanel } = Tabs;\n\nexport interface HeadMenuProps extends TdHeadMenuProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst HeadMenu: FC<HeadMenuProps> = (props) => {\n  const { children, className, theme = 'light', style, logo, operations } = props;\n  const { classPrefix } = useConfig();\n  const { value } = useMenuContext({ ...props, children, mode: 'title' });\n\n  const childList: ReactElement[] | null = useMemo(() => {\n    if (value.expandType === 'popup') return null;\n    const activeMenu: ReactElement = checkSubMenuActive(children, value.active);\n    if (!activeMenu) return null;\n    const child = activeMenu.props.children;\n    if (Array.isArray(child)) return child;\n    if (isObject(child)) return [child];\n    return activeMenu.props.children;\n  }, [children, value.expandType, value.active]);\n\n  const currentChildListValues = childList?.length > 0 ? childList.map((item) => item.props.value) : [];\n\n  return (\n    <MenuContext.Provider value={value}>\n      <div\n        className={classNames(`${classPrefix}-head-menu`, `${classPrefix}-menu--${theme}`, className)}\n        style={{ ...style }}\n      >\n        <div className={`${classPrefix}-head-menu__inner`}>\n          {logo && <div className={`${classPrefix}-menu__logo`}>{logo}</div>}\n          <ul className={`${classPrefix}-menu`}>{children}</ul>\n          {operations && <div className={`${classPrefix}-menu__operations`}>{operations}</div>}\n        </div>\n        {childList?.length > 0 && (\n          <ul className={`${classPrefix}-head-menu__submenu ${classPrefix}-submenu`}>\n            <Tabs\n              value={currentChildListValues.includes(value.active) ? value.active : currentChildListValues[0]}\n              onChange={value.onChange}\n            >\n              {childList.map(({ props }) => (\n                <TabPanel value={props.value} key={props.value} label={props.children}></TabPanel>\n              ))}\n            </Tabs>\n          </ul>\n        )}\n      </div>\n    </MenuContext.Provider>\n  );\n};\n\nexport default HeadMenu;\n"],"names":["TabPanel","Tabs","HeadMenu","props","children","className","theme","style","logo","operations","useConfig","classPrefix","useMenuContext","mode","value","childList","useMemo","expandType","activeMenu","checkSubMenuActive","active","child","Array","isArray","isObject","currentChildListValues","length","map","item","React","createElement","MenuContext","Provider","classNames","includes","onChange","key","label"],"mappings":"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"}