{"version":3,"file":"Timeline.js","sources":["../../src/timeline/Timeline.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React from 'react';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport TimelineItem from './TimelineItem';\nimport { TdTimelineProps } from './type';\nimport TimelineContext from './TimelineContext';\nimport forwardRefWithStatics from '../_util/forwardRefWithStatics';\nimport { useAlign } from './useAlign';\n\nexport interface TimelineProps extends TdTimelineProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst Timeline = forwardRefWithStatics(\n  (props: TimelineProps, ref: React.Ref<HTMLUListElement>) => {\n    const {\n      theme = 'default',\n      labelAlign,\n      children,\n      className,\n      style,\n      reverse = false,\n      layout = 'vertical',\n      mode = 'alternate',\n    } = props;\n    const { classPrefix } = useConfig();\n    const renderAlign = useAlign(labelAlign, layout);\n\n    const timelineItems = React.Children.toArray(children).filter(\n      (child: JSX.Element) => child.type.displayName === TimelineItem.displayName,\n    );\n    // 获取所有子节点类型\n    const itemsStatus = React.Children.map(timelineItems, (child: JSX.Element) => child.props?.dotColor || 'primary');\n    const hasLabelItem = timelineItems.some((item: React.ReactElement<any>) => !!item?.props?.label);\n\n    if (reverse) {\n      timelineItems.reverse();\n    }\n\n    const itemsCounts = React.Children.count(timelineItems);\n\n    const timelineClassName = classNames(\n      `${classPrefix}-timeline`,\n      {\n        [`${classPrefix}-timeline-${renderAlign}`]: true,\n        [`${classPrefix}-timeline-reverse`]: reverse,\n        [`${classPrefix}-timeline-${layout}`]: true,\n        [`${classPrefix}-timeline-label`]: hasLabelItem,\n        [`${classPrefix}-timeline-label--${mode}`]: true,\n      },\n      className,\n    );\n\n    return (\n      <TimelineContext.Provider value={{ theme, reverse, itemsStatus, layout, globalAlign: labelAlign, mode }}>\n        <ul className={timelineClassName} style={style} ref={ref}>\n          {React.Children.map(timelineItems, (ele: JSX.Element, index) =>\n            React.cloneElement(ele, {\n              index,\n              className: classNames([ele?.props?.className], {\n                [`${classPrefix}-timeline-item--last`]: index === itemsCounts - 1,\n              }),\n            }),\n          )}\n        </ul>\n      </TimelineContext.Provider>\n    );\n  },\n  {\n    Item: TimelineItem,\n  },\n);\n\nTimeline.displayName = 'Timeline';\n\nexport default Timeline;\n"],"names":["Timeline","forwardRefWithStatics","props","ref","theme","labelAlign","children","className","style","reverse","layout","mode","useConfig","classPrefix","renderAlign","useAlign","timelineItems","React","Children","toArray","filter","child","type","displayName","TimelineItem","itemsStatus","map","dotColor","hasLabelItem","some","item","label","itemsCounts","count","timelineClassName","classNames","_defineProperty","createElement","TimelineContext","Provider","value","globalAlign","ele","index","cloneElement","Item"],"mappings":"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"}