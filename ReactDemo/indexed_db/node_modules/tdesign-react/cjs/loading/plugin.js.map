{"version":3,"file":"plugin.js","sources":["../../src/loading/plugin.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Loading, { LoadingProps } from './Loading';\nimport { LoadingInstance, TdLoadingProps } from './type';\n\nfunction createContainer(attach?: TdLoadingProps['attach']) {\n  if (typeof attach === 'string') return document.querySelector(attach);\n  if (typeof attach === 'function') return attach();\n  return document.body;\n}\n\nexport type LoadingPluginMethod = (options: boolean | LoadingProps) => LoadingInstance;\n\n// loading plugin形式\nexport const LoadingPlugin: LoadingPluginMethod = (options) => {\n  if (options === false) return { hide: () => null };\n\n  const props = typeof options === 'boolean' ? {} : options;\n  const { attach } = props;\n  const container = createContainer(attach);\n  const div = document.createElement('div');\n  div.setAttribute('style', 'width: 100%; height: 100%; position: absolute; top: 0;');\n\n  const defaultProps = {\n    loading: true,\n    attach: null,\n    fullscreen: !attach,\n    showOverlay: !!attach,\n  };\n\n  ReactDOM.render(<Loading {...defaultProps} {...props} attach={null}></Loading>, div);\n\n  container.appendChild(div);\n\n  return {\n    hide: () => {\n      ReactDOM.unmountComponentAtNode(div);\n      div.remove();\n    },\n  };\n};\n"],"names":["createContainer","attach","document","querySelector","body","LoadingPlugin","options","hide","props","container","div","createElement","setAttribute","defaultProps","loading","fullscreen","showOverlay","ReactDOM","render","React","Loading","appendChild","unmountComponentAtNode","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,SAASA,eAAT,CAAyBC,MAAzB,EAA4D;EAC1D,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAuC,OAAAC,QAAA,CAASC,aAAT,CAAuBF,MAAvB,CAAA,CAAA;AACvC,EAAA,IAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC,OAAOA,MAAO,EAAd,CAAA;EAClC,OAAOC,QAAS,CAAAE,IAAhB,CAAA;AACF,CAAA;;IAKaC,aAAA,GAAqC,SAArCA,aAAqC,CAACC,OAAD,EAAa;AAC7D,EAAA,IAAIA,OAAY,KAAA,KAAhB,EAA8B,OAAA;AAAEC,IAAAA,IAAM,EAAA,SAAA,IAAA,GAAA;AAAA,MAAA,OAAM,IAAN,CAAA;AAAA,KAAA;GAAR,CAAA;EAE9B,IAAMC,KAAQ,GAAA,OAAOF,OAAP,KAAmB,SAAnB,GAA+B,EAA/B,GAAoCA,OAAlD,CAAA;AACM,EAAA,IAAEL,MAAF,GAAaO,KAAb,CAAEP,MAAF,CAAA;AACA,EAAA,IAAAQ,SAAA,GAAYT,gBAAgBC,OAA5B,CAAA;AACA,EAAA,IAAAS,GAAA,GAAMR,QAAS,CAAAS,aAAT,CAAuB,KAAvB,CAAN,CAAA;AACFD,EAAAA,GAAA,CAAAE,YAAA,CAAa,OAAb,EAAsB,wDAAtB,CAAA,CAAA;AAEJ,EAAA,IAAMC,YAAe,GAAA;AACnBC,IAAAA,OAAS,EAAA,IADU;AAEnBb,IAAAA,MAAQ,EAAA,IAFW;IAGnBc,YAAY,CAACd,MAHM;IAInBe,WAAA,EAAa,CAAC,CAACf,MAAAA;GAJjB,CAAA;AAOAgB,EAAAA,4BAAA,CAASC,MAAT,iBAAiBC,yBAAA,CAAAR,aAAA,CAAAS,0BAAA,EAAA,aAAA,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAYP,YAAZ,CAAA,EAA8BL,KAA9B,CAAA,EAAA,EAAA,EAAA;AAAqCP,IAAAA,MAAQ,EAAA,IAAA;AAA7C,GAAA,CAAA,CAAjB,EAAgFS,GAAhF,CAAA,CAAA;EAEAD,SAAA,CAAUY,WAAV,CAAsBX,GAAtB,CAAA,CAAA;EAEO,OAAA;AACLH,IAAAA,MAAM,SAAM,IAAA,GAAA;MACVU,4BAAA,CAASK,sBAAT,CAAgCZ,GAAhC,CAAA,CAAA;AACAA,MAAAA,GAAA,CAAIa,MAAJ,EAAA,CAAA;AACF,KAAA;GAJK,CAAA;AAMT;;;;"}