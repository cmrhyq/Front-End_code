{"version":3,"file":"utils.js","sources":["../../src/transfer/utils.ts"],"sourcesContent":["import isEmpty from 'lodash/isEmpty';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport React from 'react';\nimport { DataOption, TransferValue } from './type';\nimport { TNode } from '../common';\n\nexport const getDefaultValue = <T>(value: T | T[], defaultValue?: T): T[] => {\n  if (isEmpty(value)) {\n    return Array.isArray(defaultValue) ? defaultValue : [defaultValue, defaultValue];\n  }\n\n  if (Array.isArray(value)) return value;\n\n  return [defaultValue, defaultValue];\n};\n\nexport const getJSX = (value: string | TNode) => {\n  if (isString(value)) return value;\n\n  if (isFunction(value)) return value();\n\n  if (React.isValidElement(value)) return value;\n\n  return value;\n};\n\n// 获取所有叶子节点\nexport const getLeafNodes = (nodes: DataOption[]): DataOption[] => {\n  const resData = [];\n  const map = (nodes: DataOption[]) => {\n    nodes.forEach((child) => {\n      if (child.children && child.children.length > 0) {\n        return map(child.children);\n      }\n      resData.push(child);\n    });\n  };\n  map(nodes);\n  return resData;\n};\n\n// tree 过滤 checkeds 数组中的 key\nexport const filterCheckedTreeNodes = (nodes: DataOption[], checkeds: TransferValue[]): DataOption[] =>\n  nodes\n    .filter((item) => !checkeds.includes(item.value))\n    .map((item) => {\n      const newItem = { ...item };\n      if (item.children && item.children.length > 0) {\n        newItem.children = filterCheckedTreeNodes(item.children, checkeds);\n      }\n      return newItem;\n    })\n    .filter((item) => (item.children && item.children.length !== 0) || !item.children);\n\n// 获取目的树结构\nexport const getTargetNodes = (sourceNodes: DataOption[], data: DataOption[]): DataOption[] => {\n  const source = getLeafNodes(sourceNodes).map((item) => item.value);\n  return filterCheckedTreeNodes(data, source);\n};\n"],"names":["getDefaultValue","value","defaultValue","isEmpty","Array","isArray","getJSX","isString","isFunction","React","isValidElement","getLeafNodes","nodes","resData","map","forEach","child","children","length","push","filterCheckedTreeNodes","checkeds","filter","item","includes","newItem","getTargetNodes","sourceNodes","data","source"],"mappings":"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"}