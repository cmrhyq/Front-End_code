{"version":3,"file":"TimePickerPanel.js","sources":["../../../src/time-picker/panel/TimePickerPanel.tsx"],"sourcesContent":["import React, { FC, useEffect, useMemo, useState } from 'react';\nimport dayjs from 'dayjs';\nimport SinglePanel, { SinglePanelProps } from './SinglePanel';\n\nimport useConfig from '../../hooks/useConfig';\nimport Button from '../../button';\n\nimport { useTimePickerTextConfig } from '../hooks/useTimePickerTextConfig';\nimport { DEFAULT_STEPS, DEFAULT_FORMAT } from '../../_common/js/time-picker/const';\n\nexport interface TimePickerPanelProps extends SinglePanelProps {\n  isShowPanel?: boolean;\n  isFooterDisplay?: boolean; // 是否展示footer\n  handleConfirmClick?: (defaultValue: dayjs.Dayjs) => void;\n}\n\nconst TimePickerPanel: FC<TimePickerPanelProps> = (props) => {\n  const {\n    format = DEFAULT_FORMAT,\n    steps = DEFAULT_STEPS,\n    handleConfirmClick,\n    isFooterDisplay,\n    onChange,\n    value,\n    isShowPanel = true,\n  } = props;\n  const [triggerScroll, toggleTriggerScroll] = useState(false); // 触发滚动\n  const { classPrefix } = useConfig();\n\n  const TEXT_CONFIG = useTimePickerTextConfig();\n\n  const panelClassName = `${classPrefix}-time-picker__panel`;\n  const showNowTimeBtn = !!steps.filter((v) => v > 1).length;\n\n  const defaultValue = useMemo(() => {\n    const isStepsSet = !!steps.filter((v) => v > 1).length;\n    if (value) {\n      return dayjs(value, format);\n    }\n    if (isStepsSet) {\n      return dayjs().hour(0).minute(0).second(0);\n    }\n    return dayjs();\n  }, [value, format, steps]);\n\n  useEffect(() => {\n    if (isShowPanel) toggleTriggerScroll(true);\n  }, [isShowPanel]);\n\n  return (\n    <div className={panelClassName}>\n      <div className={`${panelClassName}-section-body`}>\n        <SinglePanel\n          {...props}\n          format={format}\n          steps={steps}\n          value={value}\n          triggerScroll={triggerScroll}\n          isVisible={isShowPanel}\n          resetTriggerScroll={() => toggleTriggerScroll(false)}\n        />\n      </div>\n      {isFooterDisplay ? (\n        <div className={`${panelClassName}-section-footer`}>\n          <Button\n            theme=\"primary\"\n            variant=\"base\"\n            onClick={() => {\n              handleConfirmClick(defaultValue);\n            }}\n            size=\"small\"\n          >\n            {TEXT_CONFIG.confirm}\n          </Button>\n          {!showNowTimeBtn ? (\n            <Button theme=\"primary\" variant=\"text\" size=\"small\" onClick={() => onChange(dayjs().format(format))}>\n              {TEXT_CONFIG.nowTime}\n            </Button>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default TimePickerPanel;\n"],"names":["TimePickerPanel","props","format","DEFAULT_FORMAT","steps","DEFAULT_STEPS","handleConfirmClick","isFooterDisplay","onChange","value","isShowPanel","useState","_slicedToArray","triggerScroll","toggleTriggerScroll","useConfig","classPrefix","TEXT_CONFIG","useTimePickerTextConfig","panelClassName","showNowTimeBtn","filter","v","length","defaultValue","useMemo","isStepsSet","dayjs","hour","minute","second","useEffect","React","createElement","className","SinglePanel","isVisible","resetTriggerScroll","Button","theme","variant","onClick","size","confirm","nowTime"],"mappings":"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"}