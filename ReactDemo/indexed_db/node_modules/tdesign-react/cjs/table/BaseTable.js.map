{"version":3,"file":"BaseTable.js","sources":["../../src/table/BaseTable.tsx"],"sourcesContent":["import React, { useRef, useMemo, useImperativeHandle, forwardRef, useEffect, useState, WheelEvent } from 'react';\nimport pick from 'lodash/pick';\nimport classNames from 'classnames';\nimport TBody, { extendTableProps } from './TBody';\nimport { Affix } from '../affix';\nimport { ROW_LISTENERS } from './TR';\nimport THead from './THead';\nimport TFoot from './TFoot';\nimport useTableHeader from './hooks/useTableHeader';\nimport useColumnResize from './hooks/useColumnResize';\nimport useFixed from './hooks/useFixed';\nimport useAffix from './hooks/useAffix';\nimport usePagination from './hooks/usePagination';\nimport Loading from '../loading';\nimport { BaseTableProps } from './interface';\nimport useStyle, { formatCSSUnit } from './hooks/useStyle';\nimport useClassName from './hooks/useClassName';\nimport { getAffixProps } from './utils';\nimport log from '../_common/js/log';\n\nimport { StyledProps, Styles } from '../common';\n\nexport const BASE_TABLE_EVENTS = ['page-change', 'cell-click', 'scroll', 'scrollX', 'scrollY'];\nexport const BASE_TABLE_ALL_EVENTS = ROW_LISTENERS.map((t) => `row-${t}`).concat(BASE_TABLE_EVENTS);\n\nexport interface TableListeners {\n  [key: string]: Function;\n}\n\nexport interface TBaseTableProps extends BaseTableProps, StyledProps {}\n\nconst BaseTable = forwardRef((props: TBaseTableProps, ref) => {\n  const { tableLayout, height, data, columns, style, headerAffixedTop, bordered, resizable } = props;\n  const tableRef = useRef<HTMLDivElement>();\n  const tableElmRef = useRef<HTMLTableElement>();\n  const [tableFootHeight, setTableFootHeight] = useState(0);\n  const { virtualScrollClasses, tableLayoutClasses, tableBaseClass, tableColFixedClasses } = useClassName();\n  // 表格基础样式类\n  const { tableClasses, tableContentStyles, tableElementStyles } = useStyle(props);\n  // const [global] = useLocaleReceiver('table');\n  const { isMultipleHeader, spansAndLeafNodes, thList } = useTableHeader({ columns: props.columns });\n  const finalColumns = useMemo(\n    () => spansAndLeafNodes?.leafColumns || columns,\n    [spansAndLeafNodes?.leafColumns, columns],\n  );\n\n  // 固定表头和固定列逻辑\n  const {\n    scrollbarWidth,\n    tableWidth,\n    tableElmWidth,\n    tableContentRef,\n    isFixedHeader,\n    isWidthOverflow,\n    isFixedColumn,\n    thWidthList,\n    showColumnShadow,\n    rowAndColFixedPosition,\n    setData,\n    refreshTable,\n    emitScrollEvent,\n    setUseFixedTableElmRef,\n    updateColumnFixedShadow,\n    getThWidthList,\n    updateThWidthList,\n    setRecalculateColWidthFuncRef,\n    addTableResizeObserver,\n  } = useFixed(props, finalColumns);\n\n  // 1. 表头吸顶；2. 表尾吸底；3. 底部滚动条吸底；4. 分页器吸底\n  const {\n    affixHeaderRef,\n    affixFooterRef,\n    horizontalScrollbarRef,\n    paginationRef,\n    showAffixHeader,\n    showAffixFooter,\n    showAffixPagination,\n    onHorizontalScroll,\n    setTableContentRef,\n    updateAffixHeaderOrFooter,\n  } = useAffix(props);\n\n  const { dataSource, isPaginateData, renderPagination } = usePagination(props);\n\n  // 列宽拖拽逻辑\n  const columnResizeParams = useColumnResize(tableContentRef, refreshTable, getThWidthList, updateThWidthList);\n  const { resizeLineRef, resizeLineStyle, recalculateColWidth, setEffectColMap } = columnResizeParams;\n  setRecalculateColWidthFuncRef(recalculateColWidth);\n\n  const dynamicBaseTableClasses = classNames(\n    tableClasses.concat({\n      [tableBaseClass.headerFixed]: isFixedHeader,\n      [tableBaseClass.columnFixed]: isFixedColumn,\n      [tableBaseClass.widthOverflow]: isWidthOverflow,\n      [tableBaseClass.multipleHeader]: isMultipleHeader,\n      [tableColFixedClasses.leftShadow]: showColumnShadow.left,\n      [tableColFixedClasses.rightShadow]: showColumnShadow.right,\n      [tableBaseClass.columnResizableTable]: props.resizable,\n    }),\n  );\n\n  const tableElmClasses = classNames([\n    [tableLayoutClasses[tableLayout || 'fixed']],\n    { [tableBaseClass.fullHeight]: height },\n  ]);\n\n  const isVirtual = useMemo(\n    () => props.scroll?.type === 'virtual' && props.data?.length > (props.scroll?.threshold || 100),\n    [props.data?.length, props.scroll?.threshold, props.scroll?.type],\n  );\n\n  const showRightDivider = useMemo(\n    () => props.bordered && isFixedHeader && ((isMultipleHeader && isWidthOverflow) || !isMultipleHeader),\n    [isFixedHeader, isMultipleHeader, isWidthOverflow, props.bordered],\n  );\n\n  useEffect(() => {\n    setUseFixedTableElmRef(tableElmRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableElmRef]);\n\n  useEffect(() => {\n    setData(isPaginateData ? dataSource : props.data);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.data, dataSource, isPaginateData]);\n\n  const [lastLeafColumns, setLastLeafColumns] = useState(props.columns || []);\n  useEffect(() => {\n    if (lastLeafColumns.map((t) => t.colKey).join() !== spansAndLeafNodes.leafColumns.map((t) => t.colKey).join()) {\n      props.onLeafColumnsChange?.(spansAndLeafNodes.leafColumns);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      setLastLeafColumns(spansAndLeafNodes.leafColumns);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [spansAndLeafNodes.leafColumns]);\n\n  useEffect(() => {\n    setEffectColMap(thList[0], null);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [thList]);\n\n  useImperativeHandle(ref, () => ({\n    tableElement: tableRef.current,\n    tableHtmlElement: tableElmRef.current,\n    tableContentElement: tableContentRef.current,\n    affixHeaderElement: affixHeaderRef.current,\n    refreshTable,\n  }));\n\n  const onFixedChange = () => {\n    const timer = setTimeout(() => {\n      onHorizontalScroll();\n      updateAffixHeaderOrFooter();\n      clearTimeout(timer);\n    }, 0);\n  };\n\n  let lastScrollY = 0;\n  const onInnerVirtualScroll = (e: WheelEvent<HTMLDivElement>) => {\n    const target = e.target as HTMLElement;\n    const top = target.scrollTop;\n    // 排除横向滚动出发的纵向虚拟滚动计算\n    if (lastScrollY !== top) {\n      // TODO\n      // isVirtual.value && handleVirtualScroll();\n    } else {\n      lastScrollY = 0;\n      updateColumnFixedShadow(target);\n    }\n    lastScrollY = top;\n    emitScrollEvent(e);\n  };\n\n  // used for top margin\n  const getTFootHeight = () => {\n    if (!tableElmRef.current) return;\n    const timer = setTimeout(() => {\n      const height = tableElmRef.current?.querySelector('tfoot')?.getBoundingClientRect().height;\n      setTableFootHeight(height);\n      clearTimeout(timer);\n    });\n  };\n\n  useEffect(() => {\n    setTableContentRef(tableContentRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [tableContentRef]);\n\n  useEffect(\n    () => addTableResizeObserver(tableRef.current),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [tableRef],\n  );\n\n  useEffect(getTFootHeight, [tableElmRef]);\n\n  const newData = isPaginateData ? dataSource : data;\n\n  if (resizable && tableLayout === 'auto') {\n    log.warn('Table', 'table-layout can not be `auto` for resizable column table, set `table-layout: fixed` please.');\n  }\n\n  const defaultColWidth = props.tableLayout === 'fixed' && isWidthOverflow ? '100px' : undefined;\n  const colgroup = (\n    <colgroup>\n      {finalColumns.map((col) => {\n        const style: Styles = { width: formatCSSUnit(thWidthList.current[col.colKey] || col.width) || defaultColWidth };\n        if (col.minWidth) {\n          style.minWidth = formatCSSUnit(col.minWidth);\n        }\n        return <col key={col.colKey} style={style} />;\n      })}\n    </colgroup>\n  );\n\n  /**\n   * Affixed Header\n   */\n  // onlyVirtualScrollBordered 用于浏览器兼容性处理，只有 chrome 需要调整 bordered，FireFox 和 Safari 不需要\n  const onlyVirtualScrollBordered =\n    !!(isVirtual && !headerAffixedTop && bordered) && /Chrome/.test(navigator?.userAgent);\n  const borderWidth = bordered && onlyVirtualScrollBordered ? 1 : 0;\n  const affixHeaderWrapHeight =\n    (affixHeaderRef.current?.getBoundingClientRect().height || 0) - scrollbarWidth - borderWidth;\n  // 两类场景：1. 虚拟滚动，永久显示表头，直到表头消失在可视区域； 2. 表头吸顶，根据滚动情况判断是否显示吸顶表头\n  const headerOpacity = headerAffixedTop ? Number(showAffixHeader) : 1;\n  const affixHeaderWrapHeightStyle = {\n    width: `${tableWidth.current}px`,\n    height: `${affixHeaderWrapHeight}px`,\n    opacity: headerOpacity,\n    marginTop: onlyVirtualScrollBordered ? `${borderWidth}px` : 0,\n  };\n  // 多级表头左边线缺失\n  const affixedLeftBorder = props.bordered ? 1 : 0;\n  const affixedHeader = Boolean(props.headerAffixedTop && tableWidth.current) && (\n    <div\n      ref={affixHeaderRef}\n      style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: headerOpacity }}\n      className={classNames(['scrollbar', { [tableBaseClass.affixedHeaderElm]: props.headerAffixedTop || isVirtual }])}\n    >\n      <table\n        className={classNames(tableElmClasses)}\n        style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}\n      >\n        {colgroup}\n        <THead\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          isMultipleHeader={isMultipleHeader}\n          bordered={props.bordered}\n          spansAndLeafNodes={spansAndLeafNodes}\n          thList={thList}\n          thWidthList={thWidthList.current}\n          resizable={props.resizable}\n          columnResizeParams={columnResizeParams}\n        />\n      </table>\n    </div>\n  );\n\n  // 添加这一层，是为了隐藏表头的横向滚动条。如果以后不需要照顾 IE 10 以下的项目，则可直接移除这一层\n  // 彼时，可更为使用 CSS 样式中的 .hideScrollbar()\n  const affixHeaderWithWrap = (\n    <div className={tableBaseClass.affixedHeaderWrap} style={affixHeaderWrapHeightStyle}>\n      {affixedHeader}\n    </div>\n  );\n\n  /**\n   * Affixed Footer\n   */\n  let marginScrollbarWidth = isWidthOverflow ? scrollbarWidth : 0;\n  if (bordered) {\n    marginScrollbarWidth += 1;\n  }\n  // Hack: Affix 组件，marginTop 临时使用 负 margin 定位位置\n  const affixedFooter = Boolean(props.footerAffixedBottom && props.footData?.length && tableWidth.current) && (\n    <Affix\n      className={tableBaseClass.affixedFooterWrap}\n      onFixedChange={onFixedChange}\n      offsetBottom={marginScrollbarWidth || 0}\n      {...getAffixProps(props.footerAffixedBottom)}\n      style={{ marginTop: `${-1 * (tableFootHeight + marginScrollbarWidth)}px` }}\n    >\n      <div\n        ref={affixFooterRef}\n        style={{ width: `${tableWidth.current - affixedLeftBorder}px`, opacity: Number(showAffixFooter) }}\n        className={classNames([\n          'scrollbar',\n          { [tableBaseClass.affixedFooterElm]: props.footerAffixedBottom || isVirtual },\n        ])}\n      >\n        <table className={tableElmClasses} style={{ ...tableElementStyles, width: `${tableElmWidth.current}px` }}>\n          {colgroup}\n          <TFoot\n            rowKey={props.rowKey}\n            isFixedHeader={isFixedHeader}\n            rowAndColFixedPosition={rowAndColFixedPosition}\n            footData={props.footData}\n            columns={spansAndLeafNodes?.leafColumns || columns}\n            rowAttributes={props.rowAttributes}\n            rowClassName={props.rowClassName}\n            thWidthList={thWidthList.current}\n            footerSummary={props.footerSummary}\n            rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n          ></TFoot>\n        </table>\n      </div>\n    </Affix>\n  );\n\n  const translate = `translate(0, ${0}px)`;\n  const virtualStyle = {\n    transform: translate,\n    '-ms-transform': translate,\n    '-moz-transform': translate,\n    '-webkit-transform': translate,\n  };\n  const tableBodyProps = {\n    rowAndColFixedPosition,\n    showColumnShadow,\n    // data: isVirtual ? visibleData : data,\n    data: newData,\n    columns: spansAndLeafNodes?.leafColumns || columns,\n    tableElm: tableRef.current,\n    tableContentElm: tableContentRef.current,\n    tableWidth: tableWidth.current,\n    isWidthOverflow,\n    rowKey: props.rowKey || 'id',\n    // 虚拟滚动相关属性\n    // isVirtual,\n    // translateY: translateY,\n    // scrollType: scrollType,\n    // rowHeight: rowHeight,\n    // trs: trs,\n    // bufferSize: bufferSize,\n    scroll: props.scroll,\n    // handleRowMounted: handleRowMounted,\n    cellEmptyContent: props.cellEmptyContent,\n    renderExpandedRow: props.renderExpandedRow,\n    ...pick(props, extendTableProps),\n  };\n  const tableContent = (\n    <div\n      ref={tableContentRef}\n      className={tableBaseClass.content}\n      style={tableContentStyles}\n      onScroll={onInnerVirtualScroll}\n    >\n      {isVirtual && <div className={virtualScrollClasses.cursor} style={virtualStyle} />}\n      <table ref={tableElmRef} className={classNames(tableElmClasses)} style={tableElementStyles}>\n        {colgroup}\n        <THead\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          isMultipleHeader={isMultipleHeader}\n          bordered={props.bordered}\n          spansAndLeafNodes={spansAndLeafNodes}\n          thList={thList}\n          thWidthList={thWidthList.current}\n          resizable={props.resizable}\n          columnResizeParams={columnResizeParams}\n        />\n        <TBody {...tableBodyProps} />\n        <TFoot\n          rowKey={props.rowKey}\n          isFixedHeader={isFixedHeader}\n          rowAndColFixedPosition={rowAndColFixedPosition}\n          footData={props.footData}\n          columns={spansAndLeafNodes?.leafColumns || columns}\n          rowAttributes={props.rowAttributes}\n          rowClassName={props.rowClassName}\n          thWidthList={thWidthList.current}\n          footerSummary={props.footerSummary}\n          rowspanAndColspanInFooter={props.rowspanAndColspanInFooter}\n        ></TFoot>\n      </table>\n    </div>\n  );\n\n  const { loading, loadingProps } = props;\n  const customLoadingText = loading;\n  const loadingContent = loading !== undefined && (\n    <Loading\n      loading={!!loading}\n      text={customLoadingText}\n      attach={() => tableRef.current}\n      showOverlay\n      size=\"small\"\n      {...loadingProps}\n    ></Loading>\n  );\n\n  const { topContent, bottomContent } = props;\n  const pagination = (\n    <div ref={paginationRef} className={tableBaseClass.paginationWrap} style={{ opacity: Number(showAffixPagination) }}>\n      {renderPagination()}\n    </div>\n  );\n  const bottom = !!bottomContent && <div className={tableBaseClass.bottomContent}>{bottomContent}</div>;\n\n  return (\n    <div ref={tableRef} className={classNames(dynamicBaseTableClasses)} style={{ position: 'relative', ...style }}>\n      {!!topContent && <div className={tableBaseClass.topContent}>{topContent}</div>}\n\n      {!!(isVirtual || props.headerAffixedTop) &&\n        (props.headerAffixedTop ? (\n          <Affix\n            offsetTop={0}\n            {...getAffixProps(props.headerAffixedTop, props.headerAffixProps)}\n            onFixedChange={onFixedChange}\n          >\n            {affixHeaderWithWrap}\n          </Affix>\n        ) : (\n          isFixedHeader && affixHeaderWithWrap\n        ))}\n\n      {tableContent}\n\n      {affixedFooter}\n\n      {loadingContent}\n\n      {showRightDivider && (\n        <div\n          className={tableBaseClass.scrollbarDivider}\n          style={{\n            right: `${scrollbarWidth}px`,\n            height: `${tableContentRef.current?.getBoundingClientRect().height}px`,\n          }}\n        ></div>\n      )}\n\n      {bottom}\n\n      {/* 吸底的滚动条 */}\n      {props.horizontalScrollAffixedBottom && (\n        <Affix\n          offsetBottom={0}\n          {...getAffixProps(props.horizontalScrollAffixedBottom)}\n          style={{ marginTop: `-${scrollbarWidth * 2}px` }}\n        >\n          <div\n            ref={horizontalScrollbarRef}\n            className={classNames(['scrollbar', tableBaseClass.obviousScrollbar])}\n            style={{\n              width: `${tableWidth.current}px`,\n              overflow: 'auto',\n              opacity: Number(showAffixFooter),\n            }}\n          >\n            <div style={{ width: `${tableElmWidth.current}px`, height: '5px' }}></div>\n          </div>\n        </Affix>\n      )}\n\n      {/* 吸底的分页器 */}\n      {props.paginationAffixedBottom ? (\n        <Affix offsetBottom={0} {...getAffixProps(props.paginationAffixedBottom)}>\n          {pagination}\n        </Affix>\n      ) : (\n        pagination\n      )}\n\n      {/* 调整列宽时的指示线。由于层级需要比较高，因而放在根节点，避免被吸顶表头覆盖。非必要情况，请勿调整辅助线位置 */}\n      <div ref={resizeLineRef} className={tableBaseClass.resizeLine} style={resizeLineStyle}></div>\n    </div>\n  );\n});\n\nBaseTable.displayName = 'BaseTable';\n\nexport default BaseTable;\n"],"names":["BASE_TABLE_EVENTS","BASE_TABLE_ALL_EVENTS","ROW_LISTENERS","map","t","concat","BaseTable","forwardRef","props","ref","tableLayout","height","data","columns","style","headerAffixedTop","bordered","resizable","tableRef","useRef","tableElmRef","useState","_slicedToArray","tableFootHeight","setTableFootHeight","useClassName","virtualScrollClasses","tableLayoutClasses","tableBaseClass","tableColFixedClasses","useStyle","tableClasses","tableContentStyles","tableElementStyles","useTableHeader","isMultipleHeader","spansAndLeafNodes","thList","finalColumns","useMemo","leafColumns","useFixed","scrollbarWidth","tableWidth","tableElmWidth","tableContentRef","isFixedHeader","isWidthOverflow","isFixedColumn","thWidthList","showColumnShadow","rowAndColFixedPosition","setData","refreshTable","emitScrollEvent","setUseFixedTableElmRef","updateColumnFixedShadow","getThWidthList","updateThWidthList","setRecalculateColWidthFuncRef","addTableResizeObserver","useAffix","affixHeaderRef","affixFooterRef","horizontalScrollbarRef","paginationRef","showAffixHeader","showAffixFooter","showAffixPagination","onHorizontalScroll","setTableContentRef","updateAffixHeaderOrFooter","usePagination","dataSource","isPaginateData","renderPagination","columnResizeParams","useColumnResize","resizeLineRef","resizeLineStyle","recalculateColWidth","setEffectColMap","dynamicBaseTableClasses","classNames","headerFixed","columnFixed","_defineProperty","widthOverflow","multipleHeader","leftShadow","left","rightShadow","right","columnResizableTable","tableElmClasses","fullHeight","isVirtual","scroll","type","length","threshold","showRightDivider","useEffect","current","lastLeafColumns","setLastLeafColumns","colKey","join","onLeafColumnsChange","useImperativeHandle","tableElement","tableHtmlElement","tableContentElement","affixHeaderElement","onFixedChange","timer","setTimeout","clearTimeout","lastScrollY","onInnerVirtualScroll","e","target","top","scrollTop","getTFootHeight","querySelector","getBoundingClientRect","newData","log","warn","defaultColWidth","colgroup","React","createElement","col","width","formatCSSUnit","minWidth","key","onlyVirtualScrollBordered","test","navigator","userAgent","borderWidth","affixHeaderWrapHeight","headerOpacity","Number","affixHeaderWrapHeightStyle","opacity","marginTop","affixedLeftBorder","affixedHeader","Boolean","className","affixedHeaderElm","THead","affixHeaderWithWrap","affixedHeaderWrap","marginScrollbarWidth","affixedFooter","footerAffixedBottom","footData","Affix","affixedFooterWrap","offsetBottom","getAffixProps","affixedFooterElm","TFoot","rowKey","rowAttributes","rowClassName","footerSummary","rowspanAndColspanInFooter","translate","virtualStyle","transform","tableBodyProps","tableElm","tableContentElm","cellEmptyContent","renderExpandedRow","pick","extendTableProps","tableContent","content","onScroll","cursor","TBody","loading","loadingProps","customLoadingText","loadingContent","Loading","text","attach","showOverlay","size","topContent","bottomContent","pagination","paginationWrap","bottom","position","offsetTop","headerAffixProps","scrollbarDivider","horizontalScrollAffixedBottom","obviousScrollbar","overflow","paginationAffixedBottom","resizeLine","displayName"],"mappings":"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"}