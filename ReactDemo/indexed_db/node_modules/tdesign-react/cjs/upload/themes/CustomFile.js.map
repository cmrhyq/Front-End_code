{"version":3,"file":"CustomFile.js","sources":["../../../src/upload/themes/CustomFile.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { ReactNode } from 'react';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { CommonDisplayFileProps } from '../interface';\nimport { TdUploadProps } from '../type';\n\nexport interface CustomFileProps extends CommonDisplayFileProps {\n  dragEvents: UploadDragEvents;\n  draggable?: boolean;\n  // 拖拽区域\n  dragContent?: TdUploadProps['dragContent'];\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: () => void;\n  // 非拖拽场景，是触发元素；拖拽场景是拖拽区域\n  childrenNode?: ReactNode;\n}\n\nconst CustomFile = (props: CustomFileProps) => {\n  const { classPrefix, displayFiles } = props;\n  const drag = useDrag(props.dragEvents);\n  const { dragActive } = drag;\n\n  const dragEvents = props.draggable\n    ? {\n        onDrop: drag.handleDrop,\n        onDragEnter: drag.handleDragenter,\n        onDragOver: drag.handleDragover,\n        onDragLeave: drag.handleDragleave,\n      }\n    : {};\n\n  const renderDragContent = () => (\n    <div\n      className={`${classPrefix}-upload__dragger ${classPrefix}-upload__dragger-center`}\n      {...dragEvents}\n      onClick={props.triggerUpload}\n    >\n      <div className={`${classPrefix}-upload__trigger`}>\n        {props.dragContent?.({ dragActive, files: displayFiles }) ||\n          props.trigger?.({ dragActive, files: displayFiles }) ||\n          props.childrenNode}\n      </div>\n    </div>\n  );\n\n  return (\n    <>\n      {props.draggable ? (\n        renderDragContent()\n      ) : (\n        <div className={`${classPrefix}-upload__trigger`} onClick={props.triggerUpload}>\n          {props.childrenNode || props.children}\n        </div>\n      )}\n      {props.tips && <small className={classNames(props.tipsClasses)}>{props.tips}</small>}\n    </>\n  );\n};\n\nCustomFile.displayName = 'CustomFile';\n\nexport default CustomFile;\n"],"names":["CustomFile","props","classPrefix","displayFiles","drag","useDrag","dragEvents","dragActive","draggable","onDrop","handleDrop","onDragEnter","handleDragenter","onDragOver","handleDragover","onDragLeave","handleDragleave","renderDragContent","React","createElement","className","onClick","triggerUpload","dragContent","files","trigger","childrenNode","Fragment","children","tips","classNames","tipsClasses","displayName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,IAAMA,UAAA,GAAa,SAAbA,UAAa,CAACC,KAAD,EAA4B;AACvC,EAAA,IAAEC,WAAF,GAAgCD,KAAhC,CAAEC,WAAF;AAAA,MAAeC,YAAf,GAAgCF,KAAhC,CAAeE,YAAf,CAAA;AACA,EAAA,IAAAC,IAAA,GAAOC,+BAAQ,CAAAJ,KAAA,CAAMK,UAAN,CAAf,CAAA;AACA,EAAA,IAAEC,UAAF,GAAiBH,IAAjB,CAAEG,UAAF,CAAA;AAEA,EAAA,IAAAD,UAAA,GAAaL,MAAMO,SAAN,GACf;IACEC,QAAQL,IAAK,CAAAM,UADf;IAEEC,aAAaP,IAAK,CAAAQ,eAFpB;IAGEC,YAAYT,IAAK,CAAAU,cAHnB;IAIEC,aAAaX,IAAK,CAAAY,eAAAA;AAJpB,GADe,GAOf,EAPE,CAAA;;EASA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAoB,GAAA;AAAA,IAAA,IAAA,kBAAA,EAAA,cAAA,CAAA;;AAAA,IAAA,sBACvBC,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA,aAAA,CAAA,aAAA,CAAA;MACCC,SAAA,EAAA,EAAA,CAAA,MAAA,CAAclB,WAAd,EAAA,mBAAA,CAAA,CAAA,MAAA,CAA6CA,WAA7C,EAAA,yBAAA,CAAA;AADD,KAAA,EAEKI,UAFL,CAAA,EAAA,EAAA,EAAA;MAGCe,SAASpB,KAAM,CAAAqB,aAAAA;AAHhB,KAAA,CAAA,iBAKEJ,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAIC,MAAAA,qBAAclB;AAAlB,KAAA,EACE,CAAAD,CAAAA,kBAAAA,GAAAA,MAAMsB,WAAN,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,kBAAA,CAAA,IAAA,CAAAtB,OAAoB;AAAEM,MAAAA,YAAAA,UAAF;AAAciB,MAAAA,KAAO,EAAArB,YAAAA;MAAzC,wBACCF,KAAA,CAAMwB,OADP,MACC,IAAA,IAAA,cAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,cAAA,CAAA,IAAA,CAAAxB,KAAA,EAAgB;AAAEM,MAAAA,YAAAA,UAAF;AAAciB,MAAAA,KAAO,EAAArB,YAAAA;AAArB,KAAhB,CADD,CAECF,IAAAA,KAAA,CAAMyB,YAHT,CALF,CADuB,CAAA;GAApB,CAAA;;EAcN,sBAEKR,yBAAA,CAAAC,aAAA,CAAAD,yBAAA,CAAAS,QAAA,EAAA,IAAA,EAAA1B,KAAA,CAAMO,SAAN,GACCS,iBAAA,EADD,kBAGEC,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAIC,qBAAclB,aAAlB,kBAAA,CAAA;IAAiDmB,SAASpB,KAAM,CAAAqB,aAAAA;GAAhE,EACErB,MAAMyB,YAAN,IAAsBzB,KAAA,CAAM2B,QAD9B,CAHF,EAOA3B,KAAA,CAAM4B,IAAN,mBAAeX,yBAAA,CAAAC,aAAA,CAAA,OAAA,EAAA;AAAMC,IAAAA,SAAA,EAAWU,8BAAW,CAAA7B,KAAA,CAAM8B,WAAN,CAAA;AAA5B,GAAA,EAAiD9B,KAAA,CAAM4B,IAAvD,CAPf,CAFL,CAAA;AAYF,EAxCA;;AA0CA7B,UAAA,CAAWgC,WAAX,GAAyB,YAAzB;;;;"}