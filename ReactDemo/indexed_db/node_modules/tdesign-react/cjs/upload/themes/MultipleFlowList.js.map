{"version":3,"file":"MultipleFlowList.js","sources":["../../../src/upload/themes/MultipleFlowList.tsx"],"sourcesContent":["import React, { MouseEvent, useMemo } from 'react';\nimport classNames from 'classnames';\nimport {\n  BrowseIcon as TdBrowseIcon,\n  DeleteIcon as TdDeleteIcon,\n  CheckCircleFilledIcon as TdCheckCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n  TimeFilledIcon as TdTimeFilledIcon,\n} from 'tdesign-icons-react';\nimport useGlobalIcon from '../../hooks/useGlobalIcon';\nimport ImageViewer from '../../image-viewer';\nimport { CommonDisplayFileProps } from '../interface';\nimport TButton from '../../button';\nimport { UploadFile, TdUploadProps } from '../type';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { abridgeName, returnFileSize } from '../../_common/js/upload/utils';\nimport TLoading from '../../loading';\n\nexport interface ImageFlowListProps extends CommonDisplayFileProps {\n  uploadFiles?: (toFiles?: UploadFile[]) => void;\n  cancelUpload?: (context: { e: MouseEvent<HTMLElement>; file?: UploadFile }) => void;\n  dragEvents: UploadDragEvents;\n  disabled?: boolean;\n  isBatchUpload?: boolean;\n  draggable?: boolean;\n  onPreview?: TdUploadProps['onPreview'];\n}\n\nconst ImageFlowList = (props: ImageFlowListProps) => {\n  // locale 已经在 useUpload 中统一处理优先级\n  const { locale, uploading, disabled, displayFiles, classPrefix } = props;\n  const uploadPrefix = `${classPrefix}-upload`;\n\n  const { BrowseIcon, DeleteIcon, CheckCircleFilledIcon, ErrorCircleFilledIcon, TimeFilledIcon } = useGlobalIcon({\n    BrowseIcon: TdBrowseIcon,\n    DeleteIcon: TdDeleteIcon,\n    CheckCircleFilledIcon: TdCheckCircleFilledIcon,\n    ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    TimeFilledIcon: TdTimeFilledIcon,\n  });\n\n  const drag = useDrag(props.dragEvents);\n  const { dragActive } = drag;\n\n  const uploadText = useMemo(() => {\n    if (uploading) return `${locale.progress.uploadingText}`;\n    return locale.triggerUploadText.normal;\n  }, [locale, uploading]);\n\n  const draggable = props.draggable ?? true;\n  const dragEvents = draggable\n    ? {\n        onDrop: drag.handleDrop,\n        onDragEnter: drag.handleDragenter,\n        onDragOver: drag.handleDragover,\n        onDragLeave: drag.handleDragleave,\n      }\n    : {};\n\n  const getStatusMap = () => {\n    const iconMap = {\n      success: <CheckCircleFilledIcon />,\n      fail: <ErrorCircleFilledIcon />,\n      progress: <TLoading />,\n      waiting: <TimeFilledIcon />,\n    };\n    const textMap = {\n      success: locale.progress?.successText,\n      fail: locale.progress?.failText,\n      progress: locale.progress?.uploadingText,\n      waiting: locale.progress?.waitingText,\n    };\n    return {\n      iconMap,\n      textMap,\n    };\n  };\n\n  const renderEmpty = () => (\n    <div className={`${uploadPrefix}__flow-empty`}>\n      {dragActive ? locale.dragger.dragDropText : locale.dragger.clickAndDragText}\n    </div>\n  );\n\n  const renderImgItem = (file: UploadFile, index: number) => {\n    const { iconMap, textMap } = getStatusMap();\n    return (\n      <li className={`${uploadPrefix}__card-item`} key={file.name + index}>\n        <div\n          className={classNames([\n            `${uploadPrefix}__card-content`,\n            { [`${classPrefix}-is-bordered`]: file.status !== 'waiting' },\n          ])}\n        >\n          {['fail', 'progress'].includes(file.status) && (\n            <div className={`${uploadPrefix}__card-status-wrap`}>\n              {iconMap[file.status as 'fail' | 'progress']}\n              <p>{textMap[file.status as 'fail' | 'progress']}</p>\n            </div>\n          )}\n          {(['waiting', 'success'].includes(file.status) || (!file.status && file.url)) && (\n            <img\n              className={`${uploadPrefix}__card-image`}\n              src={file.url || '//tdesign.gtimg.com/tdesign-default-img.png'}\n            />\n          )}\n          <div className={`${uploadPrefix}__card-mask`}>\n            {file.url && (\n              <span className={`${uploadPrefix}__card-mask-item`}>\n                <ImageViewer\n                  trigger={({ onOpen }) => (\n                    <BrowseIcon\n                      onClick={(e) => {\n                        props.onPreview?.({ file, index, e });\n                        onOpen();\n                      }}\n                    />\n                  )}\n                  images={displayFiles.map((t) => t.url)}\n                  defaultIndex={index}\n                />\n                <span className={`${uploadPrefix}__card-mask-item-divider`}></span>\n              </span>\n            )}\n            {!disabled && (\n              <span\n                className={`${uploadPrefix}__card-mask-item`}\n                onClick={(e: MouseEvent) => props.onRemove({ e, index, file })}\n              >\n                <DeleteIcon />\n              </span>\n            )}\n          </div>\n        </div>\n        <p className={`${uploadPrefix}__card-name`}>{abridgeName(file.name)}</p>\n      </li>\n    );\n  };\n\n  const renderStatus = (file: UploadFile) => {\n    const { iconMap, textMap } = getStatusMap();\n    return (\n      <div className={`${uploadPrefix}__flow-status`}>\n        {iconMap[file.status]}\n        <span>{textMap[file.status]}</span>\n      </div>\n    );\n  };\n\n  const renderNormalActionCol = (file: UploadFile, index: number) => (\n    <td>\n      <TButton theme=\"primary\" variant=\"text\" onClick={(e: MouseEvent) => props.onRemove({ e, index, file })}>\n        {locale?.triggerUploadText?.delete}\n      </TButton>\n    </td>\n  );\n\n  // batchUpload action col\n  const renderBatchActionCol = (index: number) =>\n    // 第一行数据才需要合并单元格\n    index === 0 ? (\n      <td rowSpan={displayFiles.length} className={`${uploadPrefix}__flow-table__batch-row`}>\n        <TButton\n          theme=\"primary\"\n          variant=\"text\"\n          onClick={(e: MouseEvent) => props.onRemove({ e, index: -1, file: null })}\n        >\n          {locale?.triggerUploadText?.delete}\n        </TButton>\n      </td>\n    ) : null;\n\n  const renderFileList = () => (\n    <table className={`${uploadPrefix}__flow-table`}>\n      <thead>\n        <tr>\n          <th>{locale.file?.fileNameText}</th>\n          <th>{locale.file?.fileSizeText}</th>\n          <th>{locale.file?.fileStatusText}</th>\n          {disabled ? null : <th>{locale.file?.fileOperationText}</th>}\n        </tr>\n      </thead>\n      <tbody>\n        {!displayFiles.length && (\n          <tr>\n            <td colSpan={4}>{renderEmpty()}</td>\n          </tr>\n        )}\n        {displayFiles.map((file, index) => {\n          // 合并操作出现条件为：当前为合并上传模式且列表内没有待上传文件\n          const showBatchUploadAction = props.isBatchUpload;\n          const deleteNode =\n            showBatchUploadAction && !displayFiles.find((item) => item.status !== 'success')\n              ? renderBatchActionCol(index)\n              : renderNormalActionCol(file, index);\n          return (\n            <tr key={file.name + index}>\n              <td>{abridgeName(file.name, 7, 10)}</td>\n              <td>{returnFileSize(file.size)}</td>\n              <td>{renderStatus(file)}</td>\n              {disabled ? null : deleteNode}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n\n  const cardClassName = `${uploadPrefix}__flow-card-area`;\n  return (\n    <div className={`${uploadPrefix}__flow ${uploadPrefix}__flow-${props.theme}`}>\n      <div className={`${uploadPrefix}__flow-op`}>\n        {props.children}\n        {props.placeholder && (\n          <small className={`${uploadPrefix}__flow-placeholder ${uploadPrefix}__placeholder`}>\n            {props.placeholder}\n          </small>\n        )}\n      </div>\n\n      {props.theme === 'image-flow' && (\n        <div className={cardClassName} {...dragEvents}>\n          {displayFiles.length ? (\n            <ul className={`${uploadPrefix}__card clearfix`}>\n              {displayFiles.map((file, index) => renderImgItem(file, index))}\n            </ul>\n          ) : (\n            renderEmpty()\n          )}\n        </div>\n      )}\n\n      {props.theme === 'file-flow' &&\n        (displayFiles.length ? (\n          renderFileList()\n        ) : (\n          <div className={cardClassName} {...dragEvents}>\n            {renderEmpty()}\n          </div>\n        ))}\n\n      {!props.autoUpload && (\n        <div className={`${uploadPrefix}__flow-bottom`}>\n          <TButton theme=\"default\" onClick={(e) => props.cancelUpload?.({ e })} disabled={disabled || !uploading}>\n            {locale?.cancelUploadText}\n          </TButton>\n          <TButton\n            disabled={disabled || uploading || !displayFiles.length}\n            theme=\"primary\"\n            loading={uploading}\n            onClick={() => props.uploadFiles?.()}\n          >\n            {uploadText}\n          </TButton>\n        </div>\n      )}\n    </div>\n  );\n};\n\nImageFlowList.displayName = 'ImageFlowList';\n\nexport default ImageFlowList;\n"],"names":["ImageFlowList","props","locale","uploading","disabled","displayFiles","classPrefix","uploadPrefix","useGlobalIcon","BrowseIcon","TdBrowseIcon","DeleteIcon","TdDeleteIcon","CheckCircleFilledIcon","TdCheckCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","TimeFilledIcon","TdTimeFilledIcon","drag","useDrag","dragEvents","dragActive","uploadText","useMemo","progress","uploadingText","triggerUploadText","normal","draggable","onDrop","handleDrop","onDragEnter","handleDragenter","onDragOver","handleDragover","onDragLeave","handleDragleave","getStatusMap","iconMap","success","fail","TLoading","waiting","textMap","successText","failText","waitingText","renderEmpty","React","createElement","className","dragger","dragDropText","clickAndDragText","renderImgItem","file","index","key","name","classNames","_defineProperty","status","includes","url","src","ImageViewer","trigger","onOpen","onClick","e","onPreview","images","map","t","defaultIndex","onRemove","abridgeName","renderStatus","renderNormalActionCol","TButton","theme","variant","renderBatchActionCol","rowSpan","length","renderFileList","fileNameText","fileSizeText","fileStatusText","fileOperationText","colSpan","showBatchUploadAction","isBatchUpload","deleteNode","find","item","returnFileSize","size","cardClassName","children","placeholder","autoUpload","cancelUpload","cancelUploadText","loading","uploadFiles","displayName"],"mappings":"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"}