{"version":3,"file":"Check.js","sources":["../../node_modules/lodash/isBoolean.js","../../src/common/Check.tsx"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","import React, { Ref, forwardRef, useContext, MouseEventHandler } from 'react';\nimport classNames from 'classnames';\nimport isBoolean from 'lodash/isBoolean';\nimport { omit } from '../_util/helper';\nimport { StyledProps } from '../common';\nimport useConfig from '../hooks/useConfig';\nimport useControlled from '../hooks/useControlled';\nimport { TdCheckboxProps } from '../checkbox/type';\n\nexport interface CheckProps extends Omit<TdCheckboxProps, 'value'>, StyledProps {\n  type: 'radio' | 'radio-button' | 'checkbox';\n  allowUncheck?: boolean;\n  title?: string;\n  value?: string | number | boolean;\n  children?: React.ReactNode;\n  onClick?: MouseEventHandler<HTMLLabelElement>;\n  stopLabelTrigger?: Boolean;\n}\n\n/**\n * Check 组件支持使用 CheckContext 进行状态托管\n */\nexport const CheckContext = React.createContext<CheckContextValue>(null);\n\n/**\n * 托管 Check 组件的状态，请提供 inject() 方法注入托管好的 props\n */\nexport interface CheckContextValue {\n  inject: (props: CheckProps) => CheckProps;\n}\n\nconst Check = forwardRef((_props: CheckProps, ref: Ref<HTMLLabelElement>) => {\n  // 支持从 Context 注入\n  const context = useContext(CheckContext);\n  const props = context ? context.inject(_props) : _props;\n\n  const {\n    allowUncheck = false,\n    type,\n    disabled,\n    name,\n    value,\n    onChange,\n    indeterminate,\n    children,\n    label,\n    className,\n    style,\n    readonly,\n    ...htmlProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const TOnChange: (\n    checked: boolean,\n    context: {\n      e: React.ChangeEvent<HTMLInputElement> | React.MouseEvent<HTMLInputElement>;\n    },\n  ) => void = onChange;\n\n  const [internalChecked, setInternalChecked] = useControlled(props, 'checked', TOnChange);\n\n  const labelClassName = classNames(`${classPrefix}-${type}`, className, {\n    [`${classPrefix}-is-checked`]: internalChecked,\n    [`${classPrefix}-is-disabled`]: disabled,\n    [`${classPrefix}-is-indeterminate`]: indeterminate,\n  });\n\n  const input = (\n    <input\n      readOnly={readonly}\n      type={type === 'radio-button' ? 'radio' : type}\n      className={`${classPrefix}-${type}__former`}\n      checked={internalChecked}\n      disabled={disabled}\n      name={name}\n      value={isBoolean(value) ? Number(value) : value}\n      onClick={(e) => {\n        e.stopPropagation();\n        if ((type === 'radio-button' || type === 'radio') && allowUncheck && internalChecked) {\n          setInternalChecked(!e.currentTarget.checked, { e });\n        }\n      }}\n      onChange={(e) => setInternalChecked(e.currentTarget.checked, { e })}\n    />\n  );\n  // Checkbox/ Radio 内容为空则不再渲染 span，不存在 0:Number 的情况\n  const showLabel = !!(children || label);\n\n  const handleLabelClick = (event) => {\n    // 在tree等组件中使用  阻止label触发checked 与expand冲突\n    if (props.stopLabelTrigger) event.preventDefault();\n  };\n\n  return (\n    <label ref={ref} className={labelClassName} title={props.title} style={style} {...omit(htmlProps, ['checkAll'])}>\n      {input}\n      <span className={`${classPrefix}-${type}__input`} />\n      {showLabel && (\n        <span key=\"label\" className={`${classPrefix}-${type}__label`} onClick={handleLabelClick}>\n          {children || label}\n        </span>\n      )}\n    </label>\n  );\n});\n\nCheck.displayName = 'Check';\n\nexport default Check;\n"],"names":["baseGetTag","require$$0","isObjectLike","require$$1","boolTag","isBoolean","value","isBoolean_1","CheckContext","React","createContext","Check","forwardRef","_props","ref","context","useContext","props","inject","allowUncheck","type","disabled","name","onChange","indeterminate","children","label","className","style","readonly","htmlProps","useConfig","classPrefix","TOnChange","useControlled","_slicedToArray","internalChecked","setInternalChecked","labelClassName","classNames","_defineProperty","input","createElement","readOnly","checked","Number","onClick","e","stopPropagation","currentTarget","showLabel","handleLabelClick","event","stopLabelTrigger","preventDefault","title","omit","key","displayName"],"mappings":"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"}