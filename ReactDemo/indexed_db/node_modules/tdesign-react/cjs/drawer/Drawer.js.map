{"version":3,"file":"Drawer.js","sources":["../../src/drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, useState, useEffect, useImperativeHandle, useRef, useCallback } from 'react';\nimport classnames from 'classnames';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-react';\n\nimport { addClass, removeClass } from '../_util/dom';\nimport { useLocaleReceiver } from '../locale/LocalReceiver';\nimport getScrollbarWidth from '../_util/getScrollbarWidth';\nimport hasScrollBar from '../_util/hasScrollBar';\nimport { TdDrawerProps, DrawerEventSource } from './type';\nimport { StyledProps } from '../common';\nimport DrawerWrapper from './DrawerWrapper';\nimport Button from '../button';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport { drawerDefaultProps } from './defaultProps';\nimport useDrag from './hooks/useDrag';\n\nexport const CloseTriggerType: { [key: string]: DrawerEventSource } = {\n  CLICK_OVERLAY: 'overlay',\n  CLICK_CLOSE_BTN: 'close-btn',\n  CLICK_CANCEL_BTN: 'cancel',\n  KEYDOWN_ESC: 'esc',\n};\n\nexport interface DrawerProps extends TdDrawerProps, StyledProps {}\n\nconst Drawer = forwardRef((props: DrawerProps, ref: React.Ref<HTMLDivElement>) => {\n  const {\n    className,\n    style,\n    visible,\n    attach = '',\n    showOverlay,\n    size: propsSize,\n    placement,\n    onCancel,\n    onConfirm,\n    onClose,\n    onCloseBtnClick,\n    onOverlayClick,\n    onEscKeydown,\n    showInAttachedElement,\n    closeOnOverlayClick,\n    closeOnEscKeydown,\n    children,\n    header,\n    body,\n    footer,\n    closeBtn,\n    cancelBtn,\n    confirmBtn,\n    zIndex,\n    destroyOnClose,\n    mode,\n    preventScrollThrough = true,\n    sizeDraggable,\n  } = props;\n\n  // 国际化文本初始化\n  const [local, t] = useLocaleReceiver('drawer');\n  const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n  const size = propsSize ?? local.size;\n  const confirmText = t(local.confirm);\n  const cancelText = t(local.cancel);\n\n  const { classPrefix } = useConfig();\n  const containerRef = useRef<HTMLDivElement>();\n  const contentWrapperRef = useRef<HTMLDivElement>();\n  const drawerWrapperRef = useRef<HTMLElement>(); // 即最终的 attach dom，默认为 document.body\n  const prefixCls = `${classPrefix}-drawer`;\n  const lockCls = `${prefixCls}--lock`;\n\n  const transform = visible ? 'translate(0px)' : '';\n  const closeIcon = React.isValidElement(closeBtn) ? closeBtn : <CloseIcon />;\n  const { dragSizeValue, enableDrag, draggableLineStyles } = useDrag(placement, sizeDraggable);\n  const [isDestroyOnClose, setIsDestroyOnClose] = useState(false);\n\n  useImperativeHandle(ref, () => containerRef.current);\n\n  useEffect(() => {\n    if (preventScrollThrough) {\n      if (visible && !showInAttachedElement) {\n        addClass(document.body, lockCls);\n      } else {\n        removeClass(document.body, lockCls);\n      }\n    }\n  }, [visible, showInAttachedElement, lockCls, preventScrollThrough]);\n\n  // 重置销毁钩子判断\n  useEffect(() => {\n    if (!destroyOnClose || !visible) return;\n    setIsDestroyOnClose(false);\n  }, [visible, destroyOnClose]);\n\n  const getSizeValue = useCallback(\n    (size: string): string => {\n      if (dragSizeValue) return dragSizeValue;\n\n      const defaultSize = isNaN(Number(size)) ? size : `${size}px`;\n      return (\n        {\n          small: '300px',\n          medium: '500px',\n          large: '760px',\n        }[size] || defaultSize\n      );\n    },\n    [dragSizeValue],\n  );\n\n  useEffect(() => {\n    let documentBodyCssText = '';\n\n    if (visible) {\n      if (attach !== '' && hasScrollBar()) {\n        // 处理滚动条宽度导致晃动的问题。\n        const scrollbarWidth = getScrollbarWidth();\n        documentBodyCssText = `overflow: hidden; width: calc(100% - ${scrollbarWidth}px);`;\n\n        if (mode !== 'push') {\n          // 这里做简单的性能优化，如果是 body 那么在下面 mode=push 的模式下，一起使用 cssText 设置，减少重绘重排\n          document.body.style.cssText = documentBodyCssText;\n        }\n      }\n    }\n\n    if (mode === 'push') {\n      drawerWrapperRef.current.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s';\n\n      const marginStr = {\n        left: `margin: 0 0 0 ${getSizeValue(size)}`,\n        right: `margin: 0 0 0 -${getSizeValue(size)}`,\n        top: `margin: ${getSizeValue(size)} 0 0 0`,\n        bottom: `margin: -${getSizeValue(size)} 0 0 0`,\n      }[placement];\n\n      if (visible) {\n        drawerWrapperRef.current.style.cssText += marginStr;\n      } else {\n        drawerWrapperRef.current.style.cssText = drawerWrapperRef.current.style.cssText.replace(/margin:.+;/, '');\n      }\n    }\n\n    if (contentWrapperRef.current) {\n      // 聚焦到 Drawer 最外层元素即 containerRef.current，KeyDown 事件才有效。\n      containerRef.current.focus();\n\n      contentWrapperRef.current.style.transform = transform;\n    }\n  }, [attach, mode, transform, visible, placement, size, getSizeValue]);\n\n  function onMaskClick(e: React.MouseEvent<HTMLDivElement>) {\n    onOverlayClick?.({ e });\n    (closeOnOverlayClick ?? local.closeOnOverlayClick) && onClose?.({ e, trigger: CloseTriggerType.CLICK_OVERLAY });\n  }\n  function onClickCloseBtn(e: React.MouseEvent<HTMLDivElement>) {\n    onCloseBtnClick?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CLOSE_BTN });\n  }\n  function onKeyDownEsc(e: React.KeyboardEvent<HTMLDivElement>) {\n    if (e.key !== 'Escape') return;\n\n    onEscKeydown?.({ e });\n    (closeOnEscKeydown ?? local.closeOnEscKeydown) && onClose?.({ e, trigger: CloseTriggerType.KEYDOWN_ESC });\n  }\n  function onCancelClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onCancel?.({ e });\n    onClose?.({ e, trigger: CloseTriggerType.CLICK_CANCEL_BTN });\n  }\n  function onConfirmClick(e: React.MouseEvent<HTMLButtonElement>) {\n    onConfirm?.({ e });\n  }\n\n  function onTransitionEnd() {\n    if (!visible) {\n      // 重置样式\n      document.body.style.display = 'none';\n      document.body.style.overflow = '';\n      document.body.style.width = '';\n      document.body.style.margin = '';\n      document.body.style.display = 'block';\n\n      destroyOnClose && setIsDestroyOnClose(true);\n    }\n  }\n\n  const drawerClass = classnames(prefixCls, className, `${prefixCls}--${placement}`, {\n    [`${prefixCls}--open`]: visible,\n    [`${prefixCls}--attach`]: showInAttachedElement,\n    [`${prefixCls}--without-mask`]: !showOverlay,\n  });\n\n  const contentWrapperClass = classnames(\n    `${prefixCls}__content-wrapper`,\n    `${prefixCls}__content-wrapper--${placement}`,\n  );\n\n  const getContentWrapperStyle = useCallback(\n    () => ({\n      transform: visible ? 'translateX(0)' : undefined,\n      width: ['left', 'right'].includes(placement) ? getSizeValue(size) : '',\n      height: ['top', 'bottom'].includes(placement) ? getSizeValue(size) : '',\n    }),\n    [visible, placement, size, getSizeValue],\n  );\n\n  const [contentWrapperStyle, setContentWrapperStyle] = useState(getContentWrapperStyle());\n\n  useEffect(() => {\n    setContentWrapperStyle(getContentWrapperStyle());\n  }, [getContentWrapperStyle]);\n\n  function getFooter(): React.ReactNode {\n    if (footer !== true) return footer;\n\n    const defaultCancelBtn = (\n      <Button theme=\"default\" onClick={onCancelClick} className={`${prefixCls}__cancel`}>\n        {cancelBtn && typeof cancelBtn === 'string' ? cancelBtn : cancelText}\n      </Button>\n    );\n\n    const defaultConfirmBtn = (\n      <Button theme=\"primary\" onClick={onConfirmClick} className={`${prefixCls}__confirm`}>\n        {confirmBtn && typeof confirmBtn === 'string' ? confirmBtn : confirmText}\n      </Button>\n    );\n\n    const renderCancelBtn = cancelBtn && React.isValidElement(cancelBtn) ? cancelBtn : defaultCancelBtn;\n    const renderConfirmBtn = confirmBtn && React.isValidElement(confirmBtn) ? confirmBtn : defaultConfirmBtn;\n\n    const footerStyle = {\n      display: 'flex',\n      justifyContent: placement === 'right' ? 'flex-start' : 'flex-end',\n    };\n\n    return (\n      <div style={footerStyle}>\n        {placement === 'right' && renderConfirmBtn}\n        {renderCancelBtn}\n        {placement !== 'right' && renderConfirmBtn}\n      </div>\n    );\n  }\n\n  const renderOverlay = showOverlay && <div className={`${prefixCls}__mask`} onClick={onMaskClick} />;\n  const renderCloseBtn = closeBtn && (\n    <div onClick={onClickCloseBtn} className={`${prefixCls}__close-btn`}>\n      {closeIcon}\n    </div>\n  );\n  const renderHeader = header && <div className={`${prefixCls}__header`}>{header}</div>;\n  const renderBody = <div className={`${prefixCls}__body`}>{body || children}</div>;\n  const renderFooter = footer && <div className={`${prefixCls}__footer`}>{getFooter()}</div>;\n\n  if (isDestroyOnClose && !visible) return null;\n\n  return (\n    <DrawerWrapper attach={attach} ref={drawerWrapperRef}>\n      <div\n        ref={containerRef}\n        className={drawerClass}\n        style={{ zIndex, ...style }}\n        tabIndex={-1} // https://stackoverflow.com/questions/43503964/onkeydown-event-not-working-on-divs-in-react\n        onKeyDown={onKeyDownEsc}\n        onTransitionEnd={onTransitionEnd}\n      >\n        {renderOverlay}\n        <div ref={contentWrapperRef} className={contentWrapperClass} style={contentWrapperStyle}>\n          {renderCloseBtn}\n          {renderHeader}\n          {renderBody}\n          {renderFooter}\n          {sizeDraggable && <div style={draggableLineStyles} onMouseDown={enableDrag}></div>}\n        </div>\n      </div>\n    </DrawerWrapper>\n  );\n});\n\nDrawer.displayName = 'Drawer';\nDrawer.defaultProps = drawerDefaultProps;\n\nexport default Drawer;\n"],"names":["CloseTriggerType","CLICK_OVERLAY","CLICK_CLOSE_BTN","CLICK_CANCEL_BTN","KEYDOWN_ESC","Drawer","forwardRef","props","ref","className","style","visible","attach","showOverlay","propsSize","size","placement","onCancel","onConfirm","onClose","onCloseBtnClick","onOverlayClick","onEscKeydown","showInAttachedElement","closeOnOverlayClick","closeOnEscKeydown","children","header","body","footer","closeBtn","cancelBtn","confirmBtn","zIndex","destroyOnClose","mode","preventScrollThrough","sizeDraggable","useLocaleReceiver","_slicedToArray","local","t","useGlobalIcon","CloseIcon","TdCloseIcon","confirmText","confirm","cancelText","cancel","useConfig","classPrefix","containerRef","useRef","contentWrapperRef","drawerWrapperRef","prefixCls","lockCls","transform","closeIcon","React","isValidElement","useDrag","dragSizeValue","enableDrag","draggableLineStyles","useState","isDestroyOnClose","setIsDestroyOnClose","useImperativeHandle","current","useEffect","addClass","document","removeClass","getSizeValue","useCallback","defaultSize","isNaN","Number","small","medium","large","documentBodyCssText","hasScrollBar","scrollbarWidth","getScrollbarWidth","cssText","marginStr","left","right","top","bottom","replace","focus","onMaskClick","e","trigger","onClickCloseBtn","onKeyDownEsc","key","onCancelClick","onConfirmClick","onTransitionEnd","display","overflow","width","margin","drawerClass","classnames","_defineProperty","contentWrapperClass","getContentWrapperStyle","includes","height","contentWrapperStyle","setContentWrapperStyle","getFooter","defaultCancelBtn","createElement","Button","theme","onClick","defaultConfirmBtn","renderCancelBtn","renderConfirmBtn","footerStyle","justifyContent","renderOverlay","renderCloseBtn","renderHeader","renderBody","renderFooter","DrawerWrapper","tabIndex","onKeyDown","onMouseDown","displayName","defaultProps","drawerDefaultProps"],"mappings":"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"}