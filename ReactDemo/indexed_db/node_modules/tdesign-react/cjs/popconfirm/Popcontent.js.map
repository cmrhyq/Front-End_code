{"version":3,"file":"Popcontent.js","sources":["../../src/popconfirm/Popcontent.tsx"],"sourcesContent":["import React from 'react';\nimport isString from 'lodash/isString';\nimport classNames from 'classnames';\nimport { InfoCircleFilledIcon as TdInfoCircleFilledIcon } from 'tdesign-icons-react';\nimport Button from '../button';\nimport noop from '../_util/noop';\nimport useConfig from '../hooks/useConfig';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\nimport type { PopconfirmProps } from './Popconfirm';\nimport type { PopconfirmVisibleChangeContext } from './type';\n\nconst Popcontent = (props: PopconfirmProps & { onClose?: (context: PopconfirmVisibleChangeContext) => any }) => {\n  const { content, cancelBtn, confirmBtn, icon, theme, onCancel = noop, onConfirm = noop, onClose = noop } = props;\n\n  const { classPrefix } = useConfig();\n  const { InfoCircleFilledIcon } = useGlobalIcon({ InfoCircleFilledIcon: TdInfoCircleFilledIcon });\n\n  const hideCancel = cancelBtn === null || cancelBtn === undefined;\n  const hideConfirm = confirmBtn === null || confirmBtn === undefined;\n\n  function renderIcon() {\n    let color = '#0052D9';\n    // theme 为 default 时不展示图标，否则根据 theme 的值设置图标颜色样式\n    const defaultIcon = <InfoCircleFilledIcon />;\n\n    switch (theme) {\n      case 'warning': // 黄色\n        color = '#FFAA00';\n        break;\n      case 'danger':\n        color = '#FF3E00'; // 红色\n        break;\n    }\n\n    let iconComponent = null;\n\n    // icon 是自定义组件实例，优先级最高\n    if (React.isValidElement(icon)) {\n      iconComponent = React.cloneElement(icon, {\n        style: { color },\n        ...icon.props,\n      });\n      // icon 是自定义组件类型\n    } else if (typeof icon === 'function') {\n      iconComponent = icon();\n    } else if (defaultIcon) {\n      iconComponent = React.cloneElement(defaultIcon, {\n        style: { color },\n      });\n    }\n    return iconComponent;\n  }\n\n  function renderCancel() {\n    if (React.isValidElement(cancelBtn)) {\n      return React.cloneElement(cancelBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'cancel' });\n          cancelBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideCancel) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"default\"\n        variant=\"base\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'cancel' });\n          onCancel({ e });\n        }}\n      >\n        {isString(cancelBtn) && cancelBtn}\n      </Button>\n    );\n  }\n\n  function renderConfirm() {\n    if (React.isValidElement(confirmBtn)) {\n      return React.cloneElement(confirmBtn, {\n        onClick: (e) => {\n          onClose({ e, trigger: 'confirm' });\n          confirmBtn.props?.onClick?.(e);\n        },\n      });\n    }\n\n    if (hideConfirm) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"small\"\n        theme=\"primary\"\n        onClick={(e) => {\n          onClose({ e, trigger: 'confirm' });\n          onConfirm({ e });\n        }}\n      >\n        {isString(confirmBtn) && confirmBtn}\n      </Button>\n    );\n  }\n\n  return (\n    <div className={`${classPrefix}-popconfirm__content`}>\n      <div className={`${classPrefix}-popconfirm__body`}>\n        {renderIcon()}\n        <div className={`${classPrefix}-popconfirm__inner`}>{content}</div>\n      </div>\n      <div className={`${classPrefix}-popconfirm__buttons`}>\n        <span className={classNames(`${classPrefix}-popconfirm__cancel`)}>{renderCancel()}</span>\n        <span className={classNames(`${classPrefix}-popconfirm__confirm`)}>{renderConfirm()}</span>\n      </div>\n    </div>\n  );\n};\n\nPopcontent.displayName = 'Popcontent';\n\nexport default Popcontent;\n"],"names":["Popcontent","props","content","cancelBtn","confirmBtn","icon","theme","onCancel","noop","onConfirm","onClose","useConfig","classPrefix","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","hideCancel","hideConfirm","renderIcon","color","defaultIcon","iconComponent","React","isValidElement","cloneElement","style","renderCancel","onClick","e","trigger","createElement","Button","size","variant","isString","renderConfirm","className","classNames","displayName"],"mappings":"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"}