{"version":3,"file":"DropdownMenu.js","sources":["../../src/dropdown/DropdownMenu.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport classNames from 'classnames';\nimport { ChevronRightIcon as TdIconChevronRight, ChevronLeftIcon as TdIconChevronLeft } from 'tdesign-icons-react';\nimport useConfig from '../hooks/useConfig';\nimport { DropdownProps } from './Dropdown';\nimport TDivider from '../divider';\nimport DropdownItem from './DropdownItem';\nimport { DropdownOption } from './type';\nimport useGlobalIcon from '../hooks/useGlobalIcon';\n\nconst DropdownMenu = (props: DropdownProps) => {\n  const { options = [], maxHeight = 300, minColumnWidth = 10, maxColumnWidth = 160, direction } = props;\n\n  const { classPrefix } = useConfig();\n  const dropdownClass = `${classPrefix}-dropdown`;\n  const dropdownMenuClass = `${dropdownClass}__menu`;\n\n  const { ChevronRightIcon, ChevronLeftIcon } = useGlobalIcon({\n    ChevronRightIcon: TdIconChevronRight,\n    ChevronLeftIcon: TdIconChevronLeft,\n  });\n\n  const handleItemClick = (options: {\n    data: DropdownOption;\n    context: { e: React.MouseEvent<HTMLDivElement, MouseEvent> };\n  }) => {\n    const { data, context } = options;\n    data?.onClick?.(data, context);\n    props.onClick?.(data, context);\n  };\n\n  // 处理options渲染的场景\n  const renderOptions = (data: Array<DropdownOption | React.ReactChild>) => {\n    const arr = [];\n    let renderContent: ReactElement;\n    data.forEach?.((menu, idx) => {\n      const optionItem = { ...(menu as DropdownOption) };\n\n      if (optionItem.children) {\n        optionItem.children = renderOptions(optionItem.children);\n        renderContent = (\n          <div key={idx}>\n            <DropdownItem\n              className={classNames(`${dropdownClass}__item`, `${dropdownClass}__item--suffix`)}\n              value={optionItem.value}\n              theme={optionItem.theme}\n              active={optionItem.active}\n              prefixIcon={optionItem.prefixIcon}\n              disabled={optionItem.disabled}\n              minColumnWidth={minColumnWidth}\n              maxColumnWidth={maxColumnWidth}\n              isSubmenu={true}\n            >\n              <div className={`${dropdownClass}__item-content`}>\n                {direction === 'right' ? (\n                  <>\n                    <span className={`${dropdownClass}__item-text`}>{optionItem.content}</span>\n                    <ChevronRightIcon className={`${dropdownClass}__item-direction`} size=\"16\" />\n                  </>\n                ) : (\n                  <>\n                    <ChevronLeftIcon className={`${dropdownClass}__item-direction`} size=\"16\" />\n                    <span className={`${dropdownClass}__item-text`}>{optionItem.content}</span>\n                  </>\n                )}\n              </div>\n              <div\n                className={classNames(`${dropdownClass}__submenu`, {\n                  [`${dropdownClass}__submenu--disabled`]: optionItem.disabled,\n                  [`${dropdownClass}__submenu--${direction}`]: direction,\n                })}\n                style={{\n                  top: `${idx * 30}px`,\n                }}\n              >\n                <ul>{optionItem.children}</ul>\n              </div>\n            </DropdownItem>\n            {optionItem.divider ? <TDivider /> : null}\n          </div>\n        );\n      } else {\n        renderContent = (\n          <div key={idx}>\n            <DropdownItem\n              className={`${dropdownClass}__item`}\n              value={optionItem.value}\n              theme={optionItem.theme}\n              active={optionItem.active}\n              prefixIcon={optionItem.prefixIcon}\n              disabled={optionItem.disabled}\n              minColumnWidth={minColumnWidth}\n              maxColumnWidth={maxColumnWidth}\n              onClick={\n                optionItem.disabled || optionItem.children\n                  ? () => null\n                  : (\n                      value: string | number | { [key: string]: any },\n                      context: { e: React.MouseEvent<HTMLDivElement, MouseEvent> },\n                    ) => handleItemClick({ data: optionItem, context })\n              }\n            >\n              <span className={`${dropdownClass}-text`}>{optionItem.content}</span>\n            </DropdownItem>\n            {optionItem.divider ? <TDivider /> : null}\n          </div>\n        );\n      }\n      arr.push(renderContent);\n    });\n    return arr;\n  };\n\n  return (\n    <div\n      className={classNames(dropdownMenuClass, `${dropdownMenuClass}--${direction}`)}\n      style={{\n        maxHeight: `${maxHeight}px`,\n      }}\n    >\n      {renderOptions(options)}\n    </div>\n  );\n};\n\nDropdownMenu.displayName = 'DropdownMenu';\n\nexport default DropdownMenu;\n"],"names":["DropdownMenu","props","options","maxHeight","minColumnWidth","maxColumnWidth","direction","useConfig","classPrefix","dropdownClass","dropdownMenuClass","useGlobalIcon","ChevronRightIcon","TdIconChevronRight","ChevronLeftIcon","TdIconChevronLeft","handleItemClick","data","context","onClick","renderOptions","arr","renderContent","forEach","menu","idx","optionItem","children","React","createElement","key","DropdownItem","className","classNames","value","theme","active","prefixIcon","disabled","isSubmenu","Fragment","content","size","_defineProperty","style","top","divider","TDivider","push","displayName"],"mappings":"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"}