{"version":3,"file":"InputAdornment.js","sources":["../../src/input-adornment/InputAdornment.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport { TdInputAdornmentProps } from './type';\nimport { StyledProps } from '../common';\n\nexport interface InputAdornmentProps extends TdInputAdornmentProps, StyledProps {\n  children?: React.ReactNode;\n}\n\nconst InputAdornment = forwardRef((props: InputAdornmentProps, ref: React.Ref<HTMLDivElement>) => {\n  const { classPrefix } = useConfig();\n  const { prepend, append, children, className, style, ...wrapperProps } = props;\n\n  const renderAddon = (type: string, classPrefix: string, Content) => {\n    let result: React.ReactNode;\n\n    if (typeof Content === 'function') {\n      result = <Content />;\n    } else if (typeof Content !== 'undefined') {\n      result = Content;\n    }\n\n    if (result || typeof result === 'number') {\n      result = <span className={`${classPrefix}-input-adornment__${type}`}>{result}</span>;\n    }\n\n    return result;\n  };\n\n  const renderChildren = () =>\n    React.Children.map(children, (child) => {\n      if (!child) return null;\n      if (React.isValidElement(child)) {\n        return React.cloneElement(child, {\n          ...wrapperProps,\n          ...child.props,\n          onChange: (...args) => {\n            // @ts-ignore\n            wrapperProps?.onChange?.call?.(null, ...args);\n            child.props?.onChange?.call?.(null, ...args);\n          },\n        });\n      }\n      return child;\n    });\n\n  return (\n    <div\n      ref={ref}\n      style={style}\n      className={classNames(`${classPrefix}-input-adornment`, className, {\n        [`${classPrefix}-input-adornment--prepend`]: !!prepend,\n        [`${classPrefix}-input-adornment--append`]: !!append,\n      })}\n    >\n      {renderAddon('prepend', classPrefix, prepend)}\n      {renderChildren()}\n      {renderAddon('append', classPrefix, append)}\n    </div>\n  );\n});\n\nInputAdornment.displayName = 'InputAdornment';\n\nexport default InputAdornment;\n"],"names":["InputAdornment","forwardRef","props","ref","useConfig","classPrefix","prepend","append","children","className","style","wrapperProps","renderAddon","type","Content","result","React","createElement","renderChildren","Children","map","child","isValidElement","cloneElement","onChange","args","call","classNames","_defineProperty","displayName"],"mappings":"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"}