{"version":3,"file":"Button.js","sources":["../../src/button/Button.tsx"],"sourcesContent":["import React, { forwardRef, useRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport useConfig from '../hooks/useConfig';\nimport useRipple from '../_util/useRipple';\nimport Loading from '../loading';\nimport { TdButtonProps } from './type';\nimport { buttonDefaultProps } from './defaultProps';\n\nexport interface ButtonProps\n  extends TdButtonProps,\n    Omit<React.AllHTMLAttributes<HTMLElement>, 'content' | 'shape' | 'size' | 'type'> {}\n\nconst Button = forwardRef((props: ButtonProps, ref: React.RefObject<HTMLElement>) => {\n  const {\n    type,\n    theme,\n    variant,\n    icon,\n    disabled,\n    loading,\n    size,\n    block,\n    ghost,\n    shape,\n    children,\n    content,\n    className,\n    suffix,\n    href,\n    tag,\n    onClick,\n    ...buttonProps\n  } = props;\n\n  const { classPrefix } = useConfig();\n\n  const btnRef = useRef();\n  useRipple(ref || btnRef);\n\n  const renderChildren = content ?? children;\n\n  let iconNode = icon;\n  if (loading) iconNode = <Loading loading={loading} inheritColor={true} />;\n\n  const renderTheme = useMemo(() => {\n    if (!theme) {\n      if (variant === 'base') return 'primary';\n      return 'default';\n    }\n    return theme;\n  }, [theme, variant]);\n\n  const renderTag = useMemo(() => {\n    if (!tag && href) return 'a';\n    return tag || 'button';\n  }, [tag, href]);\n\n  return React.createElement(\n    renderTag,\n    {\n      ...buttonProps,\n      href,\n      type,\n      ref: ref || btnRef,\n      disabled: disabled || loading,\n      className: classNames(\n        className,\n        [\n          `${classPrefix}-button`,\n          `${classPrefix}-button--theme-${renderTheme}`,\n          `${classPrefix}-button--variant-${variant}`,\n        ],\n        {\n          [`${classPrefix}-button--shape-${shape}`]: shape !== 'rectangle',\n          [`${classPrefix}-button--ghost`]: ghost,\n          [`${classPrefix}-is-loading`]: loading,\n          [`${classPrefix}-is-disabled`]: disabled,\n          [`${classPrefix}-size-s`]: size === 'small',\n          [`${classPrefix}-size-l`]: size === 'large',\n          [`${classPrefix}-size-full-width`]: block,\n        },\n      ),\n      onClick: !disabled && !loading ? onClick : undefined,\n    },\n    <>\n      {iconNode}\n      {renderChildren && <span className={`${classPrefix}-button__text`}>{renderChildren}</span>}\n      {suffix && <span className={`${classPrefix}-button__suffix`}>{suffix}</span>}\n    </>,\n  );\n});\n\nButton.displayName = 'Button';\nButton.defaultProps = buttonDefaultProps;\n\nexport default Button;\n"],"names":["Button","forwardRef","props","ref","type","theme","variant","icon","disabled","loading","size","block","ghost","shape","children","content","className","suffix","href","tag","onClick","buttonProps","useConfig","classPrefix","btnRef","useRef","useRipple","renderChildren","iconNode","React","createElement","Loading","inheritColor","renderTheme","useMemo","renderTag","classNames","_defineProperty","Fragment","displayName","defaultProps","buttonDefaultProps"],"mappings":"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"}